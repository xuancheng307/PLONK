# PLONK Demo: wÂ² + x = y

å®Œæ•´å¯åŸ·è¡Œçš„ PLONK å”è­°æ¼”ç¤ºï¼Œè­‰æ˜å­˜åœ¨ç§˜å¯† `w` ä½¿å¾— `wÂ² + x = y`ã€‚

## ğŸ“‹ å°ˆæ¡ˆçµæ§‹

```
PLONK/
â”œâ”€â”€ backend/                  # Rust å¾Œç«¯ (ä½¿ç”¨ dusk-plonk)
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ main.rs          # ä¸»ç¨‹å¼ï¼šå”èª¿æ‰€æœ‰éšæ®µ
â”‚   â”‚   â”œâ”€â”€ types.rs         # JSON è³‡æ–™çµæ§‹å®šç¾©
â”‚   â”‚   â”œâ”€â”€ srs.rs           # ç¬¬ 6 ç« ï¼šUniversal Setup
â”‚   â”‚   â”œâ”€â”€ circuit.rs       # ç¬¬ 7 ç« ï¼šé›»è·¯å®šç¾© (wÂ²+x=y)
â”‚   â”‚   â”œâ”€â”€ prover.rs        # ç¬¬ 8 ç« ï¼šProver 5 å›åˆ
â”‚   â”‚   â””â”€â”€ verifier.rs      # ç¬¬ 9 ç« ï¼šVerifier é©—è­‰
â”‚   â””â”€â”€ Cargo.toml           # Rust å°ˆæ¡ˆé…ç½®
â”‚
â”œâ”€â”€ web/                      # å‰ç«¯ç¶²é 
â”‚   â”œâ”€â”€ index.html           # ä¸»å ±å‘Šé é¢
â”‚   â”œâ”€â”€ demo.js              # è¼‰å…¥ä¸¦å±•ç¤º JSON æ•¸æ“š
â”‚   â”œâ”€â”€ demo_sections.html   # Demo å€å¡Šï¼ˆå¾…æ•´åˆåˆ° index.htmlï¼‰
â”‚   â””â”€â”€ data/                # Backend ç”Ÿæˆçš„ JSON è¼¸å‡º
â”‚       â”œâ”€â”€ setup_metrics.json
â”‚       â”œâ”€â”€ circuit_info.json
â”‚       â”œâ”€â”€ preprocess_metrics.json
â”‚       â”œâ”€â”€ prover_trace.json
â”‚       â”œâ”€â”€ verifier_trace.json
â”‚       â””â”€â”€ summary.txt
â”‚
â”œâ”€â”€ index.html               # (åŸå§‹å ±å‘Šæª”æ¡ˆ)
â””â”€â”€ README.md                # æœ¬æª”æ¡ˆ
```

## ğŸ¯ Demo ä¾‹å­

**é›»è·¯**ï¼š`wÂ² + x = y`

**å…·é«”æ•¸å€¼**ï¼š
- **ç§˜å¯† witness**ï¼š`w = 3`
- **å…¬é–‹è¼¸å…¥**ï¼š`x = 3`, `y = 12`
- **é©—è­‰**ï¼š`3Â² + 3 = 9 + 3 = 12` âœ“

**Gate åˆ†è§£**ï¼š
- Gate 0 (ä¹˜æ³•)ï¼š`w Ã— w = t`
- Gate 1 (åŠ æ³•)ï¼š`t + x = y`

## ğŸš€ å¿«é€Ÿé–‹å§‹

### æ­¥é©Ÿ 1ï¼šå®‰è£ Rust

ç¢ºä¿å·²å®‰è£ Rust (1.70+)ï¼š

```bash
rustc --version
```

å¦‚æœªå®‰è£ï¼Œè«‹è¨ªå• [rust-lang.org](https://www.rust-lang.org/)

### æ­¥é©Ÿ 2ï¼šç·¨è­¯ä¸¦åŸ·è¡Œ Backend

```bash
cd backend
cargo build --release
cargo run --release
```

åŸ·è¡Œå¾Œæœƒçœ‹åˆ°é¡ä¼¼è¼¸å‡ºï¼š

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘     PLONK Demo: wÂ² + x = y                   â•‘
â•‘     è­‰æ˜ w=3 ä½¿å¾— 3Â² + 3 = 12                â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”â”â” ç¬¬ 6 ç« ï¼šUniversal Setup â”â”â”
ğŸ”§ é–‹å§‹ Universal Setup (n = 16)...
âœ… Setup å®Œæˆï¼è€—æ™‚ XXX ms
   - G1 å…ƒç´ : 17
   - G2 å…ƒç´ : 2
   - ç´„ç•¥å¤§å°: X.XX KB

â”â”â” ç¬¬ 7 ç« ï¼šé›»è·¯èˆ‡é è™•ç† â”â”â”
ğŸ”¨ å»ºç«‹é›»è·¯ï¼šwÂ² + x = y
âœ… é›»è·¯å»ºç«‹å®Œæˆï¼è€—æ™‚ XX ms
   - Gates: 2
   - Public inputs: 2 (x, y)

â”â”â” ç¬¬ 8 ç« ï¼šProver è­‰æ˜ç”Ÿæˆ â”â”â”
ğŸ” é–‹å§‹è­‰æ˜ç”Ÿæˆ (5 rounds)...
  Round 1: Wire Polynomials
  Round 2: Permutation Argument
  Round 3: Quotient Polynomial
  Round 4: Opening Evaluations
  Round 5: Opening Proofs
âœ… è­‰æ˜ç”Ÿæˆå®Œæˆï¼ç¸½è€—æ™‚ XXX ms
   - è­‰æ˜å¤§å°: XXX bytes

â”â”â” ç¬¬ 9 ç« ï¼šVerifier é©—è­‰ â”â”â”
ğŸ” é–‹å§‹è­‰æ˜é©—è­‰...
âœ… é©—è­‰å®Œæˆï¼çµæœ: é€šé âœ“
   - é©—è­‰è€—æ™‚: XX ms

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  âœ… é©—è­‰æˆåŠŸï¼è­‰æ˜æœ‰æ•ˆï¼                       â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“ æ‰€æœ‰æ•¸æ“šå·²è¼¸å‡ºåˆ° web/data/
```

### æ­¥é©Ÿ 3ï¼šæ•´åˆå‰ç«¯ Demo å€å¡Š

1. **è¤‡è£½ CSS æ¨£å¼**ï¼š
   - é–‹å•Ÿ `web/demo_sections.html`
   - å°‡ `<style>` å€å¡Šè¤‡è£½åˆ° `index.html` çš„ `<head>` æˆ–ç¾æœ‰ `<style>` ä¸­

2. **æ’å…¥ Demo å€å¡Š**ï¼š
   - å°‡ `#ch6-demo` æ’å…¥åˆ°ã€Œç¬¬ 6 ç« ã€æœ«å°¾
   - å°‡ `#ch7-demo` æ’å…¥åˆ°ã€Œç¬¬ 7 ç« ã€æœ«å°¾
   - å°‡ `#ch8-demo` æ’å…¥åˆ°ã€Œç¬¬ 8 ç« ã€æœ«å°¾
   - å°‡ `#ch9-demo` æ’å…¥åˆ°ã€Œç¬¬ 9 ç« ã€æœ«å°¾

3. **å¼•å…¥ JavaScript**ï¼š
   - åœ¨ `</body>` ä¹‹å‰åŠ å…¥ï¼š
     ```html
     <script src="demo.js"></script>
     ```

### æ­¥é©Ÿ 4ï¼šæŸ¥çœ‹ Demo

1. å°‡æ•´å€‹å°ˆæ¡ˆè¤‡è£½åˆ° `web/` ç›®éŒ„ï¼š
   ```bash
   # å¦‚æœ backend åœ¨ PLONK/ ä¸‹
   # JSON æª”æ¡ˆæ‡‰è©²å·²ç¶“åœ¨ web/data/ ä¸­äº†
   ```

2. é–‹å•Ÿ `web/index.html` æˆ– `index.html`ï¼ˆå–æ±ºæ–¼æ‚¨çš„æ•´åˆæ–¹å¼ï¼‰

3. æ¯å€‹ç« ç¯€æœ«å°¾æœƒå‡ºç¾äº’å‹•å¼ Demoï¼Œå±•ç¤ºï¼š
   - Setup çµ±è¨ˆè³‡æ–™
   - é›»è·¯çµæ§‹èˆ‡ gate è©³æƒ…
   - Prover 5 å›åˆçš„åŸ·è¡Œè»Œè·¡
   - Verifier é©—è­‰æ­¥é©Ÿ

## ğŸ“Š è¼¸å‡ºæ•¸æ“šèªªæ˜

### setup_metrics.json
```json
{
  "n": 16,
  "d": 16,
  "num_g1": 17,
  "num_g2": 2,
  "approx_size_bytes": 1008,
  "setup_time_ms": XXX
}
```

### circuit_info.json
```json
{
  "description": "è­‰æ˜å­˜åœ¨ç§˜å¯† wï¼Œä½¿å¾— wÂ² + x = y",
  "witness": {
    "w": "3",
    "x": "3",
    "y": "12",
    "t": "9"
  },
  "gates": [ ... ]
}
```

### prover_trace.json
åŒ…å« 5 å€‹å›åˆçš„è©³ç´°è³‡è¨Šï¼š
- Round 1: Wire Polynomials (a, b, c)
- Round 2: Permutation Argument (z)
- Round 3: Quotient Polynomial (t_lo, t_mid, t_hi)
- Round 4: Opening Evaluations
- Round 5: Opening Proofs (W_Î¶, W_Î¶Ï‰)

### verifier_trace.json
åŒ…å« 6 å€‹é©—è­‰æ­¥é©Ÿï¼š
1. é‡å»º Fiat-Shamir transcript
2. è©•ä¼° PI(Î¶)
3. è¨ˆç®— Z_H(Î¶)
4. è¨ˆç®— Lâ‚(Î¶)
5. è¨ˆç®—ç·šæ€§åŒ–å¤šé …å¼
6. æ‰¹é‡å¤šé …å¼é–‹å•Ÿé©—è­‰

## ğŸ”§ é–‹ç™¼èˆ‡èª¿è©¦

### ç·¨è­¯æª¢æŸ¥

```bash
cd backend
cargo check
```

### åŸ·è¡Œæ¸¬è©¦

```bash
cargo test
```

### æŸ¥çœ‹è©³ç´°æ—¥èªŒ

```bash
cargo run --release -- --verbose
```

## ğŸ“š ç›¸é—œæ–‡æª”

- **PLONK è«–æ–‡**ï¼š`è«–æ–‡/PLONK.pdf`
- **dusk-plonk æ–‡æª”**ï¼š[docs.rs/dusk-plonk](https://docs.rs/dusk-plonk)
- **æŠ€è¡“å ±å‘Š**ï¼š`index.html` (å®Œæ•´çš„ PLONK å”è­°èªªæ˜)

## ğŸ› å¸¸è¦‹å•é¡Œ

### Q: ç·¨è­¯å¤±æ•—ï¼Œæç¤ºæ‰¾ä¸åˆ° dusk-plonk

**A**: ç¢ºä¿ Cargo.toml ä¸­çš„ç‰ˆæœ¬è™Ÿæ­£ç¢ºï¼Œä¸¦åŸ·è¡Œï¼š
```bash
cargo update
```

### Q: JSON æª”æ¡ˆæ²’æœ‰ç”Ÿæˆ

**A**: ç¢ºèªï¼š
1. Backend ç¨‹å¼åŸ·è¡ŒæˆåŠŸ
2. `web/data/` ç›®éŒ„å­˜åœ¨
3. æª”æ¡ˆè·¯å¾‘æ­£ç¢ºï¼ˆç›¸å°æ–¼ backend/ çš„è·¯å¾‘æ˜¯ `../web/data/`ï¼‰

### Q: å‰ç«¯é¡¯ç¤ºã€Œè¼‰å…¥å¤±æ•—ã€

**A**:
1. ç¢ºèª backend å·²åŸ·è¡Œä¸¦ç”Ÿæˆ JSON
2. æª¢æŸ¥ç€è¦½å™¨ Console çš„éŒ¯èª¤è¨Šæ¯
3. ç¢ºèª `demo.js` è·¯å¾‘æ­£ç¢º

### Q: å¦‚ä½•ä¿®æ”¹é›»è·¯æˆ–æ•¸å€¼ï¼Ÿ

**A**: ç·¨è¼¯ `backend/src/circuit.rs` ä¸­çš„ `new_demo()` å‡½æ•¸ï¼Œä¿®æ”¹ `w`, `x`, `y` çš„å€¼ã€‚

## ğŸ“ æˆæ¬Š

æœ¬å°ˆæ¡ˆç‚ºæ•™è‚²ç¤ºç¯„ç”¨é€”ï¼Œä½¿ç”¨ MIT æˆæ¬Šã€‚

## ğŸ™ è‡´è¬

- åŸºæ–¼ **dusk-network/plonk** å¯¦ä½œ
- åƒè€ƒ **PLONK è«–æ–‡** (Gabizon et al.)
- æ„Ÿè¬æ‰€æœ‰è²¢ç»è€…

## ğŸ“ è¯çµ¡æ–¹å¼

å¦‚æœ‰å•é¡Œæˆ–å»ºè­°ï¼Œæ­¡è¿é–‹ Issueï¼

---

**ç”Ÿæˆæ™‚é–“**: 2025-12-01
**ç‰ˆæœ¬**: 1.0.0
