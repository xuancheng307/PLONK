<html lang="zh-Hant"><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PLONK 協定技術報告</title>
    <!-- MathJax Configuration -->
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\\[', '\\]']]
            },
            startup: {
                typeset: true
            }
        };
    </script>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async="" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    
    <!-- Mermaid JS (使用 9.4.3 穩定版以符合 index.html 的表現) -->
    <script src="https://cdn.jsdelivr.net/npm/mermaid@9.4.3/dist/mermaid.min.js"></script><style type="text/css">.CtxtMenu_InfoClose {  top:.2em; right:.2em;}
.CtxtMenu_InfoContent {  overflow:auto; text-align:left; font-size:80%;  padding:.4em .6em; border:1px inset; margin:1em 0px;  max-height:20em; max-width:30em; background-color:#EEEEEE;  white-space:normal;}
.CtxtMenu_Info.CtxtMenu_MousePost {outline:none;}
.CtxtMenu_Info {  position:fixed; left:50%; width:auto; text-align:center;  border:3px outset; padding:1em 2em; background-color:#DDDDDD;  color:black;  cursor:default; font-family:message-box; font-size:120%;  font-style:normal; text-indent:0; text-transform:none;  line-height:normal; letter-spacing:normal; word-spacing:normal;  word-wrap:normal; white-space:nowrap; float:none; z-index:201;  border-radius: 15px;                     /* Opera 10.5 and IE9 */  -webkit-border-radius:15px;               /* Safari and Chrome */  -moz-border-radius:15px;                  /* Firefox */  -khtml-border-radius:15px;                /* Konqueror */  box-shadow:0px 10px 20px #808080;         /* Opera 10.5 and IE9 */  -webkit-box-shadow:0px 10px 20px #808080; /* Safari 3 & Chrome */  -moz-box-shadow:0px 10px 20px #808080;    /* Forefox 3.5 */  -khtml-box-shadow:0px 10px 20px #808080;  /* Konqueror */  filter:progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color="gray", Positive="true"); /* IE */}
</style><style type="text/css">.CtxtMenu_MenuClose {  position:absolute;  cursor:pointer;  display:inline-block;  border:2px solid #AAA;  border-radius:18px;  -webkit-border-radius: 18px;             /* Safari and Chrome */  -moz-border-radius: 18px;                /* Firefox */  -khtml-border-radius: 18px;              /* Konqueror */  font-family: "Courier New", Courier;  font-size:24px;  color:#F0F0F0}
.CtxtMenu_MenuClose span {  display:block; background-color:#AAA; border:1.5px solid;  border-radius:18px;  -webkit-border-radius: 18px;             /* Safari and Chrome */  -moz-border-radius: 18px;                /* Firefox */  -khtml-border-radius: 18px;              /* Konqueror */  line-height:0;  padding:8px 0 6px     /* may need to be browser-specific */}
.CtxtMenu_MenuClose:hover {  color:white!important;  border:2px solid #CCC!important}
.CtxtMenu_MenuClose:hover span {  background-color:#CCC!important}
.CtxtMenu_MenuClose:hover:focus {  outline:none}
</style><style type="text/css">.CtxtMenu_Menu {  position:absolute;  background-color:white;  color:black;  width:auto; padding:5px 0px;  border:1px solid #CCCCCC; margin:0; cursor:default;  font: menu; text-align:left; text-indent:0; text-transform:none;  line-height:normal; letter-spacing:normal; word-spacing:normal;  word-wrap:normal; white-space:nowrap; float:none; z-index:201;  border-radius: 5px;                     /* Opera 10.5 and IE9 */  -webkit-border-radius: 5px;             /* Safari and Chrome */  -moz-border-radius: 5px;                /* Firefox */  -khtml-border-radius: 5px;              /* Konqueror */  box-shadow:0px 10px 20px #808080;         /* Opera 10.5 and IE9 */  -webkit-box-shadow:0px 10px 20px #808080; /* Safari 3 & Chrome */  -moz-box-shadow:0px 10px 20px #808080;    /* Forefox 3.5 */  -khtml-box-shadow:0px 10px 20px #808080;  /* Konqueror */}
.CtxtMenu_MenuItem {  padding: 1px 2em;  background:transparent;}
.CtxtMenu_MenuArrow {  position:absolute; right:.5em; padding-top:.25em; color:#666666;  font-family: null; font-size: .75em}
.CtxtMenu_MenuActive .CtxtMenu_MenuArrow {color:white}
.CtxtMenu_MenuArrow.CtxtMenu_RTL {left:.5em; right:auto}
.CtxtMenu_MenuCheck {  position:absolute; left:.7em;  font-family: null}
.CtxtMenu_MenuCheck.CtxtMenu_RTL { right:.7em; left:auto }
.CtxtMenu_MenuRadioCheck {  position:absolute; left: .7em;}
.CtxtMenu_MenuRadioCheck.CtxtMenu_RTL {  right: .7em; left:auto}
.CtxtMenu_MenuInputBox {  padding-left: 1em; right:.5em; color:#666666;  font-family: null;}
.CtxtMenu_MenuInputBox.CtxtMenu_RTL {  left: .1em;}
.CtxtMenu_MenuComboBox {  left:.1em; padding-bottom:.5em;}
.CtxtMenu_MenuSlider {  left: .1em;}
.CtxtMenu_SliderValue {  position:absolute; right:.1em; padding-top:.25em; color:#333333;  font-size: .75em}
.CtxtMenu_SliderBar {  outline: none; background: #d3d3d3}
.CtxtMenu_MenuLabel {  padding: 1px 2em 3px 1.33em;  font-style:italic}
.CtxtMenu_MenuRule {  border-top: 1px solid #DDDDDD;  margin: 4px 3px;}
.CtxtMenu_MenuDisabled {  color:GrayText}
.CtxtMenu_MenuActive {  background-color: #606872;  color: white;}
.CtxtMenu_MenuDisabled:focus {  background-color: #E8E8E8}
.CtxtMenu_MenuLabel:focus {  background-color: #E8E8E8}
.CtxtMenu_ContextMenu:focus {  outline:none}
.CtxtMenu_ContextMenu .CtxtMenu_MenuItem:focus {  outline:none}
.CtxtMenu_SelectionMenu {  position:relative; float:left;  border-bottom: none; -webkit-box-shadow:none; -webkit-border-radius:0px; }
.CtxtMenu_SelectionItem {  padding-right: 1em;}
.CtxtMenu_Selection {  right: 40%; width:50%; }
.CtxtMenu_SelectionBox {  padding: 0em; max-height:20em; max-width: none;  background-color:#FFFFFF;}
.CtxtMenu_SelectionDivider {  clear: both; border-top: 2px solid #000000;}
.CtxtMenu_Menu .CtxtMenu_MenuClose {  top:-10px; left:-10px}
</style>
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            // 採用 index.html 的初始化邏輯，防止圖表跳動 (FOUC)
            mermaid.initialize({ 
                startOnLoad: false,
                theme: 'neutral',
                fontFamily: '-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif',
                securityLevel: 'loose',
                flowchart: { 
                    curve: 'basis', 
                    htmlLabels: true,
                    useMaxWidth: false // 關鍵：防止圖表被強制縮小
                }
            });

            const mermaidNodes = document.querySelectorAll('.mermaid');
            
            // 手動渲染並淡入顯示
            mermaid.init(undefined, mermaidNodes).then(() => {
                mermaidNodes.forEach(node => {
                    node.style.visibility = 'visible';
                    node.style.opacity = '1';
                });
            }).catch(err => {
                console.error("Mermaid rendering failed:", err);
                mermaidNodes.forEach(node => {
                    node.style.visibility = 'visible';
                    node.style.opacity = '1';
                });
            });
        });
    </script>
    
    <style>
        :root {
            --sidebar-width: 280px;
            --primary-color: #2c3e50;
            --link-color: #3498db;
            --bg-color: #ffffff;
            --text-color: #333333;
            --code-bg: #f8f9fa;
            --border-color: #e9ecef;
        }

        body {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans TC", sans-serif;
            color: var(--text-color);
            display: flex;
            height: 100vh;
            overflow: hidden;
        }

        /* Sidebar Styling */
        .sidebar {
            width: var(--sidebar-width);
            background-color: #f7f9fa;
            border-right: 1px solid var(--border-color);
            padding: 2rem 1rem;
            overflow-y: auto;
            flex-shrink: 0;
            display: flex;
            flex-direction: column;
        }

        .sidebar h1 {
            font-size: 1.5rem;
            margin-bottom: 2rem;
            color: var(--primary-color);
            padding-left: 0.5rem;
        }

        .sidebar nav ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .sidebar nav li {
            margin-bottom: 0.5rem;
        }

        .sidebar nav a {
            text-decoration: none;
            color: #57606a;
            font-size: 0.95rem;
            display: block;
            padding: 0.5rem;
            border-radius: 6px;
            transition: background-color 0.2s;
        }

        .sidebar nav a:hover, .sidebar nav a.active {
            background-color: #e1e4e8;
            color: var(--primary-color);
            font-weight: 500;
        }

        /* Main Content Styling */
        main {
            flex-grow: 1;
            padding: 2rem 4rem;
            overflow-y: auto;
            scroll-behavior: smooth;
        }

        /* 報告標題頁樣式 */
        .title-page {
            min-height: 85vh;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 4rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            background: linear-gradient(to bottom right, #f8f9fa 0%, #e9ecef 100%);
            border-radius: 10px;
            padding: 4rem 2rem;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
        }

        .title-container {
            text-align: center;
            max-width: 800px;
        }

        .report-title {
            font-size: 3rem;
            font-weight: 700;
            color: #2c3e50;
            margin-bottom: 1rem;
            letter-spacing: 1px;
        }

        .report-subtitle {
            font-size: 1.2rem;
            color: #5a6c7d;
            font-weight: 400;
            font-style: italic;
            margin-bottom: 2rem;
        }

        .title-divider {
            width: 120px;
            height: 4px;
            background: linear-gradient(to right, #3498db, #2c3e50);
            margin: 2rem auto;
            border-radius: 2px;
        }

        .report-meta {
            margin: 2rem 0;
        }

        .report-meta p {
            font-size: 1.1rem;
            color: #495057;
            margin: 0.5rem 0;
        }

        .report-author {
            font-weight: 600;
            font-size: 1.3rem !important;
            color: #2c3e50 !important;
        }

        .report-date {
            color: #6c757d !important;
            font-size: 1rem !important;
        }

        .report-abstract-brief {
            margin-top: 3rem;
            padding: 2rem;
            background: white;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
        }

        .report-abstract-brief p {
            margin: 1rem 0;
            font-size: 1.05rem;
            color: #495057;
            line-height: 1.8;
        }

        .report-abstract-brief strong {
            color: #2c3e50;
            font-weight: 600;
        }

        section {
            max-width: 900px;
            margin: 0 auto 4rem auto;
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 2rem;
        }

        section:last-child {
            border-bottom: none;
        }

        h2 {
            font-size: 2rem;
            color: var(--primary-color);
            margin-top: 0;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid var(--border-color);
        }

        h3 {
            font-size: 1.5rem;
            color: #4a5568;
            margin-top: 2rem;
        }

        h4 {
            font-size: 1.2rem;
            color: #4a5568;
            margin-top: 1.5rem;
        }

        p {
            line-height: 1.7;
            margin-bottom: 1.2rem;
            text-align: justify;
        }

        ul, ol {
            line-height: 1.7;
            margin-bottom: 1.2rem;
            padding-left: 2rem;
        }

        li {
            margin-bottom: 0.5rem;
        }

        strong {
            color: #2c3e50;
            font-weight: 700;
        }

        code {
            font-family: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, Courier, monospace;
            background-color: var(--code-bg);
            padding: 0.2rem 0.4rem;
            border-radius: 4px;
            font-size: 0.9em;
            color: #d63384;
        }

        .math {
            font-size: 1.05em;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 1.5rem 0;
        }

        th, td {
            border: 1px solid var(--border-color);
            padding: 0.75rem;
            text-align: left;
        }

        th {
            background-color: var(--code-bg);
            font-weight: 600;
        }
        
        /* Author Info */
        .author-info {
            margin-top: -1.5rem;
            margin-bottom: 2rem;
            font-size: 1.1rem;
            color: #555;
            font-weight: 500;
        }

        .btn {
            display: inline-block;
            padding: 0.5rem 1rem;
            background-color: white;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            color: var(--link-color);
            text-decoration: none;
            transition: all 0.2s;
        }

        .btn:hover {
            background-color: var(--link-color);
            color: white;
            border-color: var(--link-color);
        }
        
        /* Chart Container Optimization (from index.html) */
        .chart-container {
            display: flex;
            justify-content: center;
            margin: 2rem 0;
            width: 100%;
            overflow-x: auto;
            padding-bottom: 10px;
        }
        
        /* Mermaid Stability Styles */
        .mermaid {
            visibility: hidden; 
            opacity: 0;
            transition: opacity 0.3s ease-in;
            display: block;
            margin: 0 auto;
            padding: 1rem;
            background: #ffffff;
            font-size: 14px;
        }
        
        .mermaid svg {
            max-width: none !important;
            height: auto;
            min-width: 720px;
        }

        .mermaid text {
            fill: #222 !important;
            font-size: 14px !important;
        }

        @media (max-width: 768px) {
            body {
                flex-direction: column;
                overflow: auto;
            }
            .sidebar {
                width: 100%;
                border-right: none;
                border-bottom: 1px solid var(--border-color);
                height: auto;
            }
            main {
                padding: 1.5rem;
            }
            .chart-container {
                justify-content: flex-start;
            }
        }
    </style>
<style id="MJX-CHTML-styles">
mjx-container[jax="CHTML"] {
  line-height: 0;
}

mjx-container [space="1"] {
  margin-left: .111em;
}

mjx-container [space="2"] {
  margin-left: .167em;
}

mjx-container [space="3"] {
  margin-left: .222em;
}

mjx-container [space="4"] {
  margin-left: .278em;
}

mjx-container [space="5"] {
  margin-left: .333em;
}

mjx-container [rspace="1"] {
  margin-right: .111em;
}

mjx-container [rspace="2"] {
  margin-right: .167em;
}

mjx-container [rspace="3"] {
  margin-right: .222em;
}

mjx-container [rspace="4"] {
  margin-right: .278em;
}

mjx-container [rspace="5"] {
  margin-right: .333em;
}

mjx-container [size="s"] {
  font-size: 70.7%;
}

mjx-container [size="ss"] {
  font-size: 50%;
}

mjx-container [size="Tn"] {
  font-size: 60%;
}

mjx-container [size="sm"] {
  font-size: 85%;
}

mjx-container [size="lg"] {
  font-size: 120%;
}

mjx-container [size="Lg"] {
  font-size: 144%;
}

mjx-container [size="LG"] {
  font-size: 173%;
}

mjx-container [size="hg"] {
  font-size: 207%;
}

mjx-container [size="HG"] {
  font-size: 249%;
}

mjx-container [width="full"] {
  width: 100%;
}

mjx-box {
  display: inline-block;
}

mjx-block {
  display: block;
}

mjx-itable {
  display: inline-table;
}

mjx-row {
  display: table-row;
}

mjx-row > * {
  display: table-cell;
}

mjx-mtext {
  display: inline-block;
  text-align: left;
}

mjx-mstyle {
  display: inline-block;
}

mjx-merror {
  display: inline-block;
  color: red;
  background-color: yellow;
}

mjx-mphantom {
  visibility: hidden;
}

_::-webkit-full-page-media, _:future, :root mjx-container {
  will-change: opacity;
}

mjx-assistive-mml {
  position: absolute !important;
  top: 0px;
  left: 0px;
  clip: rect(1px, 1px, 1px, 1px);
  padding: 1px 0px 0px 0px !important;
  border: 0px !important;
  display: block !important;
  width: auto !important;
  overflow: hidden !important;
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -khtml-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

mjx-assistive-mml[display="block"] {
  width: 100% !important;
}

mjx-math {
  display: inline-block;
  text-align: left;
  line-height: 0;
  text-indent: 0;
  font-style: normal;
  font-weight: normal;
  font-size: 100%;
  font-size-adjust: none;
  letter-spacing: normal;
  border-collapse: collapse;
  word-wrap: normal;
  word-spacing: normal;
  white-space: nowrap;
  direction: ltr;
  padding: 1px 0;
}

mjx-container[jax="CHTML"][display="true"] {
  display: block;
  text-align: center;
  margin: 1em 0;
}

mjx-container[jax="CHTML"][display="true"][width="full"] {
  display: flex;
}

mjx-container[jax="CHTML"][display="true"] mjx-math {
  padding: 0;
}

mjx-container[jax="CHTML"][justify="left"] {
  text-align: left;
}

mjx-container[jax="CHTML"][justify="right"] {
  text-align: right;
}

mjx-mo {
  display: inline-block;
  text-align: left;
}

mjx-stretchy-h {
  display: inline-table;
  width: 100%;
}

mjx-stretchy-h > * {
  display: table-cell;
  width: 0;
}

mjx-stretchy-h > * > mjx-c {
  display: inline-block;
  transform: scalex(1.0000001);
}

mjx-stretchy-h > * > mjx-c::before {
  display: inline-block;
  width: initial;
}

mjx-stretchy-h > mjx-ext {
  /* IE */ overflow: hidden;
  /* others */ overflow: clip visible;
  width: 100%;
}

mjx-stretchy-h > mjx-ext > mjx-c::before {
  transform: scalex(500);
}

mjx-stretchy-h > mjx-ext > mjx-c {
  width: 0;
}

mjx-stretchy-h > mjx-beg > mjx-c {
  margin-right: -.1em;
}

mjx-stretchy-h > mjx-end > mjx-c {
  margin-left: -.1em;
}

mjx-stretchy-v {
  display: inline-block;
}

mjx-stretchy-v > * {
  display: block;
}

mjx-stretchy-v > mjx-beg {
  height: 0;
}

mjx-stretchy-v > mjx-end > mjx-c {
  display: block;
}

mjx-stretchy-v > * > mjx-c {
  transform: scaley(1.0000001);
  transform-origin: left center;
  overflow: hidden;
}

mjx-stretchy-v > mjx-ext {
  display: block;
  height: 100%;
  box-sizing: border-box;
  border: 0px solid transparent;
  /* IE */ overflow: hidden;
  /* others */ overflow: visible clip;
}

mjx-stretchy-v > mjx-ext > mjx-c::before {
  width: initial;
  box-sizing: border-box;
}

mjx-stretchy-v > mjx-ext > mjx-c {
  transform: scaleY(500) translateY(.075em);
  overflow: visible;
}

mjx-mark {
  display: inline-block;
  height: 0px;
}

mjx-c {
  display: inline-block;
}

mjx-utext {
  display: inline-block;
  padding: .75em 0 .2em 0;
}

mjx-msup {
  display: inline-block;
  text-align: left;
}

mjx-mi {
  display: inline-block;
  text-align: left;
}

mjx-msub {
  display: inline-block;
  text-align: left;
}

mjx-mn {
  display: inline-block;
  text-align: left;
}

mjx-TeXAtom {
  display: inline-block;
  text-align: left;
}

mjx-mover {
  display: inline-block;
  text-align: left;
}

mjx-mover:not([limits="false"]) {
  padding-top: .1em;
}

mjx-mover:not([limits="false"]) > * {
  display: block;
  text-align: left;
}

mjx-msubsup {
  display: inline-block;
  text-align: left;
}

mjx-script {
  display: inline-block;
  padding-right: .05em;
  padding-left: .033em;
}

mjx-script > mjx-spacer {
  display: block;
}

mjx-mfrac {
  display: inline-block;
  text-align: left;
}

mjx-frac {
  display: inline-block;
  vertical-align: 0.17em;
  padding: 0 .22em;
}

mjx-frac[type="d"] {
  vertical-align: .04em;
}

mjx-frac[delims] {
  padding: 0 .1em;
}

mjx-frac[atop] {
  padding: 0 .12em;
}

mjx-frac[atop][delims] {
  padding: 0;
}

mjx-dtable {
  display: inline-table;
  width: 100%;
}

mjx-dtable > * {
  font-size: 2000%;
}

mjx-dbox {
  display: block;
  font-size: 5%;
}

mjx-num {
  display: block;
  text-align: center;
}

mjx-den {
  display: block;
  text-align: center;
}

mjx-mfrac[bevelled] > mjx-num {
  display: inline-block;
}

mjx-mfrac[bevelled] > mjx-den {
  display: inline-block;
}

mjx-den[align="right"], mjx-num[align="right"] {
  text-align: right;
}

mjx-den[align="left"], mjx-num[align="left"] {
  text-align: left;
}

mjx-nstrut {
  display: inline-block;
  height: .054em;
  width: 0;
  vertical-align: -.054em;
}

mjx-nstrut[type="d"] {
  height: .217em;
  vertical-align: -.217em;
}

mjx-dstrut {
  display: inline-block;
  height: .505em;
  width: 0;
}

mjx-dstrut[type="d"] {
  height: .726em;
}

mjx-line {
  display: block;
  box-sizing: border-box;
  min-height: 1px;
  height: .06em;
  border-top: .06em solid;
  margin: .06em -.1em;
  overflow: hidden;
}

mjx-line[type="d"] {
  margin: .18em -.1em;
}

mjx-mrow {
  display: inline-block;
  text-align: left;
}

mjx-munderover {
  display: inline-block;
  text-align: left;
}

mjx-munderover:not([limits="false"]) {
  padding-top: .1em;
}

mjx-munderover:not([limits="false"]) > * {
  display: block;
}

mjx-mspace {
  display: inline-block;
  text-align: left;
}

mjx-mtable {
  display: inline-block;
  text-align: center;
  vertical-align: .25em;
  position: relative;
  box-sizing: border-box;
  border-spacing: 0;
  border-collapse: collapse;
}

mjx-mstyle[size="s"] mjx-mtable {
  vertical-align: .354em;
}

mjx-labels {
  position: absolute;
  left: 0;
  top: 0;
}

mjx-table {
  display: inline-block;
  vertical-align: -.5ex;
  box-sizing: border-box;
}

mjx-table > mjx-itable {
  vertical-align: middle;
  text-align: left;
  box-sizing: border-box;
}

mjx-labels > mjx-itable {
  position: absolute;
  top: 0;
}

mjx-mtable[justify="left"] {
  text-align: left;
}

mjx-mtable[justify="right"] {
  text-align: right;
}

mjx-mtable[justify="left"][side="left"] {
  padding-right: 0 ! important;
}

mjx-mtable[justify="left"][side="right"] {
  padding-left: 0 ! important;
}

mjx-mtable[justify="right"][side="left"] {
  padding-right: 0 ! important;
}

mjx-mtable[justify="right"][side="right"] {
  padding-left: 0 ! important;
}

mjx-mtable[align] {
  vertical-align: baseline;
}

mjx-mtable[align="top"] > mjx-table {
  vertical-align: top;
}

mjx-mtable[align="bottom"] > mjx-table {
  vertical-align: bottom;
}

mjx-mtable[side="right"] mjx-labels {
  min-width: 100%;
}

mjx-mtr {
  display: table-row;
  text-align: left;
}

mjx-mtr[rowalign="top"] > mjx-mtd {
  vertical-align: top;
}

mjx-mtr[rowalign="center"] > mjx-mtd {
  vertical-align: middle;
}

mjx-mtr[rowalign="bottom"] > mjx-mtd {
  vertical-align: bottom;
}

mjx-mtr[rowalign="baseline"] > mjx-mtd {
  vertical-align: baseline;
}

mjx-mtr[rowalign="axis"] > mjx-mtd {
  vertical-align: .25em;
}

mjx-mtd {
  display: table-cell;
  text-align: center;
  padding: .215em .4em;
}

mjx-mtd:first-child {
  padding-left: 0;
}

mjx-mtd:last-child {
  padding-right: 0;
}

mjx-mtable > * > mjx-itable > *:first-child > mjx-mtd {
  padding-top: 0;
}

mjx-mtable > * > mjx-itable > *:last-child > mjx-mtd {
  padding-bottom: 0;
}

mjx-tstrut {
  display: inline-block;
  height: 1em;
  vertical-align: -.25em;
}

mjx-labels[align="left"] > mjx-mtr > mjx-mtd {
  text-align: left;
}

mjx-labels[align="right"] > mjx-mtr > mjx-mtd {
  text-align: right;
}

mjx-mtd[extra] {
  padding: 0;
}

mjx-mtd[rowalign="top"] {
  vertical-align: top;
}

mjx-mtd[rowalign="center"] {
  vertical-align: middle;
}

mjx-mtd[rowalign="bottom"] {
  vertical-align: bottom;
}

mjx-mtd[rowalign="baseline"] {
  vertical-align: baseline;
}

mjx-mtd[rowalign="axis"] {
  vertical-align: .25em;
}

mjx-munder {
  display: inline-block;
  text-align: left;
}

mjx-over {
  text-align: left;
}

mjx-munder:not([limits="false"]) {
  display: inline-table;
}

mjx-munder > mjx-row {
  text-align: left;
}

mjx-under {
  padding-bottom: .1em;
}

mjx-c::before {
  display: block;
  width: 0;
}

.MJX-TEX {
  font-family: MJXZERO, MJXTEX;
}

.TEX-B {
  font-family: MJXZERO, MJXTEX-B;
}

.TEX-I {
  font-family: MJXZERO, MJXTEX-I;
}

.TEX-MI {
  font-family: MJXZERO, MJXTEX-MI;
}

.TEX-BI {
  font-family: MJXZERO, MJXTEX-BI;
}

.TEX-S1 {
  font-family: MJXZERO, MJXTEX-S1;
}

.TEX-S2 {
  font-family: MJXZERO, MJXTEX-S2;
}

.TEX-S3 {
  font-family: MJXZERO, MJXTEX-S3;
}

.TEX-S4 {
  font-family: MJXZERO, MJXTEX-S4;
}

.TEX-A {
  font-family: MJXZERO, MJXTEX-A;
}

.TEX-C {
  font-family: MJXZERO, MJXTEX-C;
}

.TEX-CB {
  font-family: MJXZERO, MJXTEX-CB;
}

.TEX-FR {
  font-family: MJXZERO, MJXTEX-FR;
}

.TEX-FRB {
  font-family: MJXZERO, MJXTEX-FRB;
}

.TEX-SS {
  font-family: MJXZERO, MJXTEX-SS;
}

.TEX-SSB {
  font-family: MJXZERO, MJXTEX-SSB;
}

.TEX-SSI {
  font-family: MJXZERO, MJXTEX-SSI;
}

.TEX-SC {
  font-family: MJXZERO, MJXTEX-SC;
}

.TEX-T {
  font-family: MJXZERO, MJXTEX-T;
}

.TEX-V {
  font-family: MJXZERO, MJXTEX-V;
}

.TEX-VB {
  font-family: MJXZERO, MJXTEX-VB;
}

mjx-stretchy-v mjx-c, mjx-stretchy-h mjx-c {
  font-family: MJXZERO, MJXTEX-S1, MJXTEX-S4, MJXTEX, MJXTEX-A ! important;
}

@font-face /* 0 */ {
  font-family: MJXZERO;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Zero.woff") format("woff");
}

@font-face /* 1 */ {
  font-family: MJXTEX;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Main-Regular.woff") format("woff");
}

@font-face /* 2 */ {
  font-family: MJXTEX-B;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Main-Bold.woff") format("woff");
}

@font-face /* 3 */ {
  font-family: MJXTEX-I;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Math-Italic.woff") format("woff");
}

@font-face /* 4 */ {
  font-family: MJXTEX-MI;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Main-Italic.woff") format("woff");
}

@font-face /* 5 */ {
  font-family: MJXTEX-BI;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Math-BoldItalic.woff") format("woff");
}

@font-face /* 6 */ {
  font-family: MJXTEX-S1;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Size1-Regular.woff") format("woff");
}

@font-face /* 7 */ {
  font-family: MJXTEX-S2;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Size2-Regular.woff") format("woff");
}

@font-face /* 8 */ {
  font-family: MJXTEX-S3;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Size3-Regular.woff") format("woff");
}

@font-face /* 9 */ {
  font-family: MJXTEX-S4;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Size4-Regular.woff") format("woff");
}

@font-face /* 10 */ {
  font-family: MJXTEX-A;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_AMS-Regular.woff") format("woff");
}

@font-face /* 11 */ {
  font-family: MJXTEX-C;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Calligraphic-Regular.woff") format("woff");
}

@font-face /* 12 */ {
  font-family: MJXTEX-CB;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Calligraphic-Bold.woff") format("woff");
}

@font-face /* 13 */ {
  font-family: MJXTEX-FR;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Fraktur-Regular.woff") format("woff");
}

@font-face /* 14 */ {
  font-family: MJXTEX-FRB;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Fraktur-Bold.woff") format("woff");
}

@font-face /* 15 */ {
  font-family: MJXTEX-SS;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_SansSerif-Regular.woff") format("woff");
}

@font-face /* 16 */ {
  font-family: MJXTEX-SSB;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_SansSerif-Bold.woff") format("woff");
}

@font-face /* 17 */ {
  font-family: MJXTEX-SSI;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_SansSerif-Italic.woff") format("woff");
}

@font-face /* 18 */ {
  font-family: MJXTEX-SC;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Script-Regular.woff") format("woff");
}

@font-face /* 19 */ {
  font-family: MJXTEX-T;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Typewriter-Regular.woff") format("woff");
}

@font-face /* 20 */ {
  font-family: MJXTEX-V;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Vector-Regular.woff") format("woff");
}

@font-face /* 21 */ {
  font-family: MJXTEX-VB;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Vector-Bold.woff") format("woff");
}

mjx-c.mjx-c7B::before {
  padding: 0.75em 0.5em 0.25em 0;
  content: "{";
}

mjx-c.mjx-c5B::before {
  padding: 0.75em 0.278em 0.25em 0;
  content: "[";
}

mjx-c.mjx-c1D465.TEX-I::before {
  padding: 0.442em 0.572em 0.011em 0;
  content: "x";
}

mjx-c.mjx-c1D456.TEX-I::before {
  padding: 0.661em 0.345em 0.011em 0;
  content: "i";
}

mjx-c.mjx-c5D::before {
  padding: 0.75em 0.278em 0.25em 0;
  content: "]";
}

mjx-c.mjx-c31::before {
  padding: 0.666em 0.5em 0 0;
  content: "1";
}

mjx-c.mjx-c2C::before {
  padding: 0.121em 0.278em 0.194em 0;
  content: ",";
}

mjx-c.mjx-c32::before {
  padding: 0.666em 0.5em 0 0;
  content: "2";
}

mjx-c.mjx-c7D::before {
  padding: 0.75em 0.5em 0.25em 0;
  content: "}";
}

mjx-c.mjx-c43.TEX-C::before {
  padding: 0.705em 0.527em 0.025em 0;
  content: "C";
}

mjx-c.mjx-c1D70B.TEX-I::before {
  padding: 0.431em 0.57em 0.011em 0;
  content: "\3C0";
}

mjx-c.mjx-c49.TEX-C::before {
  padding: 0.683em 0.642em 0 0;
  content: "I";
}

mjx-c.mjx-c41.TEX-C::before {
  padding: 0.728em 0.819em 0.05em 0;
  content: "A";
}

mjx-c.mjx-c1D44C.TEX-I::before {
  padding: 0.683em 0.763em 0 0;
  content: "Y";
}

mjx-c.mjx-c2192::before {
  padding: 0.511em 1em 0.011em 0;
  content: "\2192";
}

mjx-c.mjx-c1D5CC.TEX-SS::before {
  padding: 0.46em 0.383em 0.01em 0;
  content: "s";
}

mjx-c.mjx-c1D5CB.TEX-SS::before {
  padding: 0.455em 0.342em 0 0;
  content: "r";
}

mjx-c.mjx-c1D45E.TEX-I::before {
  padding: 0.442em 0.46em 0.194em 0;
  content: "q";
}

mjx-c.mjx-c1D43F.TEX-I::before {
  padding: 0.683em 0.681em 0 0;
  content: "L";
}

mjx-c.mjx-c1D445.TEX-I::before {
  padding: 0.683em 0.759em 0.021em 0;
  content: "R";
}

mjx-c.mjx-c2026::before {
  padding: 0.12em 1.172em 0 0;
  content: "\2026";
}

mjx-c.mjx-c1D446.TEX-I::before {
  padding: 0.705em 0.645em 0.022em 0;
  content: "S";
}

mjx-c.mjx-c1D70E.TEX-I::before {
  padding: 0.431em 0.571em 0.011em 0;
  content: "\3C3";
}

mjx-c.mjx-c33::before {
  padding: 0.665em 0.5em 0.022em 0;
  content: "3";
}

mjx-c.mjx-c1D44E.TEX-I::before {
  padding: 0.441em 0.529em 0.01em 0;
  content: "a";
}

mjx-c.mjx-c1D44F.TEX-I::before {
  padding: 0.694em 0.429em 0.011em 0;
  content: "b";
}

mjx-c.mjx-c1D450.TEX-I::before {
  padding: 0.442em 0.433em 0.011em 0;
  content: "c";
}

mjx-c.mjx-c1D467.TEX-I::before {
  padding: 0.442em 0.465em 0.011em 0;
  content: "z";
}

mjx-c.mjx-c1D461.TEX-I::before {
  padding: 0.626em 0.361em 0.011em 0;
  content: "t";
}

mjx-c.mjx-c1D459.TEX-I::before {
  padding: 0.694em 0.298em 0.011em 0;
  content: "l";
}

mjx-c.mjx-c1D45C.TEX-I::before {
  padding: 0.441em 0.485em 0.011em 0;
  content: "o";
}

mjx-c.mjx-c1D45A.TEX-I::before {
  padding: 0.442em 0.878em 0.011em 0;
  content: "m";
}

mjx-c.mjx-c1D451.TEX-I::before {
  padding: 0.694em 0.52em 0.01em 0;
  content: "d";
}

mjx-c.mjx-c210E.TEX-I::before {
  padding: 0.694em 0.576em 0.011em 0;
  content: "h";
}

mjx-c.mjx-cAF::before {
  padding: 0.59em 0.5em 0 0;
  content: "\AF";
}

mjx-c.mjx-c1D44A.TEX-I::before {
  padding: 0.683em 1.048em 0.022em 0;
  content: "W";
}

mjx-c.mjx-c1D714.TEX-I::before {
  padding: 0.443em 0.622em 0.011em 0;
  content: "\3C9";
}

mjx-c.mjx-c2208::before {
  padding: 0.54em 0.667em 0.04em 0;
  content: "\2208";
}

mjx-c.mjx-c1D53D.TEX-A::before {
  padding: 0.683em 0.611em 0 0;
  content: "F";
}

mjx-c.mjx-c2212::before {
  padding: 0.583em 0.778em 0.082em 0;
  content: "\2212";
}

mjx-c.mjx-c1D442.TEX-I::before {
  padding: 0.704em 0.763em 0.022em 0;
  content: "O";
}

mjx-c.mjx-c1D440.TEX-I::before {
  padding: 0.683em 1.051em 0 0;
  content: "M";
}

mjx-c.mjx-c1D436.TEX-I::before {
  padding: 0.705em 0.76em 0.022em 0;
  content: "C";
}

mjx-c.mjx-c1D458.TEX-I::before {
  padding: 0.694em 0.521em 0.011em 0;
  content: "k";
}

mjx-c.mjx-c2032::before {
  padding: 0.56em 0.275em 0 0;
  content: "\2032";
}

mjx-c.mjx-c56::before {
  padding: 0.683em 0.75em 0.022em 0;
  content: "V";
}

mjx-c.mjx-c4B::before {
  padding: 0.683em 0.778em 0 0;
  content: "K";
}

mjx-c.mjx-c1D452.TEX-I::before {
  padding: 0.442em 0.466em 0.011em 0;
  content: "e";
}

mjx-c.mjx-c3A::before {
  padding: 0.43em 0.278em 0 0;
  content: ":";
}

mjx-c.mjx-c1D53E.TEX-A::before {
  padding: 0.702em 0.778em 0.019em 0;
  content: "G";
}

mjx-c.mjx-cD7::before {
  padding: 0.491em 0.778em 0 0;
  content: "\D7";
}

mjx-c.mjx-c1D447.TEX-I::before {
  padding: 0.677em 0.704em 0 0;
  content: "T";
}

mjx-c.mjx-c1D45D.TEX-I::before {
  padding: 0.442em 0.503em 0.194em 0;
  content: "p";
}

mjx-c.mjx-c1D45B.TEX-I::before {
  padding: 0.442em 0.6em 0.011em 0;
  content: "n";
}

mjx-c.mjx-c1D43B.TEX-I::before {
  padding: 0.683em 0.888em 0 0;
  content: "H";
}

mjx-c.mjx-c3D::before {
  padding: 0.583em 0.778em 0.082em 0;
  content: "=";
}

mjx-c.mjx-c2282::before {
  padding: 0.54em 0.778em 0.04em 0;
  content: "\2282";
}

mjx-c.mjx-c2217::before {
  padding: 0.465em 0.5em 0 0;
  content: "\2217";
}

mjx-c.mjx-c28::before {
  padding: 0.75em 0.389em 0.25em 0;
  content: "(";
}

mjx-c.mjx-c1D44B.TEX-I::before {
  padding: 0.683em 0.852em 0 0;
  content: "X";
}

mjx-c.mjx-c29::before {
  padding: 0.75em 0.389em 0.25em 0;
  content: ")";
}

mjx-c.mjx-c1D457.TEX-I::before {
  padding: 0.661em 0.412em 0.204em 0;
  content: "j";
}

mjx-c.mjx-c1D6FF.TEX-I::before {
  padding: 0.717em 0.444em 0.01em 0;
  content: "\3B4";
}

mjx-c.mjx-c1D44D.TEX-I::before {
  padding: 0.683em 0.723em 0 0;
  content: "Z";
}

mjx-c.mjx-c1D453.TEX-I::before {
  padding: 0.705em 0.55em 0.205em 0;
  content: "f";
}

mjx-c.mjx-c22C5::before {
  padding: 0.31em 0.278em 0 0;
  content: "\22C5";
}

mjx-c.mjx-c1D43A.TEX-I::before {
  padding: 0.705em 0.786em 0.022em 0;
  content: "G";
}

mjx-c.mjx-c1D466.TEX-I::before {
  padding: 0.442em 0.49em 0.205em 0;
  content: "y";
}

mjx-c.mjx-c1D443.TEX-I::before {
  padding: 0.683em 0.751em 0 0;
  content: "P";
}

mjx-c.mjx-c30::before {
  padding: 0.666em 0.5em 0.022em 0;
  content: "0";
}

mjx-c.mjx-c1D6FD.TEX-I::before {
  padding: 0.705em 0.566em 0.194em 0;
  content: "\3B2";
}

mjx-c.mjx-c1D6FE.TEX-I::before {
  padding: 0.441em 0.543em 0.216em 0;
  content: "\3B3";
}

mjx-c.mjx-c220F.TEX-S2::before {
  padding: 0.95em 1.278em 0.45em 0;
  content: "\220F";
}

mjx-c.mjx-c2B::before {
  padding: 0.583em 0.778em 0.082em 0;
  content: "+";
}

mjx-c.mjx-c53::before {
  padding: 0.705em 0.556em 0.022em 0;
  content: "S";
}

mjx-c.mjx-c49::before {
  padding: 0.683em 0.361em 0 0;
  content: "I";
}

mjx-c.mjx-c44::before {
  padding: 0.683em 0.764em 0 0;
  content: "D";
}

mjx-c.mjx-c1D454.TEX-I::before {
  padding: 0.442em 0.477em 0.205em 0;
  content: "g";
}

mjx-c.mjx-c1D43C.TEX-I::before {
  padding: 0.683em 0.504em 0 0;
  content: "I";
}

mjx-c.mjx-c1D437.TEX-I::before {
  padding: 0.683em 0.828em 0 0;
  content: "D";
}

mjx-c.mjx-c1D70F.TEX-I::before {
  padding: 0.431em 0.517em 0.013em 0;
  content: "\3C4";
}

mjx-c.mjx-c2265::before {
  padding: 0.636em 0.778em 0.138em 0;
  content: "\2265";
}

mjx-c.mjx-c35::before {
  padding: 0.666em 0.5em 0.022em 0;
  content: "5";
}

mjx-c.mjx-c1D701.TEX-I::before {
  padding: 0.704em 0.471em 0.204em 0;
  content: "\3B6";
}

mjx-c.mjx-c1D45F.TEX-I::before {
  padding: 0.442em 0.451em 0.011em 0;
  content: "r";
}

mjx-c.mjx-c37::before {
  padding: 0.676em 0.5em 0.022em 0;
  content: "7";
}

mjx-c.mjx-c38::before {
  padding: 0.666em 0.5em 0.022em 0;
  content: "8";
}

mjx-c.mjx-c39::before {
  padding: 0.666em 0.5em 0.022em 0;
  content: "9";
}

mjx-c.mjx-c72::before {
  padding: 0.442em 0.392em 0 0;
  content: "r";
}

mjx-c.mjx-c61::before {
  padding: 0.448em 0.5em 0.011em 0;
  content: "a";
}

mjx-c.mjx-c77::before {
  padding: 0.431em 0.722em 0.011em 0;
  content: "w";
}

mjx-c.mjx-c64::before {
  padding: 0.694em 0.556em 0.011em 0;
  content: "d";
}

mjx-c.mjx-c65::before {
  padding: 0.448em 0.444em 0.011em 0;
  content: "e";
}

mjx-c.mjx-c67::before {
  padding: 0.453em 0.5em 0.206em 0;
  content: "g";
}

mjx-c.mjx-c2061::before {
  padding: 0 0 0 0;
  content: "";
}

mjx-c.mjx-c1D6FC.TEX-I::before {
  padding: 0.442em 0.64em 0.011em 0;
  content: "\3B1";
}

mjx-c.mjx-c28.TEX-S2::before {
  padding: 1.15em 0.597em 0.649em 0;
  content: "(";
}

mjx-c.mjx-c47::before {
  padding: 0.705em 0.785em 0.022em 0;
  content: "G";
}

mjx-c.mjx-c74::before {
  padding: 0.615em 0.389em 0.01em 0;
  content: "t";
}

mjx-c.mjx-c50::before {
  padding: 0.683em 0.681em 0 0;
  content: "P";
}

mjx-c.mjx-c6D::before {
  padding: 0.442em 0.833em 0 0;
  content: "m";
}

mjx-c.mjx-c4C::before {
  padding: 0.683em 0.625em 0 0;
  content: "L";
}

mjx-c.mjx-c29.TEX-S2::before {
  padding: 1.15em 0.597em 0.649em 0;
  content: ")";
}

mjx-c.mjx-c2264::before {
  padding: 0.636em 0.778em 0.138em 0;
  content: "\2264";
}

mjx-c.mjx-cA0::before {
  padding: 0 0.25em 0 0;
  content: "\A0";
}

mjx-c.mjx-c1D463.TEX-I::before {
  padding: 0.443em 0.485em 0.011em 0;
  content: "v";
}

mjx-c.mjx-c28.TEX-S1::before {
  padding: 0.85em 0.458em 0.349em 0;
  content: "(";
}

mjx-c.mjx-c29.TEX-S1::before {
  padding: 0.85em 0.458em 0.349em 0;
  content: ")";
}

mjx-c.mjx-c2211.TEX-S1::before {
  padding: 0.75em 1.056em 0.25em 0;
  content: "\2211";
}

mjx-c.mjx-c2113::before {
  padding: 0.705em 0.417em 0.02em 0;
  content: "\2113";
}

mjx-c.mjx-c226A::before {
  padding: 0.568em 1em 0.067em 0;
  content: "\226A";
}

mjx-c.mjx-c1D439.TEX-I::before {
  padding: 0.68em 0.749em 0 0;
  content: "F";
}

mjx-c.mjx-c1D438.TEX-I::before {
  padding: 0.68em 0.764em 0 0;
  content: "E";
}

mjx-c.mjx-c1D462.TEX-I::before {
  padding: 0.442em 0.572em 0.011em 0;
  content: "u";
}

mjx-c.mjx-c3F::before {
  padding: 0.705em 0.472em 0 0;
  content: "?";
}

mjx-c.mjx-c1D537.TEX-FR::before {
  padding: 0.471em 0.391em 0.214em 0;
  content: "z";
}
</style></head>
<body>

<aside class="sidebar">
    <h1>PLONK 技術報告</h1>
    <nav>
        <ul>
            <li><a href="#abstract">0. 摘要 (Abstract)</a></li>
            <li><a href="#intro">1. 前言與動機 (Introduction)</a></li>
            <li><a href="#system-roles">2. 系統與角色模型 (System Roles)</a></li>
            <li><a href="#overview">3. 整體流程概觀 (Overview)</a></li>
            <li><a href="#math">4. 數學與建模基礎 (Math Foundation)</a></li>
            <li><a href="#permutation">5. Permutation Argument</a></li>
            <li><a href="#setup">6. 通用初始設定 (Setup)</a></li>
            <li><a href="#preprocessing">7. 電路預處理 (Preprocessing)</a></li>
            <li><a href="#proving">8. Prover 流程 (Proving)</a></li>
            <li><a href="#verification">9. Verifier 流程 (Verification)</a></li>
            <li><a href="#performance">10. 效能與實作 (Performance)</a></li>
            <li><a href="#security">11. 安全性與擴充 (Security)</a></li>
            <li><a href="#conclusion">12. 結論 (Conclusion)</a></li>
        </ul>
    </nav>
</aside>

<main>

    <!-- 報告標題頁 -->
    <div class="title-page">
        <div class="title-container">
            <h1 class="report-title">PLONK 協定技術報告</h1>
            <h2 class="report-subtitle">Permutations over Lagrange-bases for Oecumenical Noninteractive arguments of Knowledge</h2>
            <div class="title-divider"></div>
            <div class="report-meta">
                <p class="report-author">報告人：高璿程</p>
                <p class="report-date">最後更新：2025 年 12 月</p>
            </div>
            <div class="report-abstract-brief">
                <p><strong>研究主題：</strong>通用且可更新的零知識證明系統</p>
                <p><strong>核心技術：</strong>基於 KZG 多項式承諾的 zk-SNARK 協定</p>
                <p><strong>主要優勢：</strong>Universal Setup · Succinct Verification · Fast Prover</p>
            </div>
        </div>
    </div>

    <section id="abstract">
        <h2>0. 摘要 (Abstract)</h2>
        <p>
            零知識簡潔非互動式知識論證（zk-SNARK）在區塊鏈隱私與擴展性應用中扮演關鍵角色。本報告分析的 PLONK 協定旨在解決現有方案的效能瓶頸，其核心要點如下：
        </p>
        <ul>
            <li><strong>問題背景</strong>：早期的 Groth16 依賴針對特定電路的 trusted setup，限制了部署靈活性；而 Sonic 雖然引入了通用參考字串（Universal SRS），但其證明者（Prover）計算成本過高，難以滿足實際需求。</li>
            <li><strong>PLONK 的核心貢獻</strong>：
                <ul>
                    <li>採用基於<strong>拉格朗日基底 (Lagrange bases)</strong> 與<strong>乘法子群</strong>的算術化方案。</li>
                    <li>引入新穎的<strong>置換論證 (Permutation Argument)</strong> 來簡化電路中線路連接 (wiring) 的檢查。</li>
                    <li>相較於 Sonic，顯著降低了 Prover 的群指數運算次數，將證明生成速度提升了數倍至一個數量級。</li>
                </ul>
            </li>
            <li><strong>報告主軸</strong>：本報告將從「系統角色」與「技術流程」的角度解構 PLONK，詳細探討多項式承諾方案、Permutation Check 機制、Prover 的五輪互動，以及 Verifier 如何透過常數次配對運算完成高效驗證。</li>
        </ul>
    </section>

    <section id="intro">
        <h2>1. 前言與動機 (Introduction)</h2>
        
        <h3>1.1 背景：zk-SNARK 與通用 SRS</h3>
        <p>
            zk-SNARK 技術允許證明者向驗證者證明計算正確性而不洩露私密輸入。一個理想的「完全簡潔 (fully succinct)」SNARK 應滿足以下四個條件：
        </p>
        <ol>
            <li><strong>SRS 生成時間短且安全</strong>。</li>
            <li><strong>Prover 計算效率高</strong>（運算量與電路大小呈線性或準線性關係）。</li>
            <li><strong>Proof 長度極短</strong>（如常數大小或對數級）。</li>
            <li><strong>Verifier 驗證時間極短</strong>（常數時間或對數時間）。</li>
        </ol>
        <p>
            早期的 Groth16 方案雖在驗證速度與證明大小上表現優異，但其 <strong>SRS 綁定特定電路</strong>，一旦電路邏輯修改，就需要重新進行多方計算儀式（MPC setup），這極大限制了靈活性。
        </p>

        <h3>1.2 Sonic 的限制與 PLONK 的目標</h3>
        <p>
            Sonic 協定是首個實現「<strong>通用且可更新 SRS</strong>」的實用 zk-SNARK，這意味著同一個 SRS 可以支援所有不超過特定大小的電路。然而，Sonic 在追求通用性的同時付出了代價：其 Prover 需要進行大量的昂貴群運算。<strong>PLONK 的設計目標</strong>正是在保留 Sonic 通用性優勢的同時，大幅優化 Prover 的計算複雜度，並減少 SRS 的大小，使其效能更接近 Groth16。
        </p>

        <h3>1.3 本報告的架構</h3>
        <p>
            本報告將按以下結構深入剖析 PLONK：
        </p>
        <ul>
            <li><strong>第 2 章</strong>：定義系統中的參與角色、信任模型與對手模型。</li>
            <li><strong>第 3–7 章</strong>：技術核心，介紹運作流程、數學基礎、Permutation Argument、Setup 與 Preprocessing。</li>
            <li><strong>第 8–9 章</strong>：詳細拆解 Prover 的證明生成步驟與 Verifier 的驗證邏輯。</li>
            <li><strong>第 10–12 章</strong>：分析效能、安全性論證與結論。</li>
        </ul>
    </section>

    <section id="system-roles">
        <h2>2. 系統與角色模型 (System Roles)</h2>

        <h3>2.1 系統概觀與信任模型</h3>
        <p>
            PLONK 建立在<strong>通用參考字串 (Universal Structured Reference String, SRS)</strong> 模型之上。與傳統電路專用 SRS 不同，通用的 SRS 透過多方計算（MPC）儀式生成，具有「<strong>可更新 (updatable)</strong>」特性。只要儀式中至少有一位參與者是誠實的，生成的 SRS 就是安全的。
        </p>

        <h3>2.2 主要角色</h3>
        <p>在理解 PLONK 時，我們區分「現實世界中的參與者」與「安全證明模型中的角色」：</p>
        
        <h4>現實世界參與者</h4>
        <ul>
            <li><strong>Setup 參與者</strong>：負責執行 MPC 儀式，生成 monomials SRS <span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="0" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mo class="mjx-n"><mjx-c class="mjx-c7B"></mjx-c></mjx-mo><mjx-mo class="mjx-n"><mjx-c class="mjx-c5B"></mjx-c></mjx-mo><mjx-msup><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D465 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: 0.363em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D456 TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msup><mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c5D"></mjx-c></mjx-mo><mjx-script style="vertical-align: -0.15em;"><mjx-mn class="mjx-n" size="s"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="2"><mjx-c class="mjx-c5B"></mjx-c></mjx-mo><mjx-msup><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D465 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: 0.363em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D456 TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msup><mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c5D"></mjx-c></mjx-mo><mjx-script style="vertical-align: -0.15em;"><mjx-mn class="mjx-n" size="s"><mjx-c class="mjx-c32"></mjx-c></mjx-mn></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c7D"></mjx-c></mjx-mo></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo fence="false" stretchy="false">{</mo><mo stretchy="false">[</mo><msup><mi>x</mi><mi>i</mi></msup><msub><mo stretchy="false">]</mo><mn>1</mn></msub><mo>,</mo><mo stretchy="false">[</mo><msup><mi>x</mi><mi>i</mi></msup><msub><mo stretchy="false">]</mo><mn>2</mn></msub><mo fence="false" stretchy="false">}</mo></math></mjx-assistive-mml></mjx-container></span>。</li>
            <li><strong>電路設計者</strong>：定義約束系統 <span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="1" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-texatom texclass="ORD"><mjx-mi class="mjx-cal mjx-i"><mjx-c class="mjx-c43 TEX-C"></mjx-c></mjx-mi></mjx-texatom></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow data-mjx-texclass="ORD"><mi data-mjx-variant="-tex-calligraphic" mathvariant="script">C</mi></mrow></math></mjx-assistive-mml></mjx-container></span>，產生預處理參數（選擇子與置換承諾），即 Verification Key。</li>
            <li><strong>證明者 (Prover)</strong>：持有 witness，計算證明 <span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="2" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D70B TEX-I"></mjx-c></mjx-mi></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>π</mi></math></mjx-assistive-mml></mjx-container></span>。</li>
            <li><strong>驗證者 (Verifier)</strong>：驗證證明 <span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="3" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D70B TEX-I"></mjx-c></mjx-mi></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>π</mi></math></mjx-assistive-mml></mjx-container></span>。</li>
        </ul>

        <h4>抽象模型角色 (Polynomial IOP)</h4>
        <ul>
            <li><strong>理想第三方 (Ideal Trusted Party, <mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="4" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-texatom texclass="ORD"><mjx-mi class="mjx-cal mjx-i"><mjx-c class="mjx-c49 TEX-C"></mjx-c></mjx-mi></mjx-texatom></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow data-mjx-texclass="ORD"><mi data-mjx-variant="-tex-calligraphic" mathvariant="script">I</mi></mrow></math></mjx-assistive-mml></mjx-container>)</strong>：在抽象協議中，Prover 將多項式完整地傳送給 <mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="5" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-texatom texclass="ORD"><mjx-mi class="mjx-cal mjx-i"><mjx-c class="mjx-c49 TEX-C"></mjx-c></mjx-mi></mjx-texatom></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow data-mjx-texclass="ORD"><mi data-mjx-variant="-tex-calligraphic" mathvariant="script">I</mi></mrow></math></mjx-assistive-mml></mjx-container>。<mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="6" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-texatom texclass="ORD"><mjx-mi class="mjx-cal mjx-i"><mjx-c class="mjx-c49 TEX-C"></mjx-c></mjx-mi></mjx-texatom></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow data-mjx-texclass="ORD"><mi data-mjx-variant="-tex-calligraphic" mathvariant="script">I</mi></mrow></math></mjx-assistive-mml></mjx-container> 誠實地回答 Verifier 對這些多項式在特定點的詢問。這簡化了對多項式行為的分析。</li>
            <li><strong>代數對手 (Algebraic Adversary, <mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="7" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-texatom texclass="ORD"><mjx-mi class="mjx-cal mjx-i"><mjx-c class="mjx-c41 TEX-C"></mjx-c></mjx-mi></mjx-texatom></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow data-mjx-texclass="ORD"><mi data-mjx-variant="-tex-calligraphic" mathvariant="script">A</mi></mrow></math></mjx-assistive-mml></mjx-container>)</strong>：這是我們假設的攻擊者模型。</li>
        </ul>

        <h3>2.3 對手模型與 AGM 安全性</h3>
        <p>
            PLONK 的安全性分析基於<strong>代數群模型 (Algebraic Group Model, AGM)</strong>。在此模型中，每當對手輸出一個群元素 <span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="8" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44C TEX-I"></mjx-c></mjx-mi></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>Y</mi></math></mjx-assistive-mml></mjx-container></span>，他必須同時提供該元素如何由輸入元素線性組合而成的係數。
        </p>
        <p>
            <strong>Lemma 2.2 的直覺</strong>：AGM 允許我們將複雜的雙線性配對檢查 (Real Pairing Check) 還原為多項式恆等式檢查 (Ideal Polynomial Check)。具體來說，如果一個代數對手能欺騙 Pairing Check，則相當於他在不知情的情況下解決了離散對數問題 (Q-DLOG)。這確保了只要 Polynomial Protocol 是安全的（具有 <strong>Knowledge Soundness</strong>），編譯後的 SNARK 就是安全的。
        </p>
    </section>

    <section id="overview">
        <h2>3. 整體流程概觀 (Overview)</h2>

        <h3>3.1 協定生命週期</h3>
        <p>PLONK 的運作可以分為四個主要階段：</p>
        
        <!-- Mermaid Diagram Insertion -->
        <div class="chart-container">
            <div class="mermaid" data-processed="true" style="visibility: visible; opacity: 1;"><svg id="mermaid-1764500662368" width="828.43603515625" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" height="1165.9573974609375" viewBox="-8 -8 828.43603515625 1165.9573974609375" role="graphics-document document" aria-roledescription="flowchart-v2"><style>#mermaid-1764500662368{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;font-size:16px;fill:#000000;}#mermaid-1764500662368 .error-icon{fill:#552222;}#mermaid-1764500662368 .error-text{fill:#552222;stroke:#552222;}#mermaid-1764500662368 .edge-thickness-normal{stroke-width:2px;}#mermaid-1764500662368 .edge-thickness-thick{stroke-width:3.5px;}#mermaid-1764500662368 .edge-pattern-solid{stroke-dasharray:0;}#mermaid-1764500662368 .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-1764500662368 .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-1764500662368 .marker{fill:#666;stroke:#666;}#mermaid-1764500662368 .marker.cross{stroke:#666;}#mermaid-1764500662368 svg{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;font-size:16px;}#mermaid-1764500662368 .label{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;color:#000000;}#mermaid-1764500662368 .cluster-label text{fill:#333;}#mermaid-1764500662368 .cluster-label span{color:#333;}#mermaid-1764500662368 .label text,#mermaid-1764500662368 span{fill:#000000;color:#000000;}#mermaid-1764500662368 .node rect,#mermaid-1764500662368 .node circle,#mermaid-1764500662368 .node ellipse,#mermaid-1764500662368 .node polygon,#mermaid-1764500662368 .node path{fill:#eee;stroke:#999;stroke-width:1px;}#mermaid-1764500662368 .node .label{text-align:center;}#mermaid-1764500662368 .node.clickable{cursor:pointer;}#mermaid-1764500662368 .arrowheadPath{fill:#333333;}#mermaid-1764500662368 .edgePath .path{stroke:#666;stroke-width:2.0px;}#mermaid-1764500662368 .flowchart-link{stroke:#666;fill:none;}#mermaid-1764500662368 .edgeLabel{background-color:white;text-align:center;}#mermaid-1764500662368 .edgeLabel rect{opacity:0.5;background-color:white;fill:white;}#mermaid-1764500662368 .cluster rect{fill:hsl(0, 0%, 98.9215686275%);stroke:#707070;stroke-width:1px;}#mermaid-1764500662368 .cluster text{fill:#333;}#mermaid-1764500662368 .cluster span{color:#333;}#mermaid-1764500662368 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;font-size:12px;background:hsl(-160, 0%, 93.3333333333%);border:1px solid #707070;border-radius:2px;pointer-events:none;z-index:100;}#mermaid-1764500662368 .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#000000;}#mermaid-1764500662368 :root{--mermaid-font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;}#mermaid-1764500662368 .process&gt;*{fill:#e1f5fe!important;stroke:#01579b!important;stroke-width:2px!important;}#mermaid-1764500662368 .process span{fill:#e1f5fe!important;stroke:#01579b!important;stroke-width:2px!important;}#mermaid-1764500662368 .artifact&gt;*{fill:#fff9c4!important;stroke:#fbc02d!important;stroke-width:2px!important;stroke-dasharray:5 5!important;}#mermaid-1764500662368 .artifact span{fill:#fff9c4!important;stroke:#fbc02d!important;stroke-width:2px!important;stroke-dasharray:5 5!important;}#mermaid-1764500662368 .actor&gt;*{fill:#f3e5f5!important;stroke:#7b1fa2!important;stroke-width:2px!important;}#mermaid-1764500662368 .actor span{fill:#f3e5f5!important;stroke:#7b1fa2!important;stroke-width:2px!important;}</style><g><marker id="flowchart-pointEnd" class="marker flowchart" viewBox="0 0 12 20" refX="10" refY="5" markerUnits="userSpaceOnUse" markerWidth="12" markerHeight="12" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker><marker id="flowchart-pointStart" class="marker flowchart" viewBox="0 0 10 10" refX="0" refY="5" markerUnits="userSpaceOnUse" markerWidth="12" markerHeight="12" orient="auto"><path d="M 0 5 L 10 10 L 10 0 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker><marker id="flowchart-circleEnd" class="marker flowchart" viewBox="0 0 10 10" refX="11" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></circle></marker><marker id="flowchart-circleStart" class="marker flowchart" viewBox="0 0 10 10" refX="-1" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></circle></marker><marker id="flowchart-crossEnd" class="marker cross flowchart" viewBox="0 0 11 11" refX="12" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"></path></marker><marker id="flowchart-crossStart" class="marker cross flowchart" viewBox="0 0 11 11" refX="-1" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"></path></marker><g class="root"><g class="clusters"><g class="cluster default" id="Phase4"><rect style="" rx="0" ry="0" x="0" y="756.8181838989258" width="473.87073516845703" height="393.13919830322266"></rect><g class="cluster-label" transform="translate(191.58025741577148, 756.8181838989258)"><foreignObject width="90.71022033691406" height="22.727272033691406"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">Phase 4 驗證</span></div></foreignObject></g></g><g class="cluster default" id="Phase3"><rect style="" rx="0" ry="0" x="503.87073516845703" y="112.7272720336914" width="308.5653381347656" height="730.0000038146973"></rect><g class="cluster-label" transform="translate(596.7968711853027, 112.7272720336914)"><foreignObject width="122.71306610107422" height="22.727272033691406"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">Phase 3 證明生成</span></div></foreignObject></g></g><g class="cluster default" id="Phase2"><rect style="" rx="0" ry="0" x="60" y="112.7272720336914" width="198.36647415161133" height="311.3636360168457"></rect><g class="cluster-label" transform="translate(89.82954597473145, 112.7272720336914)"><foreignObject width="138.70738220214844" height="22.727272033691406"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">Phase 2 電路預處理</span></div></foreignObject></g></g><g class="cluster default" id="Phase1"><rect style="" rx="0" ry="0" x="278.3664741516113" y="0" width="205.5042610168457" height="200.4545440673828"></rect><g class="cluster-label" transform="translate(289.5632076263428, 0)"><foreignObject width="183.1107940673828" height="22.727272033691406"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">Phase 1 通用 Setup (MPC)</span></div></foreignObject></g></g><g class="cluster default" id="Rounds"><rect style="" rx="0" ry="0" x="523.870735168457" y="250.4545440673828" width="268.5653381347656" height="456.36363983154297"></rect><g class="cluster-label" transform="translate(586.9389190673828, 250.4545440673828)"><foreignObject width="142.42897033691406" height="22.727272033691406"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">互動回合 Round 1-5</span></div></foreignObject></g></g></g><g class="edgePaths"><path d="M386.1186046600342,62.727272033691406L386.1186046600342,66.89393870035808C386.1186046600342,71.06060536702473,386.1186046600342,79.39393870035808,386.1186046600342,87.7272720336914C386.1186046600342,96.06060536702473,386.1186046600342,104.39393870035808,386.1186046600342,112.7272720336914C386.1186046600342,121.06060536702473,386.1186046600342,129.39393870035806,386.1186046600342,133.56060536702475L386.1186046600342,137.7272720336914" id="L-SetupAction-SRS-0" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-SetupAction LE-SRS" style="stroke:#333;stroke-width:1px;" marker-end="url(#flowchart-pointEnd)"></path><path d="M141.64772415161133,175.4545440673828L141.64772415161133,179.62121073404947C141.64772415161133,183.78787740071616,141.64772415161133,192.12121073404947,141.64772415161133,200.4545440673828C141.64772415161133,208.78787740071616,141.64772415161133,217.12121073404947,141.64772415161133,225.4545440673828C141.64772415161133,233.78787740071616,141.64772415161133,242.12121073404947,143.5475514550599,250.4545440673828C145.44737875850845,258.7878774007161,149.2470333654056,267.1212107340495,151.14686066885415,271.2878774007161L153.04668797230272,275.4545440673828" id="L-Circuit-Compile-0" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-Circuit LE-Compile" style="stroke:#333;stroke-width:1px;" marker-end="url(#flowchart-pointEnd)"></path><path d="M377.5175684807256,175.4545440673828L375.61774117727697,179.62121073404947C373.7179138738284,183.78787740071616,369.9182592669313,192.12121073404947,333.9399518787456,200.4545440673828C297.9616444905599,208.78787740071616,229.8046843210856,217.12121073404947,195.72620423634848,225.4545440673828C161.64772415161133,233.78787740071616,161.64772415161133,242.12121073404947,161.64772415161133,250.4545440673828C161.64772415161133,258.7878774007161,161.64772415161133,267.1212107340495,161.64772415161133,271.2878774007161L161.64772415161133,275.4545440673828" id="L-SRS-Compile-0" class=" edge-thickness-normal edge-pattern-dotted flowchart-link LS-SRS LE-Compile" style="fill:none;stroke-width:2px;stroke-dasharray:3;" marker-end="url(#flowchart-pointEnd)"></path><path d="M161.64772415161133,313.1818161010742L161.64772415161133,317.3484827677409C161.64772415161133,321.51514943440753,161.64772415161133,329.8484827677409,161.64772415161133,338.1818161010742C161.64772415161133,346.51514943440753,161.64772415161133,354.8484827677409,161.64772415161133,359.01514943440753L161.64772415161133,363.1818161010742" id="L-Compile-VK-0" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-Compile LE-VK" style="stroke:#333;stroke-width:1px;" marker-end="url(#flowchart-pointEnd)"></path><path d="M658.1534042358398,312.27272605895996L658.1534042358398,316.5909077326457C658.1534042358398,320.90908940633136,658.1534042358398,329.5454527537028,658.1534042358398,338.0303010940552C658.1534042358398,346.51514943440753,658.1534042358398,354.8484827677409,658.1534042358398,359.01514943440753L658.1534042358398,363.1818161010742" id="L-R1-R2-0" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-R1 LE-R2" style="stroke:#333;stroke-width:1px;" marker-end="url(#flowchart-pointEnd)"></path><path d="M658.1534042358398,399.0909080505371L658.1534042358398,403.2575747172038C658.1534042358398,407.4242413838704,658.1534042358398,415.7575747172038,658.1534042358398,424.0909080505371C658.1534042358398,432.4242413838704,658.1534042358398,440.7575747172038,658.1534042358398,449.0909080505371C658.1534042358398,457.4242413838704,658.1534042358398,465.7575747172038,658.1534042358398,469.9242413838704L658.1534042358398,474.0909080505371" id="L-R2-R3-0" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-R2 LE-R3" style="stroke:#333;stroke-width:1px;" marker-end="url(#flowchart-pointEnd)"></path><path d="M658.1534042358398,510L658.1534042358398,514.1666666666666C658.1534042358398,518.3333333333334,658.1534042358398,526.6666666666666,658.1534042358398,535C658.1534042358398,543.3333333333334,658.1534042358398,551.6666666666666,658.1534042358398,555.8333333333334L658.1534042358398,560" id="L-R3-R4-0" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-R3 LE-R4" style="stroke:#333;stroke-width:1px;" marker-end="url(#flowchart-pointEnd)"></path><path d="M658.1534042358398,595.9090919494629L658.1534042358398,600.0757586161295C658.1534042358398,604.2424252827963,658.1534042358398,612.5757586161295,658.1534042358398,620.9090919494629C658.1534042358398,629.2424252827963,658.1534042358398,637.5757586161295,658.1534042358398,641.7424252827963L658.1534042358398,645.9090919494629" id="L-R4-R5-0" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-R4 LE-R5" style="stroke:#333;stroke-width:1px;" marker-end="url(#flowchart-pointEnd)"></path><path d="M404.89977432495505,175.4545440673828L409.0482255320264,179.62121073404947C413.19667673909765,183.78787740071616,421.49357915324026,192.12121073404947,455.8456283827725,200.4545440673828C490.1976776123047,208.78787740071616,550.6048736572266,217.12121073404947,580.8084716796875,225.4545440673828C611.0120697021484,233.78787740071616,611.0120697021484,242.12121073404947,615.6529263511114,250.60605907440186C620.2937830000745,259.0909074147542,629.5754962980006,267.72727076212567,634.2163529469636,272.04545243581134L638.8572095959267,276.36363410949707" id="L-SRS-R1-0" class=" edge-thickness-normal edge-pattern-dotted flowchart-link LS-SRS LE-R1" style="fill:none;stroke-width:2px;stroke-dasharray:3;" marker-end="url(#flowchart-pointEnd)"></path><path d="M674.2684631347656,174.54545402526855L674.2684631347656,178.86363569895425C674.2684631347656,183.18181737263998,674.2684631347656,191.81818072001138,674.2684631347656,200.30302906036377C674.2684631347656,208.78787740071616,674.2684631347656,217.12121073404947,674.2684631347656,225.4545440673828C674.2684631347656,233.78787740071616,674.2684631347656,242.12121073404947,672.6820065997674,250.60605907440186C671.0955500647692,259.0909074147542,667.9226369947728,267.72727076212567,666.3361804597746,272.04545243581134L664.7497239247764,276.36363410949707" id="L-InputData-R1-0" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-InputData LE-R1" style="stroke:#333;stroke-width:1px;" marker-end="url(#flowchart-pointEnd)"></path><path d="M658.1534042358398,681.8181838989258L658.1534042358398,685.9848505655924C658.1534042358398,690.1515172322592,658.1534042358398,698.4848505655924,658.1534042358398,706.8181838989258C658.1534042358398,715.1515172322592,658.1534042358398,723.4848505655924,658.1534042358398,731.8181838989258C658.1534042358398,740.1515172322592,658.1534042358398,748.4848505655924,658.1534042358398,756.8181838989258C658.1534042358398,765.1515172322592,658.1534042358398,773.4848505655924,658.1534042358398,777.6515172322592L658.1534042358398,781.8181838989258" id="L-R5-Proof-0" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-R5 LE-Proof" style="stroke:#333;stroke-width:1px;" marker-end="url(#flowchart-pointEnd)"></path><path d="M368.91653230141696,175.4545440673828L365.1168776945198,179.62121073404947C361.3172230876227,183.78787740071616,353.7179138738284,192.12121073404947,298.8984918235923,200.4545440673828C244.0790697733561,208.78787740071616,142.03953488667807,217.12121073404947,91.01976744333903,225.4545440673828C40,233.78787740071616,40,242.12121073404947,40,253.59848340352377C40,265.07575607299805,40,279.6969680786133,40,294.3181800842285C40,308.93939208984375,40,323.560604095459,40,338.0303010940552C40,352.49999809265137,40,366.8181800842285,40,381.13636207580566C40,395.4545440673828,40,409.77272605895996,40,421.0984837214152C40,432.4242413838704,40,440.7575747172038,40,452.083332379659C40,463.40909004211426,40,477.7272720336914,40,492.04545402526855C40,506.3636360168457,40,520.6818180084229,40,535C40,549.3181819915771,40,563.6363639831543,40,577.9545459747314C40,592.2727279663086,40,606.5909099578857,40,620.9090919494629C40,635.22727394104,40,649.5454559326172,40,663.8636379241943C40,678.1818199157715,40,692.5000019073486,40,703.8257595698038C40,715.1515172322592,40,723.4848505655924,40,731.8181838989258C40,740.1515172322592,40,748.4848505655924,40,759.8106082280477C40,771.1363658905029,40,785.4545478820801,40,799.7727298736572C40,814.0909118652344,40,828.4090938568115,40,839.7348515192667C40,851.060609181722,40,859.3939425150553,67.61824991149717,876.1877423739134C95.23649982299435,892.9815422327714,150.47299964598872,918.235808617154,178.0912495574859,930.8629418093454L205.70949946898307,943.4900750015369" id="L-SRS-VerifyCheck-0" class=" edge-thickness-normal edge-pattern-dotted flowchart-link LS-SRS LE-VerifyCheck" style="fill:none;stroke-width:2px;stroke-dasharray:3;" marker-end="url(#flowchart-pointEnd)"></path><path d="M161.64772415161133,399.0909080505371L161.64772415161133,403.2575747172038C161.64772415161133,407.4242413838704,161.64772415161133,415.7575747172038,161.64772415161133,424.0909080505371C161.64772415161133,432.4242413838704,161.64772415161133,440.7575747172038,161.64772415161133,452.083332379659C161.64772415161133,463.40909004211426,161.64772415161133,477.7272720336914,161.64772415161133,492.04545402526855C161.64772415161133,506.3636360168457,161.64772415161133,520.6818180084229,161.64772415161133,535C161.64772415161133,549.3181819915771,161.64772415161133,563.6363639831543,161.64772415161133,577.9545459747314C161.64772415161133,592.2727279663086,161.64772415161133,606.5909099578857,161.64772415161133,620.9090919494629C161.64772415161133,635.22727394104,161.64772415161133,649.5454559326172,161.64772415161133,663.8636379241943C161.64772415161133,678.1818199157715,161.64772415161133,692.5000019073486,161.64772415161133,703.8257595698038C161.64772415161133,715.1515172322592,161.64772415161133,723.4848505655924,161.64772415161133,731.8181838989258C161.64772415161133,740.1515172322592,161.64772415161133,748.4848505655924,161.64772415161133,759.8106082280477C161.64772415161133,771.1363658905029,161.64772415161133,785.4545478820801,161.64772415161133,799.7727298736572C161.64772415161133,814.0909118652344,161.64772415161133,828.4090938568115,161.64772415161133,839.7348515192667C161.64772415161133,851.060609181722,161.64772415161133,859.3939425150553,171.409470152277,873.7696255928096C181.17121615294272,888.1453086705641,200.69470815427405,908.5633414927394,210.45645415493973,918.772357903827L220.21820015560542,928.9813743149147" id="L-VK-VerifyCheck-0" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-VK LE-VerifyCheck" style="stroke:#333;stroke-width:1px;" marker-end="url(#flowchart-pointEnd)"></path><path d="M658.1534042358398,817.7272758483887L658.1534042358398,821.8939425150553C658.1534042358398,826.060609181722,658.1534042358398,834.3939425150553,591.0398864746094,842.7272758483887C523.9263687133789,851.060609181722,389.69933319091797,859.3939425150553,322.6691487630208,867.8106093406677C255.6389643351237,876.2272761662801,255.80563100179037,884.7272764841715,255.8889643351237,888.9772766431173L255.97229766845703,893.227276802063" id="L-Proof-VerifyCheck-0" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-Proof LE-VerifyCheck" style="stroke:#333;stroke-width:1px;" marker-end="url(#flowchart-pointEnd)"></path><path d="M297.7592296600342,817.7272758483887L297.7592296600342,821.8939425150553C297.7592296600342,826.060609181722,297.7592296600342,834.3939425150553,297.7592296600342,842.7272758483887C297.7592296600342,851.060609181722,297.7592296600342,859.3939425150553,294.46602358823935,871.4818916162443C291.17281751644447,883.5698407174333,284.58640537285476,899.412405586478,281.29319930105993,907.3336880210003L277.99999322926504,915.2549704555225" id="L-PI-VerifyCheck-0" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-PI LE-VerifyCheck" style="stroke:#333;stroke-width:1px;" marker-end="url(#flowchart-pointEnd)"></path><path d="M255.97229766845732,1039.5482912063603L255.88896433512392,1043.6316243807478C255.80563100179054,1047.7149575551355,255.63896433512377,1055.8816239039104,255.5556310017904,1064.1316237449646C255.47229766845703,1072.3816235860188,255.47229766845703,1080.7149569193523,255.47229766845703,1084.8816235860188L255.47229766845703,1089.0482902526855" id="L-VerifyCheck-Result-0" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-VerifyCheck LE-Result" style="stroke:#333;stroke-width:1px;" marker-end="url(#flowchart-pointEnd)"></path><path d="M387.69770196633783,175.4545440673828L388.04649856651196,179.62121073404947C388.39529516668614,183.78787740071616,389.09288836703445,192.12121073404947,359.4777878979134,200.4545440673828C329.8626874287923,208.78787740071616,269.93489329020184,217.12121073404947,239.97099622090658,225.4545440673828C210.00709915161133,233.78787740071616,210.00709915161133,242.12121073404947,205.41337610147593,250.4545440673828C200.81965305134054,258.7878774007161,191.63220695106975,267.1212107340495,187.03848390093435,271.2878774007161L182.44476085079896,275.4545440673828" id="L-SRS-Compile-1" class=" edge-thickness-normal edge-pattern-dotted flowchart-link LS-SRS LE-Compile" style="fill:none;stroke-width:2px;stroke-dasharray:3;" marker-end="url(#flowchart-pointEnd)"></path><path d="M396.29873814564644,175.4545440673828L398.54736204926917,179.62121073404947C400.7959859528919,183.78787740071616,405.29323376013735,192.12121073404947,407.5418576637601,200.4545440673828C409.7904815673828,208.78787740071616,409.7904815673828,217.12121073404947,409.7904815673828,225.4545440673828C409.7904815673828,233.78787740071616,409.7904815673828,242.12121073404947,409.7904815673828,253.59848340352377C409.7904815673828,265.07575607299805,409.7904815673828,279.6969680786133,409.7904815673828,294.3181800842285C409.7904815673828,308.93939208984375,409.7904815673828,323.560604095459,409.7904815673828,338.0303010940552C409.7904815673828,352.49999809265137,409.7904815673828,366.8181800842285,409.7904815673828,381.13636207580566C409.7904815673828,395.4545440673828,409.7904815673828,409.77272605895996,409.7904815673828,421.0984837214152C409.7904815673828,432.4242413838704,409.7904815673828,440.7575747172038,409.7904815673828,452.083332379659C409.7904815673828,463.40909004211426,409.7904815673828,477.7272720336914,409.7904815673828,492.04545402526855C409.7904815673828,506.3636360168457,409.7904815673828,520.6818180084229,409.7904815673828,535C409.7904815673828,549.3181819915771,409.7904815673828,563.6363639831543,409.7904815673828,577.9545459747314C409.7904815673828,592.2727279663086,409.7904815673828,606.5909099578857,409.7904815673828,620.9090919494629C409.7904815673828,635.22727394104,409.7904815673828,649.5454559326172,409.7904815673828,663.8636379241943C409.7904815673828,678.1818199157715,409.7904815673828,692.5000019073486,409.7904815673828,703.8257595698038C409.7904815673828,715.1515172322592,409.7904815673828,723.4848505655924,409.7904815673828,731.8181838989258C409.7904815673828,740.1515172322592,409.7904815673828,748.4848505655924,409.7904815673828,759.8106082280477C409.7904815673828,771.1363658905029,409.7904815673828,785.4545478820801,409.7904815673828,799.7727298736572C409.7904815673828,814.0909118652344,409.7904815673828,828.4090938568115,409.7904815673828,839.7348515192667C409.7904815673828,851.060609181722,409.7904815673828,859.3939425150553,391.6068896066203,875.2633810451681C373.42329764585776,891.1328195752809,337.05611372433276,914.538363302173,318.8725217635702,926.2411351656192L300.6889298028077,937.9439070290653" id="L-SRS-VerifyCheck-1" class=" edge-thickness-normal edge-pattern-dotted flowchart-link LS-SRS LE-VerifyCheck" style="fill:none;stroke-width:2px;stroke-dasharray:3;" marker-end="url(#flowchart-pointEnd)"></path></g><g class="edgeLabels"><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g></g><g class="nodes"><g class="node default process" id="flowchart-VerifyCheck-125" transform="translate(255.47229766845703, 965.8877830505371)"><polygon points="73.16050815582275,0 146.3210163116455,-73.16050815582275 73.16050815582275,-146.3210163116455 0,-73.16050815582275" class="label-container" transform="translate(-73.16050815582275,73.16050815582275)" style=""></polygon><g class="label" style="" transform="translate(-47.705963134765625, -10.454545021057129)"><foreignObject width="95.41192626953125" height="20.909090042114258"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">Pairing Check</span></div></foreignObject></g></g><g class="node default default" id="flowchart-Result-126" transform="translate(255.47229766845703, 1107.002836227417)"><rect style="" rx="17.95454502105713" ry="17.95454502105713" x="-69.25425744056702" y="-17.95454502105713" width="138.50851488113403" height="35.90909004211426"></rect><g class="label" style="" transform="translate(-57.265621185302734, -10.454545021057129)"><foreignObject width="114.53124237060547" height="20.909090042114258"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">Accept or Reject</span></div></foreignObject></g></g><g class="node default artifact" id="flowchart-PI-133" transform="translate(297.7592296600342, 799.7727298736572)"><rect class="basic label-container" style="" rx="5" ry="5" x="-49.5738639831543" y="-17.95454502105713" width="99.1477279663086" height="35.90909004211426"></rect><g class="label" style="" transform="translate(-42.0738639831543, -10.454545021057129)"><foreignObject width="84.1477279663086" height="20.909090042114258"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">Public Input</span></div></foreignObject></g></g><g class="node default artifact" id="flowchart-InputData-107" transform="translate(674.2684631347656, 156.5909080505371)"><rect class="basic label-container" style="" rx="5" ry="5" x="-87.05255126953125" y="-17.95454502105713" width="174.1051025390625" height="35.90909004211426"></rect><g class="label" style="" transform="translate(-79.55255126953125, -10.454545021057129)"><foreignObject width="159.1051025390625" height="20.909090042114258"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">Witness + Public Input</span></div></foreignObject></g></g><g class="node default artifact" id="flowchart-Proof-118" transform="translate(658.1534042358398, 799.7727298736572)"><rect class="basic label-container" style="" rx="5" ry="5" x="-26.640625" y="-17.95454502105713" width="53.28125" height="35.90909004211426"></rect><g class="label" style="" transform="translate(-19.140625, -10.454545021057129)"><foreignObject width="38.28125" height="20.909090042114258"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">Proof</span></div></foreignObject></g></g><g class="node default process" id="flowchart-R1-108" transform="translate(658.1534042358398, 294.3181800842285)"><rect class="basic label-container" style="" rx="5" ry="5" x="-75.84516906738281" y="-17.95454502105713" width="151.69033813476562" height="35.90909004211426"></rect><g class="label" style="" transform="translate(-68.34516906738281, -10.454545021057129)"><foreignObject width="136.69033813476562" height="20.909090042114258"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">Round 1 Wire Polys</span></div></foreignObject></g></g><g class="node default process" id="flowchart-R2-109" transform="translate(658.1534042358398, 381.13636207580566)"><rect class="basic label-container" style="" rx="5" ry="5" x="-99.28266906738281" y="-17.95454502105713" width="198.56533813476562" height="35.90909004211426"></rect><g class="label" style="" transform="translate(-91.78266906738281, -10.454545021057129)"><foreignObject width="183.56533813476562" height="20.909090042114258"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">Round 2 Permutation Poly</span></div></foreignObject></g></g><g class="node default process" id="flowchart-R3-110" transform="translate(658.1534042358398, 492.04545402526855)"><rect class="basic label-container" style="" rx="5" ry="5" x="-87.39346313476562" y="-17.95454502105713" width="174.78692626953125" height="35.90909004211426"></rect><g class="label" style="" transform="translate(-79.89346313476562, -10.454545021057129)"><foreignObject width="159.78692626953125" height="20.909090042114258"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">Round 3 Quotient Poly</span></div></foreignObject></g></g><g class="node default process" id="flowchart-R4-111" transform="translate(658.1534042358398, 577.9545459747314)"><rect class="basic label-container" style="" rx="5" ry="5" x="-78.94175720214844" y="-17.95454502105713" width="157.88351440429688" height="35.90909004211426"></rect><g class="label" style="" transform="translate(-71.44175720214844, -10.454545021057129)"><foreignObject width="142.88351440429688" height="20.909090042114258"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">Round 4 Evaluations</span></div></foreignObject></g></g><g class="node default process" id="flowchart-R5-112" transform="translate(658.1534042358398, 663.8636379241943)"><rect class="basic label-container" style="" rx="5" ry="5" x="-94.55255126953125" y="-17.95454502105713" width="189.1051025390625" height="35.90909004211426"></rect><g class="label" style="" transform="translate(-87.05255126953125, -10.454545021057129)"><foreignObject width="174.1051025390625" height="20.909090042114258"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">Round 5 Opening Proofs</span></div></foreignObject></g></g><g class="node default artifact" id="flowchart-Circuit-98" transform="translate(141.64772415161133, 156.5909080505371)"><rect class="basic label-container" style="" rx="5" ry="5" x="-46.64772415161133" y="-18.863636016845703" width="93.29544830322266" height="37.727272033691406"></rect><g class="label" style="" transform="translate(-39.14772415161133, -11.363636016845703)"><foreignObject width="78.29544830322266" height="22.727272033691406"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">電路邏輯 C</span></div></foreignObject></g></g><g class="node default process" id="flowchart-Compile-99" transform="translate(161.64772415161133, 294.3181800842285)"><rect class="basic label-container" style="" rx="5" ry="5" x="-47.5" y="-18.863636016845703" width="95" height="37.727272033691406"></rect><g class="label" style="" transform="translate(-40, -11.363636016845703)"><foreignObject width="80" height="22.727272033691406"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">編譯與承諾</span></div></foreignObject></g></g><g class="node default artifact" id="flowchart-VK-100" transform="translate(161.64772415161133, 381.13636207580566)"><rect class="basic label-container" style="" rx="5" ry="5" x="-61.718746185302734" y="-17.95454502105713" width="123.43749237060547" height="35.90909004211426"></rect><g class="label" style="" transform="translate(-54.218746185302734, -10.454545021057129)"><foreignObject width="108.43749237060547" height="20.909090042114258"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">Verification Key</span></div></foreignObject></g></g><g class="node default process" id="flowchart-SetupAction-94" transform="translate(386.1186046600342, 43.8636360168457)"><rect class="basic label-container" style="" rx="5" ry="5" x="-60.5042610168457" y="-18.863636016845703" width="121.0085220336914" height="37.727272033691406"></rect><g class="label" style="" transform="translate(-53.0042610168457, -11.363636016845703)"><foreignObject width="106.0085220336914" height="22.727272033691406"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">執行 MPC 儀式</span></div></foreignObject></g></g><g class="node default artifact" id="flowchart-SRS-95" transform="translate(386.1186046600342, 156.5909080505371)"><rect class="basic label-container" style="" rx="5" ry="5" x="-38.977272033691406" y="-18.863636016845703" width="77.95454406738281" height="37.727272033691406"></rect><g class="label" style="" transform="translate(-31.477272033691406, -11.363636016845703)"><foreignObject width="62.95454406738281" height="22.727272033691406"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">通用 SRS</span></div></foreignObject></g></g></g></g></g></svg></div>
        </div>

        <ol>
            <li><strong>通用 Setup (Universal Setup)</strong>：執行一次性的 MPC 儀式，產出全域通用的 SRS。</li>
            <li><strong>電路預處理 (Preprocessing)</strong>：針對特定電路進行編譯，產生 Selector 與 Permutation 多項式的承諾（Verification Key）。</li>
            <li><strong>證明生成 (Proving)</strong>：Prover 根據私密輸入 (Witness) 與公開輸入，執行 5 輪互動協議，生成證明 <span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="9" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D70B TEX-I"></mjx-c></mjx-mi></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>π</mi></math></mjx-assistive-mml></mjx-container></span>。</li>
            <li><strong>驗證 (Verification)</strong>：Verifier 執行 Batched Pairing 檢查，確認所有多項式約束成立。</li>
        </ol>

        <h3>3.2 資料流與訊息流</h3>
        <p>
            整個協定的資料流向如下：
            <br>
            <strong>SRS</strong> <mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="10" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mo class="mjx-n"><mjx-c class="mjx-c2192"></mjx-c></mjx-mo></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">→</mo></math></mjx-assistive-mml></mjx-container> (Setup) <mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="11" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mo class="mjx-n"><mjx-c class="mjx-c2192"></mjx-c></mjx-mo></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">→</mo></math></mjx-assistive-mml></mjx-container> <strong>Prover &amp; Verifier</strong><br>
            <strong>Circuit Logic</strong> <mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="12" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mo class="mjx-n"><mjx-c class="mjx-c2192"></mjx-c></mjx-mo></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">→</mo></math></mjx-assistive-mml></mjx-container> (Preprocessing) <mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="13" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mo class="mjx-n"><mjx-c class="mjx-c2192"></mjx-c></mjx-mo></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">→</mo></math></mjx-assistive-mml></mjx-container> <strong>Verification Key</strong> <mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="14" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mo class="mjx-n"><mjx-c class="mjx-c2192"></mjx-c></mjx-mo></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">→</mo></math></mjx-assistive-mml></mjx-container> <strong>Verifier</strong><br>
            <strong>Witness + Public Input</strong> <mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="15" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mo class="mjx-n"><mjx-c class="mjx-c2192"></mjx-c></mjx-mo></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">→</mo></math></mjx-assistive-mml></mjx-container> (Prover Computation) <mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="16" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mo class="mjx-n"><mjx-c class="mjx-c2192"></mjx-c></mjx-mo></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">→</mo></math></mjx-assistive-mml></mjx-container> <strong>Proof <mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="17" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D70B TEX-I"></mjx-c></mjx-mi></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>π</mi></math></mjx-assistive-mml></mjx-container></strong> <mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="18" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mo class="mjx-n"><mjx-c class="mjx-c2192"></mjx-c></mjx-mo></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">→</mo></math></mjx-assistive-mml></mjx-container> <strong>Verifier</strong><br>
        </p>


        <h3>3.3 多項式與承諾物件總覽</h3>
        <p>
            在深入各章節之前，我們先建立一個「物件索引」，列出 PLONK 協定中所有重要的多項式與承諾。
            這些物件可以依據其生命週期與用途分為三大類：
        </p>

        <h4>3.3.1 多項式物件分類表</h4>
        <table>
            <thead>
                <tr>
                    <th>類別</th>
                    <th>名稱</th>
                    <th>度數上界</th>
                    <th>產生者</th>
                    <th>出現位置</th>
                    <th>說明</th>
                </tr>
            </thead>
            <tbody>
                <!-- Preprocessed Polynomials -->
                <tr>
                    <td rowspan="9"><strong>Preprocessed<br>(預處理)</strong></td>
                    <td>$q_M, q_L, q_R, q_O, q_C$</td>
                    <td>$&lt; n$</td>
                    <td>電路編譯</td>
                    <td>VK</td>
                    <td>Selector 多項式，定義每個 gate 的類型與係數</td>
                </tr>
                <tr>
                    <td>$\text{SID}_1(X) = X$</td>
                    <td>$1$</td>
                    <td>協定定義</td>
                    <td>公式中</td>
                    <td>Identity permutation（第一組 wire）</td>
                </tr>
                <tr>
                    <td>$\text{SID}_2(X) = k_1 X$</td>
                    <td>$1$</td>
                    <td>協定定義</td>
                    <td>公式中</td>
                    <td>Identity permutation（第二組 wire）</td>
                </tr>
                <tr>
                    <td>$\text{SID}_3(X) = k_2 X$</td>
                    <td>$1$</td>
                    <td>協定定義</td>
                    <td>公式中</td>
                    <td>Identity permutation（第三組 wire）</td>
                </tr>
                <tr>
                    <td>$S_{\sigma_1}, S_{\sigma_2}, S_{\sigma_3}$</td>
                    <td>$&lt; n$</td>
                    <td>電路編譯</td>
                    <td>VK</td>
                    <td>Permutation 多項式，編碼電路的 wiring 結構</td>
                </tr>
                <tr>
                    <td>$Z_H(X)$</td>
                    <td>$n$</td>
                    <td>協定定義</td>
                    <td>公式中</td>
                    <td>Domain 多項式：$Z_H(X) = X^n - 1$</td>
                </tr>
                <tr>
                    <td>$L_i(X)$</td>
                    <td>$n-1$</td>
                    <td>協定定義</td>
                    <td>公式中</td>
                    <td>Lagrange 基底多項式</td>
                </tr>
                <tr>
                    <td>$\omega$</td>
                    <td>-</td>
                    <td>協定定義</td>
                    <td>公式中</td>
                    <td>$n$-th root of unity，乘法子群 $H$ 的生成元</td>
                </tr>
                <tr>
                    <td>$k_1, k_2$</td>
                    <td>-</td>
                    <td>協定定義</td>
                    <td>公式中</td>
                    <td>Coset 分隔常數，確保 $H, k_1H, k_2H$ 互不相交</td>
                </tr>

                <!-- Per-Proof Polynomials -->
                <tr>
                    <td rowspan="5"><strong>Per-Proof<br>(每次證明)</strong></td>
                    <td>$a(X), b(X), c(X)$</td>
                    <td>$&lt; n+3$</td>
                    <td>Prover (Round 1)</td>
                    <td>Proof</td>
                    <td>Wire 多項式，編碼 witness 的三組值</td>
                </tr>
                <tr>
                    <td>$z(X)$</td>
                    <td>$&lt; n+3$</td>
                    <td>Prover (Round 2)</td>
                    <td>Proof</td>
                    <td>Permutation accumulator（grand product）</td>
                </tr>
                <tr>
                    <td>$t(X)$</td>
                    <td>$&lt; 3n+6$</td>
                    <td>Prover (Round 3)</td>
                    <td>分拆為 $t_{\text{lo}}, t_{\text{mid}}, t_{\text{hi}}$</td>
                    <td>Quotient 多項式</td>
                </tr>
                <tr>
                    <td>$\text{PI}(X)$</td>
                    <td>$&lt; n$</td>
                    <td>Verifier 計算</td>
                    <td>驗證時</td>
                    <td>Public input 多項式</td>
                </tr>
                <tr>
                    <td>$r(X)$</td>
                    <td>$&lt; n+6$</td>
                    <td>Verifier 計算</td>
                    <td>驗證時</td>
                    <td>Linearisation 多項式</td>
                </tr>

                <!-- Ephemeral Objects -->
                <tr>
                    <td rowspan="4"><strong>Ephemeral<br>(臨時物件)</strong></td>
                    <td>$r'(X)$</td>
                    <td>$&lt; n+6$</td>
                    <td>Verifier</td>
                    <td>內部計算</td>
                    <td>去除常數項的 linearisation 多項式</td>
                </tr>
                <tr>
                    <td>$F(X)$</td>
                    <td>$&lt; n+6$</td>
                    <td>Verifier</td>
                    <td>內部計算</td>
                    <td>Batched polynomial (Round 4 的線性組合)</td>
                </tr>
                <tr>
                    <td>$E$</td>
                    <td>-</td>
                    <td>Verifier</td>
                    <td>內部計算</td>
                    <td>Batched evaluation（多個評估值的線性組合）</td>
                </tr>
                <tr>
                    <td>$W_\zeta(X), W_{\zeta\omega}(X)$</td>
                    <td>$&lt; n+6$</td>
                    <td>Prover (Round 5)</td>
                    <td>Proof</td>
                    <td>Opening proof 多項式</td>
                </tr>
            </tbody>
        </table>

        <h4>3.3.2 承諾物件說明</h4>
        <p>
            上表中標註「出現位置」為 <strong>VK</strong> 的多項式，會在電路預處理階段被承諾（commitment）並儲存於 Verification Key 中，
            所有使用同一電路的證明都共用這些承諾。
        </p>
        <p>
            標註為 <strong>Proof</strong> 的多項式，則是每次生成證明時由 Prover 新建立的承諾，會包含在證明資料中傳送給 Verifier。
        </p>
        <p>
            標註為「公式中」或「內部計算」的多項式，不會被直接承諾，而是作為公式的一部分在驗證過程中使用。
        </p>

        <h3>3.4 核心 Polynomial Identity 總覽</h3>
        <p>
            PLONK 的核心思想是將電路滿足性問題轉換為<strong>單一個多項式恆等式</strong>。
            這個恆等式結合了三種約束：gate constraints、permutation constraints 和 boundary conditions。
        </p>

        <h4>3.4.1 主方程式</h4>
        <p>
            整個 PLONK 協定的數學核心可以濃縮為以下的多項式恆等式：
        </p>
        <p style="text-align: center; font-size: 1.1em;">
            $$
            \text{Gate}(X) + \alpha \cdot \text{Perm}(X) + \alpha^2 L_1(X)(z(X) - 1) \equiv 0 \pmod{Z_H(X)}
            $$
        </p>
        <p>
            其中 $\alpha$ 是 Verifier 發送的隨機挑戰值，用於將三種約束線性組合成單一約束。
            這個恆等式必須「在乘法子群 $H$ 上成立」，等價於「被 $Z_H(X) = X^n - 1$ 整除」。
        </p>

        <h4>3.4.2 Gate Constraint: $\text{Gate}(X)$</h4>
        <p>
            Gate constraint 確保每個 gate 的運算邏輯正確。定義為：
        </p>
        <p style="text-align: center;">
            $$
            \begin{aligned}
            \text{Gate}(X) := &\; q_L(X) \cdot a(X) + q_R(X) \cdot b(X) + q_O(X) \cdot c(X) \\
            &+ q_M(X) \cdot a(X) \cdot b(X) + q_C(X) + \text{PI}(X)
            \end{aligned}
            $$
        </p>
        <p>
            在每個點 $X \in H$ 上，這個式子代表「第 $i$ 個 gate 的線性與乘法約束」。
            Selector 多項式 $(q_M, q_L, q_R, q_O, q_C)$ 由電路結構決定，而 $(a, b, c)$ 則是 Prover 提供的 witness。
        </p>
        <ul>
            <li><strong>加法 gate</strong>：設定 $q_M = 0, q_L = 1, q_R = 1, q_O = -1$ → 檢查 $a + b - c = 0$</li>
            <li><strong>乘法 gate</strong>：設定 $q_M = 1, q_L = 0, q_R = 0, q_O = -1$ → 檢查 $a \cdot b - c = 0$</li>
            <li><strong>常數 gate</strong>：利用 $q_C$ 與 $q_L$ 來強制某個 wire 等於特定常數</li>
        </ul>

        <h4>3.4.3 Permutation Constraint: $\text{Perm}(X)$</h4>
        <p>
            Permutation constraint 確保電路的 wiring 連接正確（copy constraints）。定義為：
        </p>
        <p style="text-align: center;">
            $$
            \begin{aligned}
            \text{Perm}(X) := &\; (a(X) + \beta X + \gamma)(b(X) + \beta k_1 X + \gamma)(c(X) + \beta k_2 X + \gamma) \cdot z(X) \\
            &- (a(X) + \beta S_{\sigma_1}(X) + \gamma)(b(X) + \beta S_{\sigma_2}(X) + \gamma)(c(X) + \beta S_{\sigma_3}(X) + \gamma) \cdot z(\omega X)
            \end{aligned}
            $$
        </p>
        <p>
            其中 $\beta, \gamma$ 是 Verifier 發送的隨機挑戰值。這個式子的含義是：
        </p>
        <ul>
            <li><strong>左半部</strong>：使用 identity permutation $(\text{SID}_1, \text{SID}_2, \text{SID}_3)$ 計算的乘積</li>
            <li><strong>右半部</strong>：使用實際電路 wiring permutation $(S_{\sigma_1}, S_{\sigma_2}, S_{\sigma_3})$ 計算的乘積</li>
            <li>兩者相等 → 強制 $(a, b, c)$ 的值在對應位置必須一致（copy constraints 成立）</li>
        </ul>
        <p>
            這個約束的詳細推導請見<strong>第 5 章 Permutation Argument</strong>。
        </p>

        <h4>3.4.4 Boundary Condition: $L_1(X)(z(X) - 1)$</h4>
        <p>
            Boundary condition 確保 permutation accumulator $z(X)$ 的初始值正確。
            根據 PLONK 論文定義，累積器的起點設為生成元 $\omega$。$L_1(X)$ 是針對該點的 Lagrange 基底，滿足：
        </p>
        <ul>
            <li>$L_1(\omega) = 1$ （起點）</li>
            <li>$L_1(\omega^i) = 0$ for $i \neq 1$ （其他點）</li>
        </ul>
        <p>
            因此 $L_1(X)(z(X) - 1) = 0$ 在 $H$ 上成立，等價於強制 $z(\omega) = 1$（grand product 的起始條件）。
        </p>

        <h4>3.4.5 Quotient Polynomial: $t(X)$</h4>
        <p>
            將上述三個約束線性組合後，我們定義 <strong>quotient polynomial</strong>：
        </p>
        <p style="text-align: center;">
            $$
            t(X) := \frac{\text{Gate}(X) + \alpha \cdot \text{Perm}(X) + \alpha^2 L_1(X)(z(X) - 1)}{Z_H(X)}
            $$
        </p>
        <p>
            這個多項式的存在性與可計算性，是 PLONK soundness 的關鍵：
        </p>
        <ul>
            <li>如果 witness 合法，則分子在 $H$ 上恆為 0 → $t(X)$ 是有限度數的多項式</li>
            <li>如果 witness 非法，則至少有一個 $X \in H$ 使分子非零 → $t(X)$ 在該點有極點（非多項式）</li>
        </ul>
        <p>
            在 <strong>Round 3</strong>，Prover 會計算並承諾 $t(X)$（實際上拆分為 $t_{\text{lo}}, t_{\text{mid}}, t_{\text{hi}}$），
            並在後續 rounds 中證明其在隨機挑戰點 $\zeta$ 的評估值正確。
        </p>

        <h4>3.4.6 與後續章節的連結</h4>
        <p>
            這個核心 identity 串聯了整個 PLONK 協定的數學結構：
        </p>
        <ul>
            <li><strong>第 4 章</strong>：介紹 KZG polynomial commitment，用於承諾與開放所有多項式</li>
            <li><strong>第 5 章</strong>：詳細推導 $\text{Perm}(X)$ 與 $z(X)$ 的構造</li>
            <li><strong>第 6 章</strong>：說明 Constraint System 如何編碼為 Selector 多項式</li>
            <li><strong>第 7 章</strong>：將上述 identity 轉換為 protocol 的各個 rounds</li>
            <li><strong>第 8 章</strong>：完整的 Prover 演算法，包括如何計算 $t(X)$ 並生成證明</li>
            <li><strong>第 9 章</strong>：Verifier 如何驗證這個 identity 在隨機點 $\zeta$ 處成立</li>
        </ul>


        <h3>3.5 角色與步驟對照表</h3>
        <ul>
            <li><strong>Setup</strong>：產生 SRS <span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="19" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-texatom texclass="ORD"><mjx-mi class="mjx-ss"><mjx-c class="mjx-c1D5CC TEX-SS"></mjx-c><mjx-c class="mjx-c1D5CB TEX-SS"></mjx-c><mjx-c class="mjx-c1D5CC TEX-SS"></mjx-c></mjx-mi></mjx-texatom></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow data-mjx-texclass="ORD"><mi mathvariant="sans-serif">srs</mi></mrow></math></mjx-assistive-mml></mjx-container></span>。</li>
            <li><strong>Designer</strong>：輸出 <span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="20" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mo class="mjx-n"><mjx-c class="mjx-c5B"></mjx-c></mjx-mo><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D45E TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.014em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D43F TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub><mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c5D"></mjx-c></mjx-mo><mjx-script style="vertical-align: -0.15em;"><mjx-mn class="mjx-n" size="s"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="2"><mjx-c class="mjx-c5B"></mjx-c></mjx-mo><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D45E TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.014em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D445 TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub><mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c5D"></mjx-c></mjx-mo><mjx-script style="vertical-align: -0.15em;"><mjx-mn class="mjx-n" size="s"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="2"><mjx-c class="mjx-c2026"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="2"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="2"><mjx-c class="mjx-c5B"></mjx-c></mjx-mo><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D446 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.032em;"><mjx-texatom size="s" texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D70E TEX-I"></mjx-c></mjx-mi><mjx-mn class="mjx-n"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-texatom></mjx-script></mjx-msub><mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c5D"></mjx-c></mjx-mo><mjx-script style="vertical-align: -0.15em;"><mjx-mn class="mjx-n" size="s"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="2"><mjx-c class="mjx-c5B"></mjx-c></mjx-mo><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D446 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.032em;"><mjx-texatom size="s" texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D70E TEX-I"></mjx-c></mjx-mi><mjx-mn class="mjx-n"><mjx-c class="mjx-c32"></mjx-c></mjx-mn></mjx-texatom></mjx-script></mjx-msub><mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c5D"></mjx-c></mjx-mo><mjx-script style="vertical-align: -0.15em;"><mjx-mn class="mjx-n" size="s"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="2"><mjx-c class="mjx-c5B"></mjx-c></mjx-mo><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D446 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.032em;"><mjx-texatom size="s" texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D70E TEX-I"></mjx-c></mjx-mi><mjx-mn class="mjx-n"><mjx-c class="mjx-c33"></mjx-c></mjx-mn></mjx-texatom></mjx-script></mjx-msub><mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c5D"></mjx-c></mjx-mo><mjx-script style="vertical-align: -0.15em;"><mjx-mn class="mjx-n" size="s"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-script></mjx-msub></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">[</mo><msub><mi>q</mi><mi>L</mi></msub><msub><mo stretchy="false">]</mo><mn>1</mn></msub><mo>,</mo><mo stretchy="false">[</mo><msub><mi>q</mi><mi>R</mi></msub><msub><mo stretchy="false">]</mo><mn>1</mn></msub><mo>,</mo><mo>…</mo><mo>,</mo><mo stretchy="false">[</mo><msub><mi>S</mi><mrow data-mjx-texclass="ORD"><mi>σ</mi><mn>1</mn></mrow></msub><msub><mo stretchy="false">]</mo><mn>1</mn></msub><mo>,</mo><mo stretchy="false">[</mo><msub><mi>S</mi><mrow data-mjx-texclass="ORD"><mi>σ</mi><mn>2</mn></mrow></msub><msub><mo stretchy="false">]</mo><mn>1</mn></msub><mo>,</mo><mo stretchy="false">[</mo><msub><mi>S</mi><mrow data-mjx-texclass="ORD"><mi>σ</mi><mn>3</mn></mrow></msub><msub><mo stretchy="false">]</mo><mn>1</mn></msub></math></mjx-assistive-mml></mjx-container></span>。</li>
            <li><strong>Prover</strong>：
                <ul>
                    <li>Round 1: Commit wires <mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="21" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44E TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="2"><mjx-c class="mjx-c1D44F TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="2"><mjx-c class="mjx-c1D450 TEX-I"></mjx-c></mjx-mi></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>a</mi><mo>,</mo><mi>b</mi><mo>,</mo><mi>c</mi></math></mjx-assistive-mml></mjx-container>。</li>
                    <li>Round 2: Commit permutation accumulator <mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="22" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D467 TEX-I"></mjx-c></mjx-mi></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>z</mi></math></mjx-assistive-mml></mjx-container>。</li>
                    <li>Round 3: Commit quotient parts <mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="23" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D461 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em;"><mjx-texatom size="s" texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D459 TEX-I"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D45C TEX-I"></mjx-c></mjx-mi></mjx-texatom></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-msub space="2"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D461 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em;"><mjx-texatom size="s" texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D45A TEX-I"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D456 TEX-I"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D451 TEX-I"></mjx-c></mjx-mi></mjx-texatom></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-msub space="2"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D461 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em;"><mjx-texatom size="s" texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c210E TEX-I"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D456 TEX-I"></mjx-c></mjx-mi></mjx-texatom></mjx-script></mjx-msub></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>t</mi><mrow data-mjx-texclass="ORD"><mi>l</mi><mi>o</mi></mrow></msub><mo>,</mo><msub><mi>t</mi><mrow data-mjx-texclass="ORD"><mi>m</mi><mi>i</mi><mi>d</mi></mrow></msub><mo>,</mo><msub><mi>t</mi><mrow data-mjx-texclass="ORD"><mi>h</mi><mi>i</mi></mrow></msub></math></mjx-assistive-mml></mjx-container>。</li>
                    <li>Round 4: Send evaluations <mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="24" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-texatom texclass="ORD"><mjx-mover><mjx-over style="padding-bottom: 0.105em; padding-left: 0.265em; margin-bottom: -0.544em;"><mjx-mo class="mjx-n" style="width: 0px; margin-left: -0.25em;"><mjx-c class="mjx-cAF"></mjx-c></mjx-mo></mjx-over><mjx-base style="padding-top: 0.001em;"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44E TEX-I"></mjx-c></mjx-mi></mjx-base></mjx-mover></mjx-texatom><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-texatom space="2" texclass="ORD"><mjx-mover><mjx-over style="padding-bottom: 0.105em; padding-left: 0.214em; margin-bottom: -0.544em;"><mjx-mo class="mjx-n" style="width: 0px; margin-left: -0.25em;"><mjx-c class="mjx-cAF"></mjx-c></mjx-mo></mjx-over><mjx-base><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44F TEX-I"></mjx-c></mjx-mi></mjx-base></mjx-mover></mjx-texatom><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-texatom space="2" texclass="ORD"><mjx-mover><mjx-over style="padding-bottom: 0.105em; padding-left: 0.272em; margin-bottom: -0.544em;"><mjx-mo class="mjx-n" style="width: 0px; margin-left: -0.25em;"><mjx-c class="mjx-cAF"></mjx-c></mjx-mo></mjx-over><mjx-base><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D450 TEX-I"></mjx-c></mjx-mi></mjx-base></mjx-mover></mjx-texatom><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="2"><mjx-c class="mjx-c2026"></mjx-c></mjx-mo></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow data-mjx-texclass="ORD"><mover><mi>a</mi><mo stretchy="false">¯</mo></mover></mrow><mo>,</mo><mrow data-mjx-texclass="ORD"><mover><mi>b</mi><mo stretchy="false">¯</mo></mover></mrow><mo>,</mo><mrow data-mjx-texclass="ORD"><mover><mi>c</mi><mo stretchy="false">¯</mo></mover></mrow><mo>,</mo><mo>…</mo></math></mjx-assistive-mml></mjx-container>。</li>
                    <li>Round 5: Send linearization proof <mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="25" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44A TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.104em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D467 TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-msub space="2"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44A TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.104em;"><mjx-texatom size="s" texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D467 TEX-I"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D714 TEX-I"></mjx-c></mjx-mi></mjx-texatom></mjx-script></mjx-msub></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>W</mi><mi>z</mi></msub><mo>,</mo><msub><mi>W</mi><mrow data-mjx-texclass="ORD"><mi>z</mi><mi>ω</mi></mrow></msub></math></mjx-assistive-mml></mjx-container>。</li>
                </ul>
            </li>
            <li><strong>Verifier</strong>：重建挑戰值，執行配對驗證。</li>
        </ul>

        <h3>3.4 通用 SRS 與更換電路的實際流程</h3>
        <p>
            PLONK 的「通用 SRS」並不是什麼都不用管，而是：同一份 SRS 可以支援所有「多項式次數不超過某個上限」的電路。換電路時，只需要重新做「電路預處理」，不需要重新跑一次昂貴的 MPC setup。
            可以把整個過程拆成兩個層次：
        </p>
        <p><strong>（1）一次性的 Universal Setup（只做一次）</strong></p>
        <ul>
            <li>在多方儀式中選出一個隨機秘密值 <mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="26" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D465 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c2208"></mjx-c></mjx-mo><mjx-texatom space="4" texclass="ORD"><mjx-mi class="mjx-ds mjx-b"><mjx-c class="mjx-c1D53D TEX-A"></mjx-c></mjx-mi></mjx-texatom></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>x</mi><mo>∈</mo><mrow data-mjx-texclass="ORD"><mi mathvariant="double-struck">F</mi></mrow></math></mjx-assistive-mml></mjx-container>，建立 monomial SRS：
            <mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="27" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mo class="mjx-n"><mjx-c class="mjx-c5B"></mjx-c></mjx-mo><mjx-mn class="mjx-n"><mjx-c class="mjx-c31"></mjx-c></mjx-mn><mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c5D"></mjx-c></mjx-mo><mjx-script style="vertical-align: -0.15em;"><mjx-mn class="mjx-n" size="s"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="2"><mjx-c class="mjx-c5B"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D465 TEX-I"></mjx-c></mjx-mi><mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c5D"></mjx-c></mjx-mo><mjx-script style="vertical-align: -0.15em;"><mjx-mn class="mjx-n" size="s"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="2"><mjx-c class="mjx-c2026"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="2"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="2"><mjx-c class="mjx-c5B"></mjx-c></mjx-mo><mjx-msup><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D465 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: 0.363em;"><mjx-texatom size="s" texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D451 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c2212"></mjx-c></mjx-mo><mjx-mn class="mjx-n"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-texatom></mjx-script></mjx-msup><mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c5D"></mjx-c></mjx-mo><mjx-script style="vertical-align: -0.15em;"><mjx-mn class="mjx-n" size="s"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="2"><mjx-c class="mjx-c5B"></mjx-c></mjx-mo><mjx-mn class="mjx-n"><mjx-c class="mjx-c31"></mjx-c></mjx-mn><mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c5D"></mjx-c></mjx-mo><mjx-script style="vertical-align: -0.15em;"><mjx-mn class="mjx-n" size="s"><mjx-c class="mjx-c32"></mjx-c></mjx-mn></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="2"><mjx-c class="mjx-c5B"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D465 TEX-I"></mjx-c></mjx-mi><mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c5D"></mjx-c></mjx-mo><mjx-script style="vertical-align: -0.15em;"><mjx-mn class="mjx-n" size="s"><mjx-c class="mjx-c32"></mjx-c></mjx-mn></mjx-script></mjx-msub></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">[</mo><mn>1</mn><msub><mo stretchy="false">]</mo><mn>1</mn></msub><mo>,</mo><mo stretchy="false">[</mo><mi>x</mi><msub><mo stretchy="false">]</mo><mn>1</mn></msub><mo>,</mo><mo>…</mo><mo>,</mo><mo stretchy="false">[</mo><msup><mi>x</mi><mrow data-mjx-texclass="ORD"><mi>d</mi><mo>−</mo><mn>1</mn></mrow></msup><msub><mo stretchy="false">]</mo><mn>1</mn></msub><mo>,</mo><mo stretchy="false">[</mo><mn>1</mn><msub><mo stretchy="false">]</mo><mn>2</mn></msub><mo>,</mo><mo stretchy="false">[</mo><mi>x</mi><msub><mo stretchy="false">]</mo><mn>2</mn></msub></math></mjx-assistive-mml></mjx-container>。</li>
            <li>這裡的 <mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="28" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D451 TEX-I"></mjx-c></mjx-mi></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>d</mi></math></mjx-assistive-mml></mjx-container> 對應「最大支援 degree」，也就是你想支援的最大電路大小。之後所有電路裡出現的多項式（wire、多項式約束、permutation 等）都必須是 degree &lt; <mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="29" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D451 TEX-I"></mjx-c></mjx-mi></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>d</mi></math></mjx-assistive-mml></mjx-container> 才能用這份 SRS 承諾。</li>
        </ul>
        <p><strong>（2）針對每一個電路 <mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="30" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-texatom texclass="ORD"><mjx-mi class="mjx-cal mjx-i"><mjx-c class="mjx-c43 TEX-C"></mjx-c></mjx-mi></mjx-texatom></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow data-mjx-texclass="ORD"><mi data-mjx-variant="-tex-calligraphic" mathvariant="script">C</mi></mrow></math></mjx-assistive-mml></mjx-container> 的預處理（可以想成「編譯電路」）</strong></p>
        <ul>
            <li>對於每一個具體電路 <mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="31" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-texatom texclass="ORD"><mjx-mi class="mjx-cal mjx-i"><mjx-c class="mjx-c43 TEX-C"></mjx-c></mjx-mi></mjx-texatom></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow data-mjx-texclass="ORD"><mi data-mjx-variant="-tex-calligraphic" mathvariant="script">C</mi></mrow></math></mjx-assistive-mml></mjx-container>：
                <ul>
                    <li>先把電路轉成 PLONK 的 constraint system，產生對應的 selector 多項式 <mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="32" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D45E TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.014em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D43F TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-msub space="2"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D45E TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.014em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D445 TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-msub space="2"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D45E TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.014em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D442 TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-msub space="2"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D45E TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.014em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D440 TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-msub space="2"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D45E TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.014em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D436 TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>q</mi><mi>L</mi></msub><mo>,</mo><msub><mi>q</mi><mi>R</mi></msub><mo>,</mo><msub><mi>q</mi><mi>O</mi></msub><mo>,</mo><msub><mi>q</mi><mi>M</mi></msub><mo>,</mo><msub><mi>q</mi><mi>C</mi></msub></math></mjx-assistive-mml></mjx-container>，以及 permutation 多項式 <mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="33" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D446 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.032em;"><mjx-texatom size="s" texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D70E TEX-I"></mjx-c></mjx-mi><mjx-mn class="mjx-n"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-texatom></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-msub space="2"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D446 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.032em;"><mjx-texatom size="s" texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D70E TEX-I"></mjx-c></mjx-mi><mjx-mn class="mjx-n"><mjx-c class="mjx-c32"></mjx-c></mjx-mn></mjx-texatom></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-msub space="2"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D446 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.032em;"><mjx-texatom size="s" texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D70E TEX-I"></mjx-c></mjx-mi><mjx-mn class="mjx-n"><mjx-c class="mjx-c33"></mjx-c></mjx-mn></mjx-texatom></mjx-script></mjx-msub></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>S</mi><mrow data-mjx-texclass="ORD"><mi>σ</mi><mn>1</mn></mrow></msub><mo>,</mo><msub><mi>S</mi><mrow data-mjx-texclass="ORD"><mi>σ</mi><mn>2</mn></mrow></msub><mo>,</mo><msub><mi>S</mi><mrow data-mjx-texclass="ORD"><mi>σ</mi><mn>3</mn></mrow></msub></math></mjx-assistive-mml></mjx-container>。</li>
                    <li>確認這些多項式的 degree 都小於當初 setup 設的上限 <mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="34" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D451 TEX-I"></mjx-c></mjx-mi></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>d</mi></math></mjx-assistive-mml></mjx-container>。</li>
                    <li>用同一份 SRS 計算它們的 KZG 承諾，得到：
                    <mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="35" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mo class="mjx-n"><mjx-c class="mjx-c5B"></mjx-c></mjx-mo><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D45E TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.014em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D43F TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub><mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c5D"></mjx-c></mjx-mo><mjx-script style="vertical-align: -0.15em;"><mjx-mn class="mjx-n" size="s"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="2"><mjx-c class="mjx-c5B"></mjx-c></mjx-mo><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D45E TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.014em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D445 TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub><mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c5D"></mjx-c></mjx-mo><mjx-script style="vertical-align: -0.15em;"><mjx-mn class="mjx-n" size="s"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="2"><mjx-c class="mjx-c5B"></mjx-c></mjx-mo><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D45E TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.014em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D442 TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub><mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c5D"></mjx-c></mjx-mo><mjx-script style="vertical-align: -0.15em;"><mjx-mn class="mjx-n" size="s"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="2"><mjx-c class="mjx-c5B"></mjx-c></mjx-mo><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D45E TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.014em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D440 TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub><mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c5D"></mjx-c></mjx-mo><mjx-script style="vertical-align: -0.15em;"><mjx-mn class="mjx-n" size="s"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="2"><mjx-c class="mjx-c5B"></mjx-c></mjx-mo><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D45E TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.014em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D436 TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub><mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c5D"></mjx-c></mjx-mo><mjx-script style="vertical-align: -0.15em;"><mjx-mn class="mjx-n" size="s"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="2"><mjx-c class="mjx-c5B"></mjx-c></mjx-mo><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D446 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.032em;"><mjx-texatom size="s" texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D70E TEX-I"></mjx-c></mjx-mi><mjx-mn class="mjx-n"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-texatom></mjx-script></mjx-msub><mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c5D"></mjx-c></mjx-mo><mjx-script style="vertical-align: -0.15em;"><mjx-mn class="mjx-n" size="s"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="2"><mjx-c class="mjx-c5B"></mjx-c></mjx-mo><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D446 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.032em;"><mjx-texatom size="s" texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D70E TEX-I"></mjx-c></mjx-mi><mjx-mn class="mjx-n"><mjx-c class="mjx-c32"></mjx-c></mjx-mn></mjx-texatom></mjx-script></mjx-msub><mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c5D"></mjx-c></mjx-mo><mjx-script style="vertical-align: -0.15em;"><mjx-mn class="mjx-n" size="s"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="2"><mjx-c class="mjx-c5B"></mjx-c></mjx-mo><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D446 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.032em;"><mjx-texatom size="s" texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D70E TEX-I"></mjx-c></mjx-mi><mjx-mn class="mjx-n"><mjx-c class="mjx-c33"></mjx-c></mjx-mn></mjx-texatom></mjx-script></mjx-msub><mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c5D"></mjx-c></mjx-mo><mjx-script style="vertical-align: -0.15em;"><mjx-mn class="mjx-n" size="s"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-script></mjx-msub></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">[</mo><msub><mi>q</mi><mi>L</mi></msub><msub><mo stretchy="false">]</mo><mn>1</mn></msub><mo>,</mo><mo stretchy="false">[</mo><msub><mi>q</mi><mi>R</mi></msub><msub><mo stretchy="false">]</mo><mn>1</mn></msub><mo>,</mo><mo stretchy="false">[</mo><msub><mi>q</mi><mi>O</mi></msub><msub><mo stretchy="false">]</mo><mn>1</mn></msub><mo>,</mo><mo stretchy="false">[</mo><msub><mi>q</mi><mi>M</mi></msub><msub><mo stretchy="false">]</mo><mn>1</mn></msub><mo>,</mo><mo stretchy="false">[</mo><msub><mi>q</mi><mi>C</mi></msub><msub><mo stretchy="false">]</mo><mn>1</mn></msub><mo>,</mo><mo stretchy="false">[</mo><msub><mi>S</mi><mrow data-mjx-texclass="ORD"><mi>σ</mi><mn>1</mn></mrow></msub><msub><mo stretchy="false">]</mo><mn>1</mn></msub><mo>,</mo><mo stretchy="false">[</mo><msub><mi>S</mi><mrow data-mjx-texclass="ORD"><mi>σ</mi><mn>2</mn></mrow></msub><msub><mo stretchy="false">]</mo><mn>1</mn></msub><mo>,</mo><mo stretchy="false">[</mo><msub><mi>S</mi><mrow data-mjx-texclass="ORD"><mi>σ</mi><mn>3</mn></mrow></msub><msub><mo stretchy="false">]</mo><mn>1</mn></msub></math></mjx-assistive-mml></mjx-container>。</li>
                    <li>把這些承諾加上一些電路尺寸、根 <mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="36" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D714 TEX-I"></mjx-c></mjx-mi></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>ω</mi></math></mjx-assistive-mml></mjx-container>、coset 因子 <mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="37" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D458 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em;"><mjx-mn class="mjx-n" size="s"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-msub space="2"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D458 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em;"><mjx-mn class="mjx-n" size="s"><mjx-c class="mjx-c32"></mjx-c></mjx-mn></mjx-script></mjx-msub></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>k</mi><mn>1</mn></msub><mo>,</mo><msub><mi>k</mi><mn>2</mn></msub></math></mjx-assistive-mml></mjx-container> 等共同參數，打包成「這個電路專用的 Verification Key (VK)」。</li>
                </ul>
            </li>
        </ul>
        <p>
            這樣，換一個電路時，實際上發生的只有：
            </p><ol>
                <li>設計新的算術電路 <mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="38" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-msup><mjx-texatom texclass="ORD"><mjx-mi class="mjx-cal mjx-i"><mjx-c class="mjx-c43 TEX-C"></mjx-c></mjx-mi></mjx-texatom><mjx-script style="vertical-align: 0.363em;"><mjx-mo class="mjx-var" size="s"><mjx-c class="mjx-c2032"></mjx-c></mjx-mo></mjx-script></mjx-msup></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><msup><mrow data-mjx-texclass="ORD"><mi data-mjx-variant="-tex-calligraphic" mathvariant="script">C</mi></mrow><mo data-mjx-alternate="1">′</mo></msup></math></mjx-assistive-mml></mjx-container>（gate 數不要超過當初 SRS 的上限）。</li>
                <li>重新生成新的 selector/permutation 多項式。</li>
                <li>用同一份 <mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="39" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-texatom texclass="ORD"><mjx-mi class="mjx-ss"><mjx-c class="mjx-c1D5CC TEX-SS"></mjx-c><mjx-c class="mjx-c1D5CB TEX-SS"></mjx-c><mjx-c class="mjx-c1D5CC TEX-SS"></mjx-c></mjx-mi></mjx-texatom></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow data-mjx-texclass="ORD"><mi mathvariant="sans-serif">srs</mi></mrow></math></mjx-assistive-mml></mjx-container> 算出新的承諾，得到新的 <mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="40" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-msub><mjx-mtext class="mjx-n"><mjx-c class="mjx-c56"></mjx-c><mjx-c class="mjx-c4B"></mjx-c></mjx-mtext><mjx-script style="vertical-align: -0.15em;"><mjx-texatom size="s" texclass="ORD"><mjx-msup><mjx-texatom texclass="ORD"><mjx-mi class="mjx-cal mjx-i"><mjx-c class="mjx-c43 TEX-C"></mjx-c></mjx-mi></mjx-texatom><mjx-script style="vertical-align: 0.289em;"><mjx-mo class="mjx-var" size="s"><mjx-c class="mjx-c2032"></mjx-c></mjx-mo></mjx-script></mjx-msup></mjx-texatom></mjx-script></mjx-msub></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mtext>VK</mtext><mrow data-mjx-texclass="ORD"><msup><mrow data-mjx-texclass="ORD"><mi data-mjx-variant="-tex-calligraphic" mathvariant="script">C</mi></mrow><mo data-mjx-alternate="1">′</mo></msup></mrow></msub></math></mjx-assistive-mml></mjx-container>。</li>
                <li>Prover 在產生證明時，使用「舊的 SRS ＋ 新電路的 VK」來跑 PLONK 的 5 個 round。</li>
                <li>Verifier 在驗證時，只要選對「這個 statement 對應的 VK」，但 SRS 不用換。</li>
            </ol>
            因此，一個系統只要做一次通用的 MPC setup（生成 SRS），之後可以不斷「上新電路」，每個電路只需要多一份 VK，不用每次重來一次 setup 儀式。這就是「universal SRS」在實務上的意義。
        <p></p>
    </section>

    <section id="math">
        <h2>4. 數學與建模基礎 (Math Foundation)</h2>

        <h3>4.1 有限域、群與配對</h3>
        <p>
            PLONK 運作在有限域 <span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="41" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-texatom texclass="ORD"><mjx-mi class="mjx-ds mjx-b"><mjx-c class="mjx-c1D53D TEX-A"></mjx-c></mjx-mi></mjx-texatom></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow data-mjx-texclass="ORD"><mi mathvariant="double-struck">F</mi></mrow></math></mjx-assistive-mml></mjx-container></span> 上。使用雙線性配對群 <span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="42" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D452 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3A"></mjx-c></mjx-mo><mjx-msub space="4"><mjx-texatom texclass="ORD"><mjx-mi class="mjx-ds mjx-b"><mjx-c class="mjx-c1D53E TEX-A"></mjx-c></mjx-mi></mjx-texatom><mjx-script style="vertical-align: -0.15em;"><mjx-mn class="mjx-n" size="s"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-script></mjx-msub><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-cD7"></mjx-c></mjx-mo><mjx-msub space="3"><mjx-texatom texclass="ORD"><mjx-mi class="mjx-ds mjx-b"><mjx-c class="mjx-c1D53E TEX-A"></mjx-c></mjx-mi></mjx-texatom><mjx-script style="vertical-align: -0.15em;"><mjx-mn class="mjx-n" size="s"><mjx-c class="mjx-c32"></mjx-c></mjx-mn></mjx-script></mjx-msub><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c2192"></mjx-c></mjx-mo><mjx-msub space="4"><mjx-texatom texclass="ORD"><mjx-mi class="mjx-ds mjx-b"><mjx-c class="mjx-c1D53E TEX-A"></mjx-c></mjx-mi></mjx-texatom><mjx-script style="vertical-align: -0.15em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D447 TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>e</mi><mo>:</mo><msub><mrow data-mjx-texclass="ORD"><mi mathvariant="double-struck">G</mi></mrow><mn>1</mn></msub><mo>×</mo><msub><mrow data-mjx-texclass="ORD"><mi mathvariant="double-struck">G</mi></mrow><mn>2</mn></msub><mo accent="false" stretchy="false">→</mo><msub><mrow data-mjx-texclass="ORD"><mi mathvariant="double-struck">G</mi></mrow><mi>T</mi></msub></math></mjx-assistive-mml></mjx-container></span>，其中 <span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="43" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-msub><mjx-texatom texclass="ORD"><mjx-mi class="mjx-ds mjx-b"><mjx-c class="mjx-c1D53E TEX-A"></mjx-c></mjx-mi></mjx-texatom><mjx-script style="vertical-align: -0.15em;"><mjx-mn class="mjx-n" size="s"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-msub space="2"><mjx-texatom texclass="ORD"><mjx-mi class="mjx-ds mjx-b"><mjx-c class="mjx-c1D53E TEX-A"></mjx-c></mjx-mi></mjx-texatom><mjx-script style="vertical-align: -0.15em;"><mjx-mn class="mjx-n" size="s"><mjx-c class="mjx-c32"></mjx-c></mjx-mn></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-msub space="2"><mjx-texatom texclass="ORD"><mjx-mi class="mjx-ds mjx-b"><mjx-c class="mjx-c1D53E TEX-A"></mjx-c></mjx-mi></mjx-texatom><mjx-script style="vertical-align: -0.15em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D447 TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mrow data-mjx-texclass="ORD"><mi mathvariant="double-struck">G</mi></mrow><mn>1</mn></msub><mo>,</mo><msub><mrow data-mjx-texclass="ORD"><mi mathvariant="double-struck">G</mi></mrow><mn>2</mn></msub><mo>,</mo><msub><mrow data-mjx-texclass="ORD"><mi mathvariant="double-struck">G</mi></mrow><mi>T</mi></msub></math></mjx-assistive-mml></mjx-container></span> 為階數為質數 <span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="44" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D45D TEX-I"></mjx-c></mjx-mi></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>p</mi></math></mjx-assistive-mml></mjx-container></span> 的群。配對函數 <span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="45" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D452 TEX-I"></mjx-c></mjx-mi></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>e</mi></math></mjx-assistive-mml></mjx-container></span> 具有雙線性性質，是驗證多項式乘法關係的基礎。
        </p>

        <h3>4.2 乘法子群與 Lagrange 基底 (核心代數結構)</h3>

        <p>
            PLONK 不在任意的點上定義多項式，而是精心選擇了一個<strong>乘法子群 (Multiplicative Subgroup)</strong> 作為定義域。這種結構設計同時解決了 Prover 的生成速度與 Verifier 的驗證速度問題。
        </p>

        <h4>4.2.1 乘法子群 $H$ 與 FFT 加速</h4>
        <div class="definition-box">
            <p><strong>定義：</strong></p>
            <p>
                選擇一個階數為 $n$ 的子群 $H = \{1, \omega, \omega^2, \ldots, \omega^{n-1}\} \subset \mathbb{F}^*$，其中 $\omega$ 是 $n$-th primitive root of unity（滿足 $\omega^n = 1$）。
            </p>
        </div>
        <p><strong>設計動機：</strong></p>
        <ul>
            <li><strong>FFT 加速 ($O(n \log n)$)：</strong>
                在一般點集上進行多項式乘法或插值需要 $O(n^2)$ 的時間。但因為 $H$ 中的元素具有對稱性（例如 $x$ 與 $-x$ 成對出現），我們可以使用 <strong>快速傅立葉變換 (FFT)</strong> 將複雜度降至 $O(n \log n)$。這是 Prover 能夠在數十秒內處理百萬閘電路的關鍵。
            </li>
            <li><strong>自然的「旋轉」操作 (Rotation)：</strong>
                在 $H$ 上，要移動到「下一個位置」只需要乘以 $\omega$。
                如果 $X$ 對應第 $i$ 個閘，則 $\omega X$ 對應第 $i+1$ 個閘。
                這讓 Permutation Check 中的 $z(\omega X)$ 關係變得極其簡潔。
            </li>
        </ul>

        <h4>4.2.2 Lagrange 基底 $\{L_i(X)\}$</h4>
        <p>
            我們使用 Lagrange 基底來將「向量形式 (Vector form)」轉換為「多項式形式 (Polynomial form)」。
        </p>
        <p>
            定義 $\{L_i(X)\}_{i=1}^n$ 為一組多項式，滿足 Kronecker delta 性質：
            $$L_i(\omega^j) = \delta_{ij} = \begin{cases} 1 & \text{if } i=j \\ 0 & \text{if } i \neq j \end{cases}$$
        </p>
        <p><strong>物理意義：</strong></p>
        <ul>
            <li>每個 $L_i(X)$ 就像是一個<strong>「開關」</strong>。它只在第 $i$ 個位置是「開 (1)」的，在其他所有位置都是「關 (0)」的。</li>
            <li>這讓我們可以輕鬆構造通過特定點的多項式。例如，若要構造 $P(\omega^1) = 5, P(\omega^2) = 3$，只需寫成 $P(X) = 5 \cdot L_1(X) + 3 \cdot L_2(X)$。</li>
        </ul>

        <h4>4.2.3 消失多項式 $Z_H(X)$ 的稀疏性</h4>
        <p>
            為了驗證約束在 $H$ 上所有點都成立，我們需要檢查多項式是否能被<strong>消失多項式 (Vanishing Polynomial)</strong> 整除。
        </p>
        <p>
            在乘法子群上，$Z_H(X)$ 有極其簡潔的形式：
            $$Z_H(X) = \prod_{h \in H} (X - h) = X^n - 1$$
        </p>
        <div class="highlight-box">
            <p><strong>Verifier 的優勢：</strong></p>
            <p>
                如果是在任意點集上，Verifier 計算 $Z_H(\zeta)$ 需要做 $n$ 次乘法。
                但在這裡，Verifier 只需要計算 $\zeta^n - 1$，這可以用 <strong>快速冪 (Exponentiation by squaring)</strong> 在 $O(\log n)$ 時間內完成。
                這保證了 PLONK 的驗證時間是<strong>常數級 (Succinct)</strong>，不隨電路大小線性增長。
            </p>
        </div>

        <h3>4.3 多項式承諾 (KZG PCS)</h3>
        <p>
            PLONK 使用 <strong>Kate-Zaverucha-Goldberg (KZG)</strong> 多項式承諾方案。
        </p>
        <ul>
            <li><strong>Commit</strong>: Prover 計算 <span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="53" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mo class="mjx-n"><mjx-c class="mjx-c5B"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D453 TEX-I"></mjx-c></mjx-mi><mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c5D"></mjx-c></mjx-mo><mjx-script style="vertical-align: -0.15em;"><mjx-mn class="mjx-n" size="s"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-script></mjx-msub><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="4"><mjx-c class="mjx-c1D453 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D465 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c22C5"></mjx-c></mjx-mo><mjx-msub space="3"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D43A TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em;"><mjx-mn class="mjx-n" size="s"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-script></mjx-msub></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">[</mo><mi>f</mi><msub><mo stretchy="false">]</mo><mn>1</mn></msub><mo>=</mo><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>⋅</mo><msub><mi>G</mi><mn>1</mn></msub></math></mjx-assistive-mml></mjx-container></span>。</li>
            <li><strong>Open</strong>: Prover 證明 <span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="54" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D453 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D467 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="4"><mjx-c class="mjx-c1D466 TEX-I"></mjx-c></mjx-mi></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>f</mi><mo stretchy="false">(</mo><mi>z</mi><mo stretchy="false">)</mo><mo>=</mo><mi>y</mi></math></mjx-assistive-mml></mjx-container></span>，產生證明 <span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="55" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D70B TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-mfrac space="4"><mjx-frac><mjx-num><mjx-nstrut></mjx-nstrut><mjx-mrow size="s"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D453 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44B TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-mo class="mjx-n"><mjx-c class="mjx-c2212"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D466 TEX-I"></mjx-c></mjx-mi></mjx-mrow></mjx-num><mjx-dbox><mjx-dtable><mjx-line></mjx-line><mjx-row><mjx-den><mjx-dstrut></mjx-dstrut><mjx-mrow size="s"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44B TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c2212"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D467 TEX-I"></mjx-c></mjx-mi></mjx-mrow></mjx-den></mjx-row></mjx-dtable></mjx-dbox></mjx-frac></mjx-mfrac></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>π</mi><mo>=</mo><mfrac><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>X</mi><mo stretchy="false">)</mo><mo>−</mo><mi>y</mi></mrow><mrow><mi>X</mi><mo>−</mo><mi>z</mi></mrow></mfrac></math></mjx-assistive-mml></mjx-container></span> 的承諾。</li>
            <li><strong>Verify</strong>: Verifier 透過配對檢查承諾的正確性。</li>
        </ul>
        <p>KZG 支援批次開啟 (batched opening)，這對減少 PLONK proof 大小至關重要。</p>

        <h3>4.4 Polynomial Protocol 與 Ranged Protocol</h3>
        <p>
            <strong>Polynomial Protocol</strong> 是一個抽象模型，Verifier 查詢 Prover 多項式在隨機點的評估值，並檢查多項式恆等式。
            <strong>Ranged Protocol</strong> 則處理如「對於所有 <span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="56" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D465 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c2208"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="4"><mjx-c class="mjx-c1D43B TEX-I"></mjx-c></mjx-mi></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>x</mi><mo>∈</mo><mi>H</mi></math></mjx-assistive-mml></mjx-container></span>，<span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="57" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D443 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D465 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-mn class="mjx-n" space="4"><mjx-c class="mjx-c30"></mjx-c></mjx-mn></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>P</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><mn>0</mn></math></mjx-assistive-mml></mjx-container></span>」這類約束。這在代數上等價於證明 <span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="58" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D443 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44B TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>P</mi><mo stretchy="false">(</mo><mi>X</mi><mo stretchy="false">)</mo></math></mjx-assistive-mml></mjx-container></span> 能被 <span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="59" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44D TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.04em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D43B TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44B TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>Z</mi><mi>H</mi></msub><mo stretchy="false">(</mo><mi>X</mi><mo stretchy="false">)</mo></math></mjx-assistive-mml></mjx-container></span> 整除。
        </p>
    </section>

    <section id="permutation">
        <h2>5. Permutation Argument</h2>

        <h3>5.1 單一多項式的 Permutation Check</h3>
        <p>
            PLONK 的核心創新在於其置換論證。基於 Bayer-Groth 的想法，若要證明兩個序列 <span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="60" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44E TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em;"><mjx-mn class="mjx-n" size="s"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="2"><mjx-c class="mjx-c2026"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="2"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-msub space="2"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44E TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D45B TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">(</mo><msub><mi>a</mi><mn>1</mn></msub><mo>,</mo><mo>…</mo><mo>,</mo><msub><mi>a</mi><mi>n</mi></msub><mo stretchy="false">)</mo></math></mjx-assistive-mml></mjx-container></span> 與 <span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="61" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44F TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em;"><mjx-mn class="mjx-n" size="s"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="2"><mjx-c class="mjx-c2026"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="2"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-msub space="2"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44F TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D45B TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">(</mo><msub><mi>b</mi><mn>1</mn></msub><mo>,</mo><mo>…</mo><mo>,</mo><msub><mi>b</mi><mi>n</mi></msub><mo stretchy="false">)</mo></math></mjx-assistive-mml></mjx-container></span> 是彼此的置換（即包含相同的元素集合），我們可以引入隨機數 <span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="62" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D6FD TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="2"><mjx-c class="mjx-c1D6FE TEX-I"></mjx-c></mjx-mi></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>β</mi><mo>,</mo><mi>γ</mi></math></mjx-assistive-mml></mjx-container></span>，並證明多項式乘積相等：
            <span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" display="true" tabindex="0" ctxtmenu_counter="63" style="font-size: 113.1%; position: relative;"><mjx-math display="true" class="MJX-TEX" aria-hidden="true" style="margin-left: 0px; margin-right: 0px;"><mjx-munderover><mjx-over style="padding-bottom: 0.192em; padding-left: 0.427em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D45B TEX-I"></mjx-c></mjx-mi></mjx-over><mjx-box><mjx-munder><mjx-row><mjx-base><mjx-mo class="mjx-lop"><mjx-c class="mjx-c220F TEX-S2"></mjx-c></mjx-mo></mjx-base></mjx-row><mjx-row><mjx-under style="padding-top: 0.167em; padding-left: 0.065em;"><mjx-texatom size="s" texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D456 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-mn class="mjx-n"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-texatom></mjx-under></mjx-row></mjx-munder></mjx-box></mjx-munderover><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44E TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D456 TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c2B"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="3"><mjx-c class="mjx-c1D6FD TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c22C5"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="3"><mjx-c class="mjx-c1D456 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c2B"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="3"><mjx-c class="mjx-c1D6FE TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-munderover space="4"><mjx-over style="padding-bottom: 0.192em; padding-left: 0.427em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D45B TEX-I"></mjx-c></mjx-mi></mjx-over><mjx-box><mjx-munder><mjx-row><mjx-base><mjx-mo class="mjx-lop"><mjx-c class="mjx-c220F TEX-S2"></mjx-c></mjx-mo></mjx-base></mjx-row><mjx-row><mjx-under style="padding-top: 0.167em; padding-left: 0.065em;"><mjx-texatom size="s" texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D456 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-mn class="mjx-n"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-texatom></mjx-under></mjx-row></mjx-munder></mjx-box></mjx-munderover><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44F TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D456 TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c2B"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="3"><mjx-c class="mjx-c1D6FD TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c22C5"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="3"><mjx-c class="mjx-c1D70E TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D456 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c2B"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="3"><mjx-c class="mjx-c1D6FE TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo></mjx-math><mjx-assistive-mml unselectable="on" display="block"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><munderover><mo data-mjx-texclass="OP">∏</mo><mrow data-mjx-texclass="ORD"><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><mo stretchy="false">(</mo><msub><mi>a</mi><mi>i</mi></msub><mo>+</mo><mi>β</mi><mo>⋅</mo><mi>i</mi><mo>+</mo><mi>γ</mi><mo stretchy="false">)</mo><mo>=</mo><munderover><mo data-mjx-texclass="OP">∏</mo><mrow data-mjx-texclass="ORD"><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><mo stretchy="false">(</mo><msub><mi>b</mi><mi>i</mi></msub><mo>+</mo><mi>β</mi><mo>⋅</mo><mi>σ</mi><mo stretchy="false">(</mo><mi>i</mi><mo stretchy="false">)</mo><mo>+</mo><mi>γ</mi><mo stretchy="false">)</mo></math></mjx-assistive-mml></mjx-container></span>
        </p>

<h4>5.1.1 Lemma：Grand Product 的正確性</h4>
        <p>
            在使用 Bayer-Groth 置換論證時，一個核心問題是：<strong>為什麼隨機挑戰值 $\beta, \gamma$ 能確保多項式乘積相等就代表序列是 permutation？</strong>
        </p>

        <div class="lemma-box">
            <p><strong>Lemma (Permutation Soundness)</strong></p>
            <p>
                設 $(a_1, \ldots, a_n), (b_1, \ldots, b_n) \in \mathbb{F}^n$ 為兩個序列，$\sigma : [n] \rightarrow [n]$ 為一個 permutation。
                對隨機選擇的 $\beta, \gamma \in \mathbb{F}$，若
                $$
                \prod_{i=1}^n (a_i + \beta \cdot i + \gamma) = \prod_{i=1}^n (b_i + \beta \cdot \sigma(i) + \gamma)
                $$
                則除了<strong>可忽略機率</strong>，序列 $(b_1, \ldots, b_n)$ 是 $(a_1, \ldots, a_n)$ 的 permutation。
            </p>
        </div>

        <p><strong>直覺解釋：</strong></p>
        <ul>
            <li><strong>多項式觀點：</strong>
                將上式視為關於 $\beta, \gamma$ 的二元多項式。左右兩邊分別定義了多項式 $F(\beta, \gamma)$ 和 $G(\beta, \gamma)$。
                若 $(b_1, \ldots, b_n)$ 不是 $(a_1, \ldots, a_n)$ 的 permutation，則 $F - G$ 是一個非零多項式。
            </li>
            <li><strong>Schwartz–Zippel Lemma：</strong>
                非零多項式在隨機點上評估為零的機率非常小。具體而言，對於總度數為 $d$ 的非零多項式，
                在有限域 $\mathbb{F}$ 上隨機選擇的點，該多項式為零的機率至多為 $d / |\mathbb{F}|$。
            </li>
            <li><strong>應用到 PLONK：</strong>
                在 PLONK 中，$|\mathbb{F}|$ 通常是 256-bit 的質數，而 $d \approx n$（電路大小）。
                因此，作弊者幾乎不可能「恰好」選到使得非 permutation 序列通過檢查的 $\beta, \gamma$。
            </li>
        </ul>

        <p><strong>為什麼要把 index 混入 $\beta \cdot i + \gamma$？</strong></p>
        <p>
            這是關鍵技巧！若不加入 index，僅檢查
            $$
            \prod_{i=1}^n (a_i + \gamma) = \prod_{i=1}^n (b_i + \gamma)
            $$
            則只能確保 $\{a_i\}$ 和 $\{b_i\}$ 的<strong>multiset（多重集合）</strong>相等，但無法追蹤「哪個位置對應哪個位置」。
        </p>
        <p>
            加入 $\beta \cdot i$ 後，每個元素被「標記」為 $(a_i + \beta \cdot i + \gamma)$，
            這樣不同位置的元素即使值相同，也會因為 index 不同而被區分開來。
            這正是 permutation argument 的核心：<strong>不僅要值相等，還要位置對應正確</strong>。
        </p>

        <div class="highlight-box">
            <p><strong>連結到 PLONK：</strong></p>
            <p>
                在 PLONK 的 permutation check 中（第 5.3 節），我們將三組 wire $(a, b, c)$ 串接成長度 $3n$ 的向量，
                並使用 coset shifts $(X, k_1 X, k_2 X)$ 來為不同 wire 組分配不同的「身份空間」。
                這樣，$\beta$ 和 $\gamma$ 的隨機性保證了只有真正滿足 copy constraints 的 witness 才能通過驗證。
            </p>
        </div>

        <h3>5.2 Grand Product 遞迴關係</h3>
        <p>
            PLONK 定義了一個累加多項式 <span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="64" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D467 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44B TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>z</mi><mo stretchy="false">(</mo><mi>X</mi><mo stretchy="false">)</mo></math></mjx-assistive-mml></mjx-container></span> 來追蹤上述乘積的過程。該過程分為以下步驟：
        </p>
        <ol>
            <li><strong>挑戰值生成</strong>：Verifier 發送隨機挑戰值 <span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="65" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D6FD TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="2"><mjx-c class="mjx-c1D6FE TEX-I"></mjx-c></mjx-mi></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>β</mi><mo>,</mo><mi>γ</mi></math></mjx-assistive-mml></mjx-container></span>。</li>
            <li><strong>建構 Shifted Polynomials</strong>：Prover 根據 challenge 構造 <span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="66" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-msup><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D453 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: 0.363em; margin-left: 0.053em;"><mjx-mo class="mjx-var" size="s"><mjx-c class="mjx-c2032"></mjx-c></mjx-mo></mjx-script></mjx-msup><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D465 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="4"><mjx-c class="mjx-c1D453 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D465 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c2B"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="3"><mjx-c class="mjx-c1D6FD TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c22C5"></mjx-c></mjx-mo><mjx-mtext class="mjx-n" space="3"><mjx-c class="mjx-c53"></mjx-c><mjx-c class="mjx-c49"></mjx-c><mjx-c class="mjx-c44"></mjx-c></mjx-mtext><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D465 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c2B"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="3"><mjx-c class="mjx-c1D6FE TEX-I"></mjx-c></mjx-mi></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><msup><mi>f</mi><mo data-mjx-alternate="1">′</mo></msup><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>+</mo><mi>β</mi><mo>⋅</mo><mtext>SID</mtext><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>+</mo><mi>γ</mi></math></mjx-assistive-mml></mjx-container></span> 與 <span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="67" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-msup><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D454 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: 0.363em;"><mjx-mo class="mjx-var" size="s"><mjx-c class="mjx-c2032"></mjx-c></mjx-mo></mjx-script></mjx-msup><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D465 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="4"><mjx-c class="mjx-c1D454 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D465 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c2B"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="3"><mjx-c class="mjx-c1D6FD TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c22C5"></mjx-c></mjx-mo><mjx-msub space="3"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D446 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.032em;"><mjx-texatom size="s" texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D70E TEX-I"></mjx-c></mjx-mi></mjx-texatom></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D465 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c2B"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="3"><mjx-c class="mjx-c1D6FE TEX-I"></mjx-c></mjx-mi></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><msup><mi>g</mi><mo data-mjx-alternate="1">′</mo></msup><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><mi>g</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>+</mo><mi>β</mi><mo>⋅</mo><msub><mi>S</mi><mrow data-mjx-texclass="ORD"><mi>σ</mi></mrow></msub><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>+</mo><mi>γ</mi></math></mjx-assistive-mml></mjx-container></span>。</li>
            <li><strong>定義 Accumulator</strong>：Prover 計算累加多項式 <span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="68" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D467 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44B TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>z</mi><mo stretchy="false">(</mo><mi>X</mi><mo stretchy="false">)</mo></math></mjx-assistive-mml></mjx-container></span>，使其滿足初始條件 <span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="69" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D467 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D454 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-mn class="mjx-n" space="4"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>z</mi><mo stretchy="false">(</mo><mi>g</mi><mo stretchy="false">)</mo><mo>=</mo><mn>1</mn></math></mjx-assistive-mml></mjx-container></span> 以及遞迴關係：
                <span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" display="true" tabindex="0" ctxtmenu_counter="70" style="font-size: 113.1%; position: relative;"><mjx-math display="true" class="MJX-TEX" aria-hidden="true" style="margin-left: 0px; margin-right: 0px;"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D467 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D714 TEX-I"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D465 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="4"><mjx-c class="mjx-c1D467 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D465 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c22C5"></mjx-c></mjx-mo><mjx-mfrac space="3"><mjx-frac type="d"><mjx-num><mjx-nstrut type="d"></mjx-nstrut><mjx-mrow><mjx-msup><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D453 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: 0.363em; margin-left: 0.053em;"><mjx-mo class="mjx-var" size="s"><mjx-c class="mjx-c2032"></mjx-c></mjx-mo></mjx-script></mjx-msup><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D465 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo></mjx-mrow></mjx-num><mjx-dbox><mjx-dtable><mjx-line type="d"></mjx-line><mjx-row><mjx-den><mjx-dstrut type="d"></mjx-dstrut><mjx-mrow><mjx-msup><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D454 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: 0.289em;"><mjx-mo class="mjx-var" size="s"><mjx-c class="mjx-c2032"></mjx-c></mjx-mo></mjx-script></mjx-msup><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D465 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo></mjx-mrow></mjx-den></mjx-row></mjx-dtable></mjx-dbox></mjx-frac></mjx-mfrac></mjx-math><mjx-assistive-mml unselectable="on" display="block"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>z</mi><mo stretchy="false">(</mo><mi>ω</mi><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><mi>z</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>⋅</mo><mfrac><mrow><msup><mi>f</mi><mo data-mjx-alternate="1">′</mo></msup><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><mrow><msup><mi>g</mi><mo data-mjx-alternate="1">′</mo></msup><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow></mfrac></math></mjx-assistive-mml></mjx-container></span>
                這確保了 <span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="71" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D467 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D465 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>z</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></math></mjx-assistive-mml></mjx-container></span> 累積了序列的比率，若最終 <span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="72" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D467 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-msup><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D454 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: 0.363em;"><mjx-texatom size="s" texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D45B TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c2B"></mjx-c></mjx-mo><mjx-mn class="mjx-n"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-texatom></mjx-script></mjx-msup><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-mn class="mjx-n" space="4"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>z</mi><mo stretchy="false">(</mo><msup><mi>g</mi><mrow data-mjx-texclass="ORD"><mi>n</mi><mo>+</mo><mn>1</mn></mrow></msup><mo stretchy="false">)</mo><mo>=</mo><mn>1</mn></math></mjx-assistive-mml></mjx-container></span>，則證明置換成立。
            </li>
            <li><strong>承諾與傳送</strong>：Prover 計算 <span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="73" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mo class="mjx-n"><mjx-c class="mjx-c5B"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D467 TEX-I"></mjx-c></mjx-mi><mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c5D"></mjx-c></mjx-mo><mjx-script style="vertical-align: -0.15em;"><mjx-mn class="mjx-n" size="s"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-script></mjx-msub></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">[</mo><mi>z</mi><msub><mo stretchy="false">]</mo><mn>1</mn></msub></math></mjx-assistive-mml></mjx-container></span> 並發送給 Verifier。</li>
            <li><strong>驗證檢查</strong>：Verifier 在協議後續步驟中檢查 <span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="74" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D43F TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em;"><mjx-mn class="mjx-n" size="s"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D465 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D467 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D465 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c2212"></mjx-c></mjx-mo><mjx-mn class="mjx-n" space="3"><mjx-c class="mjx-c31"></mjx-c></mjx-mn><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-mn class="mjx-n" space="4"><mjx-c class="mjx-c30"></mjx-c></mjx-mn></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>L</mi><mn>1</mn></msub><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo stretchy="false">(</mo><mi>z</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo><mo>=</mo><mn>0</mn></math></mjx-assistive-mml></mjx-container></span> (初始條件) 與 <span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="75" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D467 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D465 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-msup><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D453 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: 0.363em; margin-left: 0.053em;"><mjx-mo class="mjx-var" size="s"><mjx-c class="mjx-c2032"></mjx-c></mjx-mo></mjx-script></mjx-msup><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D465 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="4"><mjx-c class="mjx-c1D467 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D714 TEX-I"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D465 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-msup><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D454 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: 0.363em;"><mjx-mo class="mjx-var" size="s"><mjx-c class="mjx-c2032"></mjx-c></mjx-mo></mjx-script></mjx-msup><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D465 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>z</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><msup><mi>f</mi><mo data-mjx-alternate="1">′</mo></msup><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><mi>z</mi><mo stretchy="false">(</mo><mi>ω</mi><mi>x</mi><mo stretchy="false">)</mo><msup><mi>g</mi><mo data-mjx-alternate="1">′</mo></msup><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></math></mjx-assistive-mml></mjx-container></span> (遞迴關係)。</li>
        </ol>

<h4>5.2.1 從遞迴到多項式 Identity</h4>
        <p>
            在 5.2 節中，我們定義了 accumulator 多項式 $z(X)$ 的遞迴關係。
            現在我們要將這個「對所有 $X \in H$ 成立」的條件轉換為<strong>多項式整除條件</strong>，
            這正是 PLONK 將邏輯約束轉換為代數約束的關鍵步驟。
        </p>

        <h5>5.2.1.1 兩個 Ranged Constraints</h5>
        <p>
            Grand Product 的正確性要求以下兩個條件在乘法子群 $H = \{1, \omega, \ldots, \omega^{n-1}\}$ 上<strong>逐點成立</strong>：
        </p>

        <div class="formula-box">
            <p><strong>1. 邊界條件（Boundary Condition）：</strong></p>
            <p>
                $$
                \forall X \in H: \quad L_1(X) \cdot (z(X) - 1) = 0
                $$
            </p>
            <p>
                由於 $L_1(X)$ 是針對第一個索引 $\omega$ 的 Lagrange 基底（滿足 $L_1(\omega) = 1$），
                這個條件等價於強制 $z(\omega) = 1$。
            </p>
        </div>

        <div class="formula-box">
            <p><strong>2. 遞迴條件（Recursive Relation）：</strong></p>
            <p>
                首先定義 shifted polynomials（在第 5.2 節中已介紹）：
                $$
                \begin{aligned}
                f'(X) &:= (a(X) + \beta \cdot \text{SID}_1(X) + \gamma)(b(X) + \beta \cdot \text{SID}_2(X) + \gamma)(c(X) + \beta \cdot \text{SID}_3(X) + \gamma) \\
                g'(X) &:= (a(X) + \beta \cdot S_{\sigma_1}(X) + \gamma)(b(X) + \beta \cdot S_{\sigma_2}(X) + \gamma)(c(X) + \beta \cdot S_{\sigma_3}(X) + \gamma)
                \end{aligned}
                $$
                其中 $\text{SID}_i(X)$ 是 identity permutation 多項式，$S_{\sigma_i}(X)$ 是實際電路的 wiring permutation 多項式（詳見第 7 章）。
            </p>
            <p>
                則遞迴關係要求：
                $$
                \forall X \in H: \quad z(X) \cdot f'(X) = z(\omega X) \cdot g'(X)
                $$
                這確保了 $z(X)$ 累積了「identity permutation 乘積」與「actual permutation 乘積」的比率，
                若最終 $z(\omega^n) = 1$（循環回到起點），則兩個 permutation 相等。
            </p>
        </div>

        <h5>5.2.1.2 引入「差」多項式與 $Z_H$ 整除</h5>
        <p>
            定義 <strong>Permutation 多項式</strong>：
            $$
            \text{Perm}(X) := z(X) \cdot f'(X) - z(\omega X) \cdot g'(X)
            $$
        </p>
        <p>
            根據遞迴條件，我們要求：
            $$
            \forall X \in H: \quad \text{Perm}(X) = 0
            $$
        </p>

        <div class="key-insight-box">
            <p><strong>關鍵等價性（連回第 4.2 節）：</strong></p>
            <p>
                「多項式 $P(X)$ 在乘法子群 $H$ 上所有點為零」$\Longleftrightarrow$ 「$P(X)$ 被 domain 多項式 $Z_H(X)$ 整除」
            </p>
            <p>
                這是因為 $Z_H(X) = X^n - 1 = \prod_{h \in H}(X - h)$ 正好以 $H$ 的所有元素為根。
                因此：
                $$
                \text{Perm}(X) = 0 \;\forall X \in H \quad \Longleftrightarrow \quad Z_H(X) \mid \text{Perm}(X)
                $$
            </p>
        </div>

        <h5>5.2.1.3 連結到 Quotient Polynomial $t(X)$</h5>
        <p>
            在第 7 章和第 8 章中，我們將把三種約束（gate、permutation、boundary）線性組合成單一約束。
            使用隨機挑戰值 $\alpha$，定義：
            $$
            \text{Total}(X) := \text{Gate}(X) + \alpha \cdot \text{Perm}(X) + \alpha^2 L_1(X)(z(X) - 1)
            $$
        </p>
        <p>
            若所有約束都在 $H$ 上成立，則 $\text{Total}(X)$ 在 $H$ 上恆為 0，即：
            $$
            Z_H(X) \mid \text{Total}(X)
            $$
        </p>
        <p>
            這樣我們可以定義 <strong>quotient polynomial</strong>：
            $$
            t(X) := \frac{\text{Total}(X)}{Z_H(X)}
            $$
        </p>

        <div class="highlight-box">
            <p><strong>預告：</strong></p>
            <p>
                本節的 $\text{Perm}(X)$ 正是第 3.4 節「核心 Polynomial Identity」中的 Perm 項。
                在第 8 章 Round 3，Prover 會計算並承諾 $t(X)$（實際上拆分為 $t_{\text{lo}}, t_{\text{mid}}, t_{\text{hi}}$），
                並在後續 rounds 中證明其在隨機挑戰點 $\zeta$ 的評估值正確。
            </p>
            <p>
                這個「整除條件」就是 PLONK soundness 的數學基礎：
                若 witness 非法，則至少有一個約束在 $H$ 上不成立 → $t(X)$ 在該點有極點（非多項式） → 無法生成有效承諾。
            </p>
        </div>

        <h3>5.3 Extended Permutation 與 Copy Constraints</h3>
        <p>
            為了同時處理電路的三組 wire <span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="76" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44E TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44B TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="2"><mjx-c class="mjx-c1D44F TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44B TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="2"><mjx-c class="mjx-c1D450 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44B TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>a</mi><mo stretchy="false">(</mo><mi>X</mi><mo stretchy="false">)</mo><mo>,</mo><mi>b</mi><mo stretchy="false">(</mo><mi>X</mi><mo stretchy="false">)</mo><mo>,</mo><mi>c</mi><mo stretchy="false">(</mo><mi>X</mi><mo stretchy="false">)</mo></math></mjx-assistive-mml></mjx-container></span>，PLONK 將它們「串接」起來。但因為都在同一個域 <span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="77" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D43B TEX-I"></mjx-c></mjx-mi></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>H</mi></math></mjx-assistive-mml></mjx-container></span> 上定義，我們不能簡單串接，而是使用廣義位置索引（coset shifts）來區分不同 wire 的位置。
        </p>
        <p>
            具體做法是將多項式依照位置乘上二次非剩餘 (quadratic non-residues) <span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="78" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D458 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em;"><mjx-mn class="mjx-n" size="s"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-script></mjx-msub></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>k</mi><mn>1</mn></msub></math></mjx-assistive-mml></mjx-container></span> 或 <span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="79" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D458 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em;"><mjx-mn class="mjx-n" size="s"><mjx-c class="mjx-c32"></mjx-c></mjx-mn></mjx-script></mjx-msub></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>k</mi><mn>2</mn></msub></math></mjx-assistive-mml></mjx-container></span>。定義 <span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="80" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D446 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.032em;"><mjx-texatom size="s" texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D43C TEX-I"></mjx-c></mjx-mi><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D437 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em;"><mjx-mn class="mjx-n" size="s"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-script></mjx-msub></mjx-texatom></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D465 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="4"><mjx-c class="mjx-c1D465 TEX-I"></mjx-c></mjx-mi></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>S</mi><mrow data-mjx-texclass="ORD"><mi>I</mi><msub><mi>D</mi><mn>1</mn></msub></mrow></msub><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><mi>x</mi></math></mjx-assistive-mml></mjx-container></span>, <span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="81" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D446 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.032em;"><mjx-texatom size="s" texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D43C TEX-I"></mjx-c></mjx-mi><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D437 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em;"><mjx-mn class="mjx-n" size="s"><mjx-c class="mjx-c32"></mjx-c></mjx-mn></mjx-script></mjx-msub></mjx-texatom></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D465 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-msub space="4"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D458 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em;"><mjx-mn class="mjx-n" size="s"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-script></mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D465 TEX-I"></mjx-c></mjx-mi></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>S</mi><mrow data-mjx-texclass="ORD"><mi>I</mi><msub><mi>D</mi><mn>2</mn></msub></mrow></msub><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><msub><mi>k</mi><mn>1</mn></msub><mi>x</mi></math></mjx-assistive-mml></mjx-container></span>, <span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="82" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D446 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.032em;"><mjx-texatom size="s" texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D43C TEX-I"></mjx-c></mjx-mi><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D437 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em;"><mjx-mn class="mjx-n" size="s"><mjx-c class="mjx-c33"></mjx-c></mjx-mn></mjx-script></mjx-msub></mjx-texatom></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D465 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-msub space="4"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D458 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em;"><mjx-mn class="mjx-n" size="s"><mjx-c class="mjx-c32"></mjx-c></mjx-mn></mjx-script></mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D465 TEX-I"></mjx-c></mjx-mi></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>S</mi><mrow data-mjx-texclass="ORD"><mi>I</mi><msub><mi>D</mi><mn>3</mn></msub></mrow></msub><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><msub><mi>k</mi><mn>2</mn></msub><mi>x</mi></math></mjx-assistive-mml></mjx-container></span>。Permutation 多項式透過 <span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="83" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D70E TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D447 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.12em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D436 TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>σ</mi><mo stretchy="false">(</mo><msub><mi>T</mi><mi>C</mi></msub><mo stretchy="false">)</mo></math></mjx-assistive-mml></mjx-container></span> 連結相同 partition 內的節點，以檢驗 copy constraints。
        </p>
    </section>

    <!-- NEW SECTION: Setup -->
    <section id="setup">
<h3>5.4 設計動機：為什麼使用乘法子群與 Lagrange 基底</h3>
        <p>
            在介紹完 permutation argument 的數學細節後，讀者可能會問：<strong>為什麼 PLONK 一定要使用乘法子群 $H$ 和 Lagrange 基底？</strong>
            這不僅是技術選擇，更是整個協定架構的基石。
        </p>

        <h4>5.4.1 乘法子群的結構優勢</h4>

        <div class="definition-box">
            <p><strong>乘法子群 $H$：</strong></p>
            <p>
                $H = \{1, \omega, \omega^2, \ldots, \omega^{n-1}\} \subset \mathbb{F}$，其中 $\omega$ 是 $n$-th root of unity（$\omega^n = 1$）。
            </p>
        </div>

        <p><strong>關鍵性質 1：循環結構</strong></p>
        <ul>
            <li>映射 $X \mapsto \omega X$ 在 $H$ 上形成一個<strong>循環 permutation</strong>：
                $$
                1 \xrightarrow{\times \omega} \omega \xrightarrow{\times \omega} \omega^2 \xrightarrow{\times \omega} \cdots \xrightarrow{\times \omega} \omega^{n-1} \xrightarrow{\times \omega} 1
                $$
            </li>
            <li>這使得 Grand Product 的遞迴關係 $z(\omega X)$ 寫得非常自然，因為 $\omega X$ 正好是「下一個元素」。</li>
            <li>在多項式層級，$z(\omega X)$ 只需將 $z(X)$ 的係數做簡單的循環位移，無需複雜的插值計算。</li>
        </ul>

        <p><strong>關鍵性質 2：Domain 多項式的簡潔性</strong></p>
        <ul>
            <li>$Z_H(X) = X^n - 1$ 是一個極為簡單的多項式，其根恰好是 $H$ 的所有元素。</li>
            <li>這讓「在 $H$ 上的約束」可以直接轉換為「被 $Z_H(X)$ 整除」，避免了複雜的因式分解。</li>
            <li>在驗證時，只需檢查 $t(X) \cdot Z_H(X) = \text{Total}(X)$ 在隨機點 $\zeta$ 處成立即可（詳見第 9 章）。</li>
        </ul>

        <h4>5.4.2 Lagrange 基底的計算優勢</h4>

        <div class="definition-box">
            <p><strong>Lagrange 基底 $\{L_i(X)\}_{i=0}^{n-1}$：</strong></p>
            <p>
                滿足 $L_i(\omega^j) = \delta_{ij}$（Kronecker delta），即：
                $$
                L_i(\omega^j) = \begin{cases}
                1 & \text{if } j = i \\
                0 & \text{if } j \neq i
                \end{cases}
                $$
            </p>
        </div>

        <p><strong>關鍵優勢 1：簡化多項式定義</strong></p>
        <ul>
            <li>任何在 $H$ 上定義的向量 $(v_0, v_1, \ldots, v_{n-1})$ 都可以直接表示為多項式：
                $$
                f(X) = \sum_{i=0}^{n-1} v_i \cdot L_i(X)
                $$
                這樣 $f(\omega^i) = v_i$ 自動成立。
            </li>
            <li><strong>應用到 PLONK：</strong>
                <ul>
                    <li>Selector 多項式：$q_L(X) = \sum_i (q_L)_i \cdot L_i(X)$</li>
                    <li>Wire 多項式：$a(X) = \sum_i a_i \cdot L_i(X)$（其中 $a_i$ 是第 $i$ 個 gate 的左輸入值）</li>
                    <li>Permutation 多項式：$S_{\sigma_1}(X) = \sum_i \sigma^*(i) \cdot L_i(X)$</li>
                </ul>
                這避免了複雜的 Vandermonde 矩陣求逆運算。
            </li>
        </ul>

        <p><strong>關鍵優勢 2：FFT 加速</strong></p>
        <ul>
            <li>在乘法子群 $H$ 上，<strong>快速傅立葉變換（FFT）</strong>可以在 $O(n \log n)$ 時間內完成：
                <ul>
                    <li><strong>Evaluation（係數 → 點值）：</strong>將多項式 $f(X)$ 在 $H$ 上的所有評估值 $(f(1), f(\omega), \ldots, f(\omega^{n-1}))$ 一次性計算出來。</li>
                    <li><strong>Interpolation（點值 → 係數）：</strong>反向操作，從點值恢復多項式係數。</li>
                </ul>
            </li>
            <li><strong>PLONK 的 Prover 複雜度瓶頸：</strong>
                計算 $z(X), t(X)$ 等多項式時，需要大量的多項式乘法和評估。
                使用 FFT，這些操作可以在 $O(n \log n)$ 時間內完成，而非暴力計算的 $O(n^2)$。
            </li>
            <li><strong>連結到實作：</strong>
                這就是為什麼 PLONK 實作（如 arkworks、bellman）中大量使用 FFT domain 的原因。
                若使用任意點集，則無法使用 FFT，Prover 的計算成本將變得不可接受。
            </li>
        </ul>

        <h4>5.4.3 與後續章節的連結</h4>
        <div class="highlight-box">
            <p><strong>總結：乘法子群 + Lagrange 基底 = PLONK 的「計算引擎」</strong></p>
            <ul>
                <li><strong>第 4 章（KZG）：</strong>多項式承諾需要在任意點 $\zeta$ 處評估，但 Prover 內部計算仍在 $H$ 上完成，利用 FFT 加速。</li>
                <li><strong>第 5 章（本章）：</strong>Permutation argument 的遞迴關係依賴於 $H$ 的循環結構，$z(\omega X)$ 才能自然定義。</li>
                <li><strong>第 7 章（Constraint System）：</strong>Selector 和 Wire 多項式都使用 Lagrange 基底表示，直接從向量轉換到多項式。</li>
                <li><strong>第 8 章（Prover）：</strong>計算 $t(X)$ 時，先在 $H$ 上評估所有約束，再用 FFT 插值得到多項式，最後除以 $Z_H(X)$。</li>
                <li><strong>第 9 章（Verifier）：</strong>驗證時僅需在隨機點 $\zeta$ 處檢查，無需遍歷 $H$，因此驗證複雜度為 $O(1)$（加上一個 pairing）。</li>
            </ul>
        </div>

        <p class="note">
            <strong>實務提醒：</strong>
            在實際電路設計時，需要確保電路大小 $n$ 是 2 的冪次（如 $2^{20}, 2^{22}$），
            以便在常見的有限域（如 BN254 的 scalar field）上找到對應的 $n$-th root of unity。
            這也是為什麼 PLONK 電路通常會有「padding gates」來填充到最近的 2 的冪次。
        </p>

<style>
    .lemma-box {
        background-color: #e8f4f8;
        border-left: 4px solid #2196F3;
        padding: 15px;
        margin: 15px 0;
    }
    .formula-box {
        background-color: #f0f8ff;
        border-left: 4px solid #3498db;
        padding: 15px;
        margin: 15px 0;
    }
    .key-insight-box {
        background-color: #fff3e0;
        border-left: 4px solid #ff9800;
        padding: 15px;
        margin: 15px 0;
        font-weight: 500;
    }
    .highlight-box {
        background-color: #e8f5e9;
        border-left: 4px solid #4caf50;
        padding: 15px;
        margin: 15px 0;
    }
    .definition-box {
        background-color: #f3e5f5;
        border-left: 4px solid #9c27b0;
        padding: 15px;
        margin: 15px 0;
    }
    .note {
        background-color: #fce4ec;
        border-left: 4px solid #e91e63;
        padding: 10px;
        margin: 10px 0;
        font-style: italic;
    }
</style>

        <h2>6. 通用初始設定 (Universal Setup)</h2>
        
        <p>
            PLONK 協定的第一步是生成通用的結構參考字串（SRS）。
        </p>

        <h3>6.1 MPC 儀式與 Toxic Waste</h3>
        <p>
            Setup 過程通常透過多方計算（MPC）儀式進行，稱為 "Powers of Tau"。目標是生成一系列 <span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="84" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D70F TEX-I"></mjx-c></mjx-mi></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>τ</mi></math></mjx-assistive-mml></mjx-container></span> 的冪次加密值，同時確保沒有任何單一參與者知道 <span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="85" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D70F TEX-I"></mjx-c></mjx-mi></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>τ</mi></math></mjx-assistive-mml></mjx-container></span> 的具體數值（稱為 <strong>Toxic Waste</strong>）。只要儀式中至少有一位參與者是誠實並銷毀了隨機數，整個 Setup 就是安全的。
        </p>
        
        <h3>6.2 Monomial Basis SRS</h3>
        <p>PLONK 使用單項式基底 (Monomial Basis) 的 SRS。若電路使用大小為 $n$ 的 evaluation domain，則 SRS 的階數 $d$ 需滿足 <strong>$d \geq n+6$</strong>。這是因為 <strong>PLONK 將 quotient 多項式 $t(X)$ 拆分為三個度數 $\leq n+5$ 的多項式</strong>（$t_{lo}, t_{mid}, t_{hi}$），因此只需要能夠承諾度數 $\leq n+5$ 的多項式即可（其中 $n$ 為電路閘數）。其 G₁、G₂ 元素包括：</p>
        <ul>
          <li><strong>G<sub>1</sub> 元素：</strong> <span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="89" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mo class="mjx-n"><mjx-c class="mjx-c5B"></mjx-c></mjx-mo><mjx-mn class="mjx-n"><mjx-c class="mjx-c31"></mjx-c></mjx-mn><mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c5D"></mjx-c></mjx-mo><mjx-script style="vertical-align: -0.15em;"><mjx-mn class="mjx-n" size="s"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="2"><mjx-c class="mjx-c5B"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D465 TEX-I"></mjx-c></mjx-mi><mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c5D"></mjx-c></mjx-mo><mjx-script style="vertical-align: -0.15em;"><mjx-mn class="mjx-n" size="s"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="2"><mjx-c class="mjx-c5B"></mjx-c></mjx-mo><mjx-msup><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D465 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: 0.363em;"><mjx-mn class="mjx-n" size="s"><mjx-c class="mjx-c32"></mjx-c></mjx-mn></mjx-script></mjx-msup><mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c5D"></mjx-c></mjx-mo><mjx-script style="vertical-align: -0.15em;"><mjx-mn class="mjx-n" size="s"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="2"><mjx-c class="mjx-c2026"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="2"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="2"><mjx-c class="mjx-c5B"></mjx-c></mjx-mo><mjx-msup><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D465 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: 0.363em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D451 TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msup><mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c5D"></mjx-c></mjx-mo><mjx-script style="vertical-align: -0.15em;"><mjx-mn class="mjx-n" size="s"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-script></mjx-msub></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">[</mo><mn>1</mn><msub><mo stretchy="false">]</mo><mn>1</mn></msub><mo>,</mo><mo stretchy="false">[</mo><mi>x</mi><msub><mo stretchy="false">]</mo><mn>1</mn></msub><mo>,</mo><mo stretchy="false">[</mo><msup><mi>x</mi><mn>2</mn></msup><msub><mo stretchy="false">]</mo><mn>1</mn></msub><mo>,</mo><mo>…</mo><mo>,</mo><mo stretchy="false">[</mo><msup><mi>x</mi><mi>d</mi></msup><msub><mo stretchy="false">]</mo><mn>1</mn></msub></math></mjx-assistive-mml></mjx-container></span>，用於承諾多項式。</li>
          <li><strong>G<sub>2</sub> 元素：</strong> <span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="90" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mo class="mjx-n"><mjx-c class="mjx-c5B"></mjx-c></mjx-mo><mjx-mn class="mjx-n"><mjx-c class="mjx-c31"></mjx-c></mjx-mn><mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c5D"></mjx-c></mjx-mo><mjx-script style="vertical-align: -0.15em;"><mjx-mn class="mjx-n" size="s"><mjx-c class="mjx-c32"></mjx-c></mjx-mn></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="2"><mjx-c class="mjx-c5B"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D465 TEX-I"></mjx-c></mjx-mi><mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c5D"></mjx-c></mjx-mo><mjx-script style="vertical-align: -0.15em;"><mjx-mn class="mjx-n" size="s"><mjx-c class="mjx-c32"></mjx-c></mjx-mn></mjx-script></mjx-msub></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">[</mo><mn>1</mn><msub><mo stretchy="false">]</mo><mn>2</mn></msub><mo>,</mo><mo stretchy="false">[</mo><mi>x</mi><msub><mo stretchy="false">]</mo><mn>2</mn></msub></math></mjx-assistive-mml></mjx-container></span>（用於 Pairing 驗證）。</li>
        </ul>
        <p>其中 <span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="91" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D465 TEX-I"></mjx-c></mjx-mi></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>x</mi></math></mjx-assistive-mml></mjx-container></span> 是 MPC 儀式產生的秘密元素。</p>

        <div class="chart-container">
            <div class="mermaid" data-processed="true" style="visibility: visible; opacity: 1;"><svg id="mermaid-1764500662511" width="790.5880126953125" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" height="384.9772644042969" viewBox="-8 -8 790.5880126953125 384.9772644042969" role="graphics-document document" aria-roledescription="flowchart-v2"><style>#mermaid-1764500662511{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;font-size:16px;fill:#000000;}#mermaid-1764500662511 .error-icon{fill:#552222;}#mermaid-1764500662511 .error-text{fill:#552222;stroke:#552222;}#mermaid-1764500662511 .edge-thickness-normal{stroke-width:2px;}#mermaid-1764500662511 .edge-thickness-thick{stroke-width:3.5px;}#mermaid-1764500662511 .edge-pattern-solid{stroke-dasharray:0;}#mermaid-1764500662511 .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-1764500662511 .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-1764500662511 .marker{fill:#666;stroke:#666;}#mermaid-1764500662511 .marker.cross{stroke:#666;}#mermaid-1764500662511 svg{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;font-size:16px;}#mermaid-1764500662511 .label{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;color:#000000;}#mermaid-1764500662511 .cluster-label text{fill:#333;}#mermaid-1764500662511 .cluster-label span{color:#333;}#mermaid-1764500662511 .label text,#mermaid-1764500662511 span{fill:#000000;color:#000000;}#mermaid-1764500662511 .node rect,#mermaid-1764500662511 .node circle,#mermaid-1764500662511 .node ellipse,#mermaid-1764500662511 .node polygon,#mermaid-1764500662511 .node path{fill:#eee;stroke:#999;stroke-width:1px;}#mermaid-1764500662511 .node .label{text-align:center;}#mermaid-1764500662511 .node.clickable{cursor:pointer;}#mermaid-1764500662511 .arrowheadPath{fill:#333333;}#mermaid-1764500662511 .edgePath .path{stroke:#666;stroke-width:2.0px;}#mermaid-1764500662511 .flowchart-link{stroke:#666;fill:none;}#mermaid-1764500662511 .edgeLabel{background-color:white;text-align:center;}#mermaid-1764500662511 .edgeLabel rect{opacity:0.5;background-color:white;fill:white;}#mermaid-1764500662511 .cluster rect{fill:hsl(0, 0%, 98.9215686275%);stroke:#707070;stroke-width:1px;}#mermaid-1764500662511 .cluster text{fill:#333;}#mermaid-1764500662511 .cluster span{color:#333;}#mermaid-1764500662511 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;font-size:12px;background:hsl(-160, 0%, 93.3333333333%);border:1px solid #707070;border-radius:2px;pointer-events:none;z-index:100;}#mermaid-1764500662511 .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#000000;}#mermaid-1764500662511 :root{--mermaid-font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;}#mermaid-1764500662511 .actor&gt;*{fill:#f3e5f5!important;stroke:#7b1fa2!important;stroke-width:2px!important;}#mermaid-1764500662511 .actor span{fill:#f3e5f5!important;stroke:#7b1fa2!important;stroke-width:2px!important;}#mermaid-1764500662511 .process&gt;*{fill:#e1f5fe!important;stroke:#01579b!important;stroke-width:2px!important;}#mermaid-1764500662511 .process span{fill:#e1f5fe!important;stroke:#01579b!important;stroke-width:2px!important;}#mermaid-1764500662511 .secure&gt;*{fill:#e8f5e9!important;stroke:#2e7d32!important;stroke-width:2px!important;}#mermaid-1764500662511 .secure span{fill:#e8f5e9!important;stroke:#2e7d32!important;stroke-width:2px!important;}#mermaid-1764500662511 .artifact&gt;*{fill:#fff9c4!important;stroke:#fbc02d!important;stroke-width:2px!important;stroke-dasharray:5 5!important;}#mermaid-1764500662511 .artifact span{fill:#fff9c4!important;stroke:#fbc02d!important;stroke-width:2px!important;stroke-dasharray:5 5!important;}</style><g><marker id="flowchart-pointEnd" class="marker flowchart" viewBox="0 0 12 20" refX="10" refY="5" markerUnits="userSpaceOnUse" markerWidth="12" markerHeight="12" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker><marker id="flowchart-pointStart" class="marker flowchart" viewBox="0 0 10 10" refX="0" refY="5" markerUnits="userSpaceOnUse" markerWidth="12" markerHeight="12" orient="auto"><path d="M 0 5 L 10 10 L 10 0 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker><marker id="flowchart-circleEnd" class="marker flowchart" viewBox="0 0 10 10" refX="11" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></circle></marker><marker id="flowchart-circleStart" class="marker flowchart" viewBox="0 0 10 10" refX="-1" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></circle></marker><marker id="flowchart-crossEnd" class="marker cross flowchart" viewBox="0 0 11 11" refX="12" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"></path></marker><marker id="flowchart-crossStart" class="marker cross flowchart" viewBox="0 0 11 11" refX="-1" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"></path></marker><g class="root"><g class="clusters"><g class="cluster default" id="MPC"><rect style="" rx="0" ry="0" x="0" y="0" width="567.6420364379883" height="296.24999809265137"></rect><g class="cluster-label" transform="translate(228.92755508422852, 0)"><foreignObject width="109.78692626953125" height="20.909090042114258"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">MPC Ceremony</span></div></foreignObject></g></g></g><g class="edgePaths"><path d="M101.0085220336914,151.5909080505371L105.17518870035808,151.5909080505371C109.34185536702473,151.5909080505371,117.67518870035808,151.5909080505371,126.0085220336914,151.5909080505371C134.34185536702475,151.5909080505371,142.67518870035806,151.5909080505371,146.84185536702475,151.5909080505371L151.0085220336914,151.5909080505371" id="L-P1-Step1-0" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-P1 LE-Step1" style="fill:none;" marker-end="url(#flowchart-pointEnd)"></path><path d="M207.69831203394608,132.7272720336914L215.58429307882548,124.0719690322876C223.47027412370494,115.41666603088379,239.2422362134638,98.10606002807617,257.68220137482825,96.4393933614095C276.12216653619276,94.77272669474284,297.2301347691628,108.74999936421712,307.78411888564784,115.73863569895427L318.3381030021329,122.7272720336914" id="L-Step1-Step2-0" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-Step1 LE-Step2" style="fill:none;" marker-end="url(#flowchart-pointEnd)"></path><path d="M101.0085220336914,239.31818008422852L105.17518870035808,239.31818008422852C109.34185536702473,239.31818008422852,117.67518870035808,239.31818008422852,126.0085220336914,239.31818008422852C134.34185536702475,239.31818008422852,142.67518870035806,239.31818008422852,146.84185536702475,239.31818008422852L151.0085220336914,239.31818008422852" id="L-P2-Step3-0" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-P2 LE-Step3" style="fill:none;" marker-end="url(#flowchart-pointEnd)"></path><path d="M213.10096143947402,220.4545440673828L220.08650091676546,214.62121073404947C227.0720403940569,208.78787740071616,241.0431193486398,197.12121073404947,256.83429364241886,187.08089980537386C272.62546793619794,177.04058887669825,290.23673756917316,168.6266336860137,299.0423723856608,164.4196560906714L307.84800720214844,160.21267849532913" id="L-Step3-Step2-0" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-Step3 LE-Step2" style="fill:none;" marker-end="url(#flowchart-pointEnd)"></path><path d="M385.04970932006836,53.8636360168457L393.9808177947998,53.8636360168457C402.91192626953125,53.8636360168457,420.77414321899414,53.8636360168457,435.83246434564313,58.03030268351237C450.8907854722922,62.19696935017904,463.14521077612727,70.53030268351237,469.2724234280449,74.69696935017903L475.39963607996236,78.8636360168457" id="L-Pn-StepN-0" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-Pn LE-StepN" style="fill:none;" marker-end="url(#flowchart-pointEnd)"></path><path d="M213.10096143947402,170.4545440673828L220.08650091676546,176.28787740071616C227.0720403940569,182.12121073404947,241.0431193486398,193.78787740071616,261.33513523091307,220.5871197382609C281.6271511131864,247.38636207580566,308.2401039231502,289.3181800842285,321.54658032813205,310.28408908843994L334.85305673311393,331.24999809265137" id="L-Step1-Toxic-0" class=" edge-thickness-normal edge-pattern-dotted flowchart-link LS-Step1 LE-Toxic" style="fill:none;stroke-width:2px;stroke-dasharray:3;" marker-end="url(#flowchart-pointEnd)"></path><path d="M230.01419830322266,251.56658318619202L234.1808649698893,252.85851600253145C238.347531636556,254.15044881887084,246.6808649698893,256.73431445154966,262.97027139942935,270.01488360262624C279.2596778289695,283.2954527537028,303.50515735471623,307.27272542317706,315.6278971175896,319.26136175791424L327.75063688046305,331.24999809265137" id="L-Step3-Toxic-0" class=" edge-thickness-normal edge-pattern-dotted flowchart-link LS-Step3 LE-Toxic" style="fill:none;stroke-width:2px;stroke-dasharray:3;" marker-end="url(#flowchart-pointEnd)"></path><path d="M542.6420364379883,97.7272720336914L546.8087031046549,97.7272720336914C550.9753697713217,97.7272720336914,559.3087031046549,97.7272720336914,567.6420364379883,97.7272720336914C575.9753697713217,97.7272720336914,584.3087031046549,97.7272720336914,592.6420364379883,97.7272720336914C600.9753697713217,97.7272720336914,609.3087031046549,97.7272720336914,613.4753697713217,97.7272720336914L617.6420364379883,97.7272720336914" id="L-StepN-SRS-0" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-StepN LE-SRS" style="fill:none;" marker-end="url(#flowchart-pointEnd)"></path><path d="M385.80255126953125,141.5909080505371L394.60818608601886,141.5909080505371C403.41382090250653,141.5909080505371,421.02509053548175,141.5909080505371,435.95793800388697,137.42424138387045C450.8907854722922,133.25757471720377,463.14521077612727,124.92424138387044,469.2724234280449,120.75757471720378L475.39963607996236,116.59090805053711" id="L-Step2-StepN-0" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-Step2 LE-StepN" style="fill:none;" marker-end="url(#flowchart-pointEnd)"></path></g><g class="edgeLabels"><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g></g><g class="nodes"><g class="node default process" id="flowchart-Step1-199" transform="translate(190.51136016845703, 151.5909080505371)"><rect class="basic label-container" style="" rx="5" ry="5" x="-39.502838134765625" y="-18.863636016845703" width="79.00567626953125" height="37.727272033691406"></rect><g class="label" style="" transform="translate(-32.002838134765625, -11.363636016845703)"><foreignObject width="64.00567626953125" height="22.727272033691406"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">隨機採樣</span></div></foreignObject></g></g><g class="node default process" id="flowchart-Step2-200" transform="translate(346.82527923583984, 141.5909080505371)"><rect class="basic label-container" style="" rx="5" ry="5" x="-38.977272033691406" y="-18.863636016845703" width="77.95454406738281" height="37.727272033691406"></rect><g class="label" style="" transform="translate(-31.477272033691406, -11.363636016845703)"><foreignObject width="62.95454406738281" height="22.727272033691406"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">更新 SRS</span></div></foreignObject></g></g><g class="node default process" id="flowchart-Step3-201" transform="translate(190.51136016845703, 239.31818008422852)"><rect class="basic label-container" style="" rx="5" ry="5" x="-39.502838134765625" y="-18.863636016845703" width="79.00567626953125" height="37.727272033691406"></rect><g class="label" style="" transform="translate(-32.002838134765625, -11.363636016845703)"><foreignObject width="64.00567626953125" height="22.727272033691406"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">隨機採樣</span></div></foreignObject></g></g><g class="node default process" id="flowchart-StepN-202" transform="translate(503.13919830322266, 97.7272720336914)"><rect class="basic label-container" style="" rx="5" ry="5" x="-39.502838134765625" y="-18.863636016845703" width="79.00567626953125" height="37.727272033691406"></rect><g class="label" style="" transform="translate(-32.002838134765625, -11.363636016845703)"><foreignObject width="64.00567626953125" height="22.727272033691406"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">最終更新</span></div></foreignObject></g></g><g class="node default actor" id="flowchart-P1-196" transform="translate(63.0042610168457, 151.5909080505371)"><rect class="basic label-container" style="" rx="5" ry="5" x="-38.0042610168457" y="-18.863636016845703" width="76.0085220336914" height="37.727272033691406"></rect><g class="label" style="" transform="translate(-30.504261016845703, -11.363636016845703)"><foreignObject width="61.008522033691406" height="22.727272033691406"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">參與者 1</span></div></foreignObject></g></g><g class="node default actor" id="flowchart-P2-197" transform="translate(63.0042610168457, 239.31818008422852)"><rect class="basic label-container" style="" rx="5" ry="5" x="-38.0042610168457" y="-18.863636016845703" width="76.0085220336914" height="37.727272033691406"></rect><g class="label" style="" transform="translate(-30.504261016845703, -11.363636016845703)"><foreignObject width="61.008522033691406" height="22.727272033691406"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">參與者 2</span></div></foreignObject></g></g><g class="node default actor" id="flowchart-Pn-198" transform="translate(346.82527923583984, 53.8636360168457)"><rect class="basic label-container" style="" rx="5" ry="5" x="-38.224430084228516" y="-18.863636016845703" width="76.44886016845703" height="37.727272033691406"></rect><g class="label" style="" transform="translate(-30.724430084228516, -11.363636016845703)"><foreignObject width="61.44886016845703" height="22.727272033691406"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">參與者 n</span></div></foreignObject></g></g><g class="node default secure" id="flowchart-Toxic-211" transform="translate(346.82527923583984, 350.11363410949707)"><rect class="basic label-container" style="" rx="5" ry="5" x="-66.81107711791992" y="-18.863636016845703" width="133.62215423583984" height="37.727272033691406"></rect><g class="label" style="" transform="translate(-59.31107711791992, -11.363636016845703)"><foreignObject width="118.62215423583984" height="22.727272033691406"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">Toxic Waste 銷毀</span></div></foreignObject></g></g><g class="node default artifact" id="flowchart-SRS-212" transform="translate(696.1150436401367, 97.7272720336914)"><rect class="basic label-container" style="" rx="5" ry="5" x="-78.47300720214844" y="-17.95454502105713" width="156.94601440429688" height="35.90909004211426"></rect><g class="label" style="" transform="translate(-70.97300720214844, -10.454545021057129)"><foreignObject width="141.94601440429688" height="20.909090042114258"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">SRS Monomial Basis</span></div></foreignObject></g></g></g></g></g></svg></div>
        </div>
    </section>

    <!-- NEW SECTION: Preprocessing -->
        <section id="preprocessing">
        <h2>7. 電路預處理 (Circuit Preprocessing)</h2>

        <p>
            證明前，電路會算術化成「Plonk Constraint System / fan-in-2 circuit」（不是 R1CS 矩陣），並輸出 8 個多項式的 KZG 承諾，形成 Verifier 的驗證金鑰（VK）。
        </p>

        <h3>7.1 約束系統的算術化</h3>
        <p>
            每個閘由選擇器控制並滿足 <span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="92" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D45E TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.014em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D43F TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44E TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c2B"></mjx-c></mjx-mo><mjx-msub space="3"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D45E TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.014em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D445 TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44F TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c2B"></mjx-c></mjx-mo><mjx-msub space="3"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D45E TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.014em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D442 TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D450 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c2B"></mjx-c></mjx-mo><mjx-msub space="3"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D45E TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.014em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D440 TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44E TEX-I"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44F TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c2B"></mjx-c></mjx-mo><mjx-msub space="3"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D45E TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.014em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D436 TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-mn class="mjx-n" space="4"><mjx-c class="mjx-c30"></mjx-c></mjx-mn></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>q</mi><mi>L</mi></msub><mi>a</mi><mo>+</mo><msub><mi>q</mi><mi>R</mi></msub><mi>b</mi><mo>+</mo><msub><mi>q</mi><mi>O</mi></msub><mi>c</mi><mo>+</mo><msub><mi>q</mi><mi>M</mi></msub><mi>a</mi><mi>b</mi><mo>+</mo><msub><mi>q</mi><mi>C</mi></msub><mo>=</mo><mn>0</mn></math></mjx-assistive-mml></mjx-container></span>，在 Lagrange 基底 <span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="93" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D43B TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c7B"></mjx-c></mjx-mo><mjx-msup><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D714 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: 0.363em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D456 TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msup><mjx-mo class="mjx-n"><mjx-c class="mjx-c7D"></mjx-c></mjx-mo></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>H</mi><mo>=</mo><mo fence="false" stretchy="false">{</mo><msup><mi>ω</mi><mi>i</mi></msup><mo fence="false" stretchy="false">}</mo></math></mjx-assistive-mml></mjx-container></span> 上定義：
        </p>
        <ul>
            <li><strong>5 個選擇子多項式</strong>：<span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="94" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D45E TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.014em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D43F TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-msub space="2"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D45E TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.014em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D445 TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-msub space="2"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D45E TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.014em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D442 TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-msub space="2"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D45E TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.014em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D440 TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-msub space="2"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D45E TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.014em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D436 TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>q</mi><mi>L</mi></msub><mo>,</mo><msub><mi>q</mi><mi>R</mi></msub><mo>,</mo><msub><mi>q</mi><mi>O</mi></msub><mo>,</mo><msub><mi>q</mi><mi>M</mi></msub><mo>,</mo><msub><mi>q</mi><mi>C</mi></msub></math></mjx-assistive-mml></mjx-container></span>（決定各閘係數）。</li>
            <li><strong>3 個置換多項式</strong>：<span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="95" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D446 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.032em;"><mjx-texatom size="s" texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D70E TEX-I"></mjx-c></mjx-mi><mjx-mn class="mjx-n"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-texatom></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-msub space="2"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D446 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.032em;"><mjx-texatom size="s" texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D70E TEX-I"></mjx-c></mjx-mi><mjx-mn class="mjx-n"><mjx-c class="mjx-c32"></mjx-c></mjx-mn></mjx-texatom></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-msub space="2"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D446 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.032em;"><mjx-texatom size="s" texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D70E TEX-I"></mjx-c></mjx-mi><mjx-mn class="mjx-n"><mjx-c class="mjx-c33"></mjx-c></mjx-mn></mjx-texatom></mjx-script></mjx-msub></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>S</mi><mrow data-mjx-texclass="ORD"><mi>σ</mi><mn>1</mn></mrow></msub><mo>,</mo><msub><mi>S</mi><mrow data-mjx-texclass="ORD"><mi>σ</mi><mn>2</mn></mrow></msub><mo>,</mo><msub><mi>S</mi><mrow data-mjx-texclass="ORD"><mi>σ</mi><mn>3</mn></mrow></msub></math></mjx-assistive-mml></mjx-container></span>（描述 wire 的複製/對應）。</li>
        </ul>

<!-- 補充內容:第7.1節的formal定義 -->

<h4>7.1.1 Constraint System 的正式定義</h4>
<p>
    根據原論文第6節,PLONK的約束系統可以形式化定義為 $\mathcal{C} = (\mathcal{V}, Q)$:
</p>
<ul>
    <li><strong>$\mathcal{V} = (\mathbf{a}, \mathbf{b}, \mathbf{c})$</strong>: 其中 $\mathbf{a}, \mathbf{b}, \mathbf{c} \in [m]^n$。
        <ul>
            <li>$n$ 為閘數量(gates)</li>
            <li>$m$ 為線數量(wires)</li>
            <li>$\mathbf{a}, \mathbf{b}, \mathbf{c}$ 分別是長度為 $n$ 的向量,記錄每個閘的左輸入、右輸入、輸出所對應的 wire index</li>
        </ul>
    </li>
    <li><strong>$Q = (q_L, q_R, q_O, q_M, q_C) \in (\mathbb{F}^n)^5$</strong>: 選擇器向量(selector vectors),每個都是長度 $n$ 的域元素向量。
    </li>
</ul>

<div class="formula-box">
    <p><strong>滿足約束系統的條件:</strong></p>
    <p>給定賦值向量 $\mathbf{x} = (x_1, \ldots, x_m) \in \mathbb{F}^m$,我們說 $\mathbf{x}$ <em>滿足</em> $\mathcal{C}$ 當且僅當對所有 $i \in [n]$:</p>
    $$
    (q_L)_i \cdot x_{a_i} + (q_R)_i \cdot x_{b_i} + (q_O)_i \cdot x_{c_i} + (q_M)_i \cdot (x_{a_i} x_{b_i}) + (q_C)_i = 0
    $$
    <p><em>註解:</em> 這正是前面用 MathJax 寫出的閘約束,現在我們明確指出它對應於原論文的 constraint system 定義。</p>
</div>

<h4>7.1.2 典型閘類型的選擇器配置</h4>
<p>
    透過設定不同的選擇器值,同一個約束模板可以表達多種閘類型:
</p>

<table class="gate-table">
    <thead>
        <tr>
            <th>閘類型</th>
            <th>選擇器配置</th>
            <th>語義</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><strong>乘法閘</strong></td>
            <td>$(q_M)_i = 1$, $(q_O)_i = -1$<br>$(q_L)_i = (q_R)_i = (q_C)_i = 0$</td>
            <td>強制 $c_i = a_i \cdot b_i$</td>
        </tr>
        <tr>
            <td><strong>加法閘</strong></td>
            <td>$(q_L)_i = 1$, $(q_R)_i = 1$, $(q_O)_i = -1$<br>$(q_M)_i = (q_C)_i = 0$</td>
            <td>強制 $c_i = a_i + b_i$</td>
        </tr>
        <tr>
            <td><strong>線性組合閘</strong></td>
            <td>$(q_L)_i, (q_R)_i, (q_O)_i$ 為任意常數<br>$(q_M)_i = (q_C)_i = 0$</td>
            <td>$0 = \alpha \cdot a_i + \beta \cdot b_i + \gamma \cdot c_i$<br>(常用於 $c_i = \alpha a_i + \beta b_i$)</td>
        </tr>
        <tr>
            <td><strong>布林約束</strong><br>(Booleanity)</td>
            <td>$a_i = b_i = j$, $(q_L)_i = -1$, $(q_M)_i = 1$<br>$(q_R)_i = (q_O)_i = (q_C)_i = 0$</td>
            <td>強制 $x_j \in \{0,1\}$<br>(因為 $x_j(x_j - 1) = 0$)</td>
        </tr>
        <tr>
            <td><strong>常數約束</strong></td>
            <td>$a_i = j$, $(q_L)_i = 1$, $(q_C)_i = -a$<br>$(q_M)_i = (q_R)_i = (q_O)_i = 0$</td>
            <td>強制 $x_j = a$ (常數)</td>
        </tr>
    </tbody>
</table>

<p class="note">
    <strong>重要:</strong> 這套算術化的靈活性在於,它不僅支援純加法/乘法閘,還能用同一個模板表達更複雜的約束(如布林約束、常數設定等)。這讓 PLONK 相較於傳統 R1CS 更為簡潔和通用。
</p>

<h4>7.1.3 Public Input 的形式化</h4>
<p>
    為了支援公開輸入,我們將約束系統擴展為包含一個公開輸入索引集合 $\mathcal{I} \subset [m]$,其中 $|\mathcal{I}| = \ell$。
</p>
<p>
    <strong>慣例:</strong> 不失一般性,假設 $\mathcal{I} = \{1, 2, \ldots, \ell\}$,即前 $\ell$ 個 wire 為公開輸入。
</p>
<p>
    <strong>Relation $\mathcal{R}_\mathcal{C}$:</strong> 定義為所有 $(\mathbf{x}_{pub}, \mathbf{w}) \in \mathbb{F}^\ell \times \mathbb{F}^{m-\ell}$ 的對,使得:
</p>
<ul>
    <li>$\mathbf{x} := (\mathbf{x}_{pub}, \mathbf{w})$ 滿足約束系統 $\mathcal{C}$</li>
    <li>$\mathbf{x}_{pub}$ 為公開輸入(public input)</li>
    <li>$\mathbf{w}$ 為私密見證(private witness)</li>
</ul>

<div class="info-box">
    <p><strong>預告:</strong> 在後面第9章(Verifier流程)中,我們會看到公開輸入如何透過 <strong>Public Input 多項式</strong> $PI(X)$ 嵌入到閘約束中:</p>
    $$
    PI(X) = \sum_{i=1}^{\ell} x_i \cdot L_i(X)
    $$
    <p>其中 $L_i(X)$ 是 Lagrange 基底多項式(詳見 7.2.1)。這項 $PI(X)$ 會被加進 Gate 多項式,使得驗證者能檢查證明者是否使用了正確的公開輸入值。</p>
</div>

<h4>7.1.4 Wire 等價類與 Permutation 的連結</h4>
<p>
    <strong>Copy Constraints (複製約束):</strong> 在電路中,同一條 wire 可能被多個閘使用(作為輸入或輸出)。我們需要確保這些位置上的值是一致的。
</p>

<p>
    <strong>定義 $\mathcal{T}_\mathcal{C}$ (Wire Equivalence Classes):</strong>
</p>
<ul>
    <li>將 $\mathcal{V} = (\mathbf{a}, \mathbf{b}, \mathbf{c})$ 視為長度 $3n$ 的向量(串接 a, b, c 三個欄位)</li>
    <li>對每個 wire index $j \in [m]$,定義集合:
        $$
        T_j = \{ i \in [3n] \mid V_i = j \}
        $$
        即「向量 $V$ 中所有等於 $j$ 的位置」
    </li>
    <li>定義 partition:
        $$
        \mathcal{T}_\mathcal{C} = \{ T_j \}_{j \in [m]}
        $$
    </li>
</ul>

<p><strong>直覺解釋:</strong></p>
<ul>
    <li>每個等價類 $T_j$ 收集了「wire $j$ 被使用的所有位置」</li>
    <li>例如:若 wire 5 出現在第2個閘的左輸入($a_2=5$)、第7個閘的右輸入($b_7=5$)、第10個閘的輸出($c_{10}=5$),則:
        $$
        T_5 = \{2, n+7, 2n+10\}
        $$
        (因為我們把 a, b, c 串接成長度 3n 的向量,b 的位置從 $n$ 開始,c 從 $2n$ 開始)
    </li>
</ul>

<p><strong>與 Permutation Argument 的連結:</strong></p>
<div class="highlight-box">
    <p>
        在第5章(Permutation Argument)中,我們的目標是證明三個多項式 $a(X), b(X), c(X)$ 的評估值「copy-satisfy」這個 partition $\mathcal{T}_\mathcal{C}$。
    </p>
    <p>
        具體而言,定義置換 $\sigma : [3n] \rightarrow [3n]$,使得對每個等價類 $T_j$,$\sigma$ 在 $T_j$ 上形成一個循環(cycle)。這樣,如果:
    </p>
    $$
    (a(X), b(X), c(X)) = \sigma(a(X), b(X), c(X))
    $$
    <p>
        就等價於說「同一個等價類內的所有位置,其對應的多項式評估值相等」,即 copy constraints 被滿足。
    </p>
</div>

<p class="note">
    <strong>連結到後續章節:</strong> 第5章的 Grand Product 正是在檢查這個置換關係。具體的 permutation 多項式 $S_{\sigma 1}, S_{\sigma 2}, S_{\sigma 3}$ (在 7.2 中定義)就是用來編碼這個 $\sigma$。
</p>

<style>
    .formula-box {
        background-color: #f0f8ff;
        border-left: 4px solid #3498db;
        padding: 15px;
        margin: 15px 0;
    }
    .info-box {
        background-color: #fff9e6;
        border-left: 4px solid #f39c12;
        padding: 15px;
        margin: 15px 0;
    }
    .highlight-box {
        background-color: #e8f5e9;
        border-left: 4px solid #4caf50;
        padding: 15px;
        margin: 15px 0;
    }
    .note {
        background-color: #fce4ec;
        border-left: 4px solid #e91e63;
        padding: 10px;
        margin: 10px 0;
        font-style: italic;
    }
    .gate-table {
        width: 100%;
        border-collapse: collapse;
        margin: 15px 0;
    }
    .gate-table th, .gate-table td {
        border: 1px solid #ddd;
        padding: 12px;
        text-align: left;
    }
    .gate-table th {
        background-color: #3498db;
        color: white;
    }
    .gate-table tr:nth-child(even) {
        background-color: #f2f2f2;
    }
</style>
        <h3>7.2 驗證金鑰生成</h3>
        <p>預處理明確產出 8 個多項式承諾，這也是 PLONK VK 較大的原因：</p>
        <ol>
          <li><strong>定義 Plonk 閘</strong>：以 gate + selector 描述電路（移除 R1CS 標籤）。</li>
          <li><strong>生成 8 個多項式</strong>：<span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="96" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D45E TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.014em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D43F TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-msub space="2"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D45E TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.014em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D445 TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-msub space="2"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D45E TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.014em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D442 TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-msub space="2"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D45E TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.014em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D440 TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-msub space="2"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D45E TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.014em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D436 TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>q</mi><mi>L</mi></msub><mo>,</mo><msub><mi>q</mi><mi>R</mi></msub><mo>,</mo><msub><mi>q</mi><mi>O</mi></msub><mo>,</mo><msub><mi>q</mi><mi>M</mi></msub><mo>,</mo><msub><mi>q</mi><mi>C</mi></msub></math></mjx-assistive-mml></mjx-container></span> 與 <span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="97" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D446 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.032em;"><mjx-texatom size="s" texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D70E TEX-I"></mjx-c></mjx-mi><mjx-mn class="mjx-n"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-texatom></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-msub space="2"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D446 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.032em;"><mjx-texatom size="s" texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D70E TEX-I"></mjx-c></mjx-mi><mjx-mn class="mjx-n"><mjx-c class="mjx-c32"></mjx-c></mjx-mn></mjx-texatom></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-msub space="2"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D446 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.032em;"><mjx-texatom size="s" texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D70E TEX-I"></mjx-c></mjx-mi><mjx-mn class="mjx-n"><mjx-c class="mjx-c33"></mjx-c></mjx-mn></mjx-texatom></mjx-script></mjx-msub></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>S</mi><mrow data-mjx-texclass="ORD"><mi>σ</mi><mn>1</mn></mrow></msub><mo>,</mo><msub><mi>S</mi><mrow data-mjx-texclass="ORD"><mi>σ</mi><mn>2</mn></mrow></msub><mo>,</mo><msub><mi>S</mi><mrow data-mjx-texclass="ORD"><mi>σ</mi><mn>3</mn></mrow></msub></math></mjx-assistive-mml></mjx-container></span>。</li>
          <li><strong>KZG 承諾</strong>：對 8 個多項式做承諾，得到 Verification Key。</li>
        </ol>

        <div class="chart-container">
            <div class="mermaid" data-processed="true" style="visibility: visible; opacity: 1;"><svg id="mermaid-1764500662529" width="613.102294921875" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" height="522.3636169433594" viewBox="-8 -8 613.102294921875 522.3636169433594" role="graphics-document document" aria-roledescription="flowchart-v2"><style>#mermaid-1764500662529{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;font-size:16px;fill:#000000;}#mermaid-1764500662529 .error-icon{fill:#552222;}#mermaid-1764500662529 .error-text{fill:#552222;stroke:#552222;}#mermaid-1764500662529 .edge-thickness-normal{stroke-width:2px;}#mermaid-1764500662529 .edge-thickness-thick{stroke-width:3.5px;}#mermaid-1764500662529 .edge-pattern-solid{stroke-dasharray:0;}#mermaid-1764500662529 .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-1764500662529 .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-1764500662529 .marker{fill:#666;stroke:#666;}#mermaid-1764500662529 .marker.cross{stroke:#666;}#mermaid-1764500662529 svg{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;font-size:16px;}#mermaid-1764500662529 .label{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;color:#000000;}#mermaid-1764500662529 .cluster-label text{fill:#333;}#mermaid-1764500662529 .cluster-label span{color:#333;}#mermaid-1764500662529 .label text,#mermaid-1764500662529 span{fill:#000000;color:#000000;}#mermaid-1764500662529 .node rect,#mermaid-1764500662529 .node circle,#mermaid-1764500662529 .node ellipse,#mermaid-1764500662529 .node polygon,#mermaid-1764500662529 .node path{fill:#eee;stroke:#999;stroke-width:1px;}#mermaid-1764500662529 .node .label{text-align:center;}#mermaid-1764500662529 .node.clickable{cursor:pointer;}#mermaid-1764500662529 .arrowheadPath{fill:#333333;}#mermaid-1764500662529 .edgePath .path{stroke:#666;stroke-width:2.0px;}#mermaid-1764500662529 .flowchart-link{stroke:#666;fill:none;}#mermaid-1764500662529 .edgeLabel{background-color:white;text-align:center;}#mermaid-1764500662529 .edgeLabel rect{opacity:0.5;background-color:white;fill:white;}#mermaid-1764500662529 .cluster rect{fill:hsl(0, 0%, 98.9215686275%);stroke:#707070;stroke-width:1px;}#mermaid-1764500662529 .cluster text{fill:#333;}#mermaid-1764500662529 .cluster span{color:#333;}#mermaid-1764500662529 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;font-size:12px;background:hsl(-160, 0%, 93.3333333333%);border:1px solid #707070;border-radius:2px;pointer-events:none;z-index:100;}#mermaid-1764500662529 .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#000000;}#mermaid-1764500662529 :root{--mermaid-font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;}#mermaid-1764500662529 .artifact&gt;*{fill:#fff9c4!important;stroke:#fbc02d!important;stroke-width:2px!important;stroke-dasharray:5 5!important;}#mermaid-1764500662529 .artifact span{fill:#fff9c4!important;stroke:#fbc02d!important;stroke-width:2px!important;stroke-dasharray:5 5!important;}#mermaid-1764500662529 .process&gt;*{fill:#e1f5fe!important;stroke:#01579b!important;stroke-width:2px!important;}#mermaid-1764500662529 .process span{fill:#e1f5fe!important;stroke:#01579b!important;stroke-width:2px!important;}#mermaid-1764500662529 .code&gt;*{fill:#f3e5f5!important;stroke:#7b1fa2!important;stroke-width:2px!important;}#mermaid-1764500662529 .code span{fill:#f3e5f5!important;stroke:#7b1fa2!important;stroke-width:2px!important;}</style><g><marker id="flowchart-pointEnd" class="marker flowchart" viewBox="0 0 12 20" refX="10" refY="5" markerUnits="userSpaceOnUse" markerWidth="12" markerHeight="12" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker><marker id="flowchart-pointStart" class="marker flowchart" viewBox="0 0 10 10" refX="0" refY="5" markerUnits="userSpaceOnUse" markerWidth="12" markerHeight="12" orient="auto"><path d="M 0 5 L 10 10 L 10 0 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker><marker id="flowchart-circleEnd" class="marker flowchart" viewBox="0 0 10 10" refX="11" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></circle></marker><marker id="flowchart-circleStart" class="marker flowchart" viewBox="0 0 10 10" refX="-1" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></circle></marker><marker id="flowchart-crossEnd" class="marker cross flowchart" viewBox="0 0 11 11" refX="12" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"></path></marker><marker id="flowchart-crossStart" class="marker cross flowchart" viewBox="0 0 11 11" refX="-1" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"></path></marker><g class="root"><g class="clusters"><g class="cluster default" id="Commitment"><rect style="" rx="0" ry="0" x="421.8749885559082" y="221.81818389892578" width="175.2272720336914" height="198.6363639831543"></rect><g class="cluster-label" transform="translate(464.4389114379883, 221.81818389892578)"><foreignObject width="90.09942626953125" height="22.727272033691406"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">3. 承諾 MSM</span></div></foreignObject></g></g><g class="cluster default" id="PolyGen"><rect style="" rx="0" ry="0" x="22.230113983154297" y="221.81818389892578" width="379.6448745727539" height="87.7272720336914"></rect><g class="cluster-label" transform="translate(163.81391525268555, 221.81818389892578)"><foreignObject width="96.4772720336914" height="22.727272033691406"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">2. 多項式生成</span></div></foreignObject></g></g><g class="cluster default" id="Logic"><rect style="" rx="0" ry="0" x="0" y="0" width="399.3252754211426" height="171.81818389892578"></rect><g class="cluster-label" transform="translate(159.42116355895996, 0)"><foreignObject width="80.48294830322266" height="22.727272033691406"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">1. 邏輯定義</span></div></foreignObject></g></g></g><g class="edgePaths"><path d="M204.6626377105713,60.90909194946289L204.6626377105713,65.07575861612956C204.6626377105713,69.24242528279622,204.6626377105713,77.57575861612956,204.6626377105713,85.90909194946289C204.6626377105713,94.24242528279622,204.6626377105713,102.57575861612956,204.6626377105713,106.74242528279622L204.6626377105713,110.90909194946289" id="L-R1CS-Constraints-0" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-R1CS LE-Constraints" style="fill:none;" marker-end="url(#flowchart-pointEnd)"></path><path d="M167.0806991254702,146.81818389892578L158.35915244912232,150.98485056559244C149.6376057727744,155.15151723225912,132.1945124200786,163.48485056559244,123.47296574373071,171.81818389892578C114.75141906738281,180.15151723225912,114.75141906738281,188.48485056559244,114.75141906738281,196.81818389892578C114.75141906738281,205.15151723225912,114.75141906738281,213.48485056559244,114.75141906738281,221.81818389892578C114.75141906738281,230.15151723225912,114.75141906738281,238.48485056559244,114.75141906738281,242.65151723225912L114.75141906738281,246.81818389892578" id="L-Constraints-Selectors-0" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-Constraints LE-Selectors" style="fill:none;" marker-end="url(#flowchart-pointEnd)"></path><path d="M242.24457629567237,146.81818389892578L250.96612297202026,150.98485056559244C259.68766964836817,155.15151723225912,277.13076300106394,163.48485056559244,285.8523096774119,171.81818389892578C294.57385635375977,180.15151723225912,294.57385635375977,188.48485056559244,294.57385635375977,196.81818389892578C294.57385635375977,205.15151723225912,294.57385635375977,213.48485056559244,294.57385635375977,221.81818389892578C294.57385635375977,230.15151723225912,294.57385635375977,238.48485056559244,294.57385635375977,242.65151723225912L294.57385635375977,246.81818389892578" id="L-Constraints-Perms-0" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-Constraints LE-Perms" style="fill:none;" marker-end="url(#flowchart-pointEnd)"></path><path d="M114.75141906738281,284.5454559326172L114.75141906738281,288.7121225992839C114.75141906738281,292.8787892659505,114.75141906738281,301.2121225992839,173.23981698354086,309.5454559326172C231.72821489969888,317.8787892659505,348.70501073201496,326.2121225992839,411.44274720423186,334.5454559326172C474.1804836764488,342.8787892659505,482.67916078856643,351.2121225992839,486.9284993446253,355.3787892659505L491.1778379006841,359.5454559326172" id="L-Selectors-Commit-0" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-Selectors LE-Commit" style="fill:none;" marker-end="url(#flowchart-pointEnd)"></path><path d="M294.57385635375977,284.5454559326172L294.57385635375977,288.7121225992839C294.57385635375977,292.8787892659505,294.57385635375977,301.2121225992839,330.3929843902588,309.5454559326172C366.2121124267578,317.8787892659505,437.85036849975586,326.2121225992839,473.6694965362549,334.5454559326172C509.4886245727539,342.8787892659505,509.4886245727539,351.2121225992839,509.4886245727539,355.3787892659505L509.4886245727539,359.5454559326172" id="L-Perms-Commit-0" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-Perms LE-Commit" style="fill:none;" marker-end="url(#flowchart-pointEnd)"></path><path d="M535.4012670516968,283.63636589050293L535.4012670516968,287.95454756418866C535.4012670516968,292.27272923787433,535.4012670516968,300.9090925852458,535.4012670516968,309.39394092559814C535.4012670516968,317.8787892659505,535.4012670516968,326.2121225992839,532.8876950603695,334.5454559326172C530.3741230690424,342.8787892659505,525.3469790863879,351.2121225992839,522.8334070950608,355.3787892659505L520.3198351037336,359.5454559326172" id="L-SRS-Commit-0" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-SRS LE-Commit" style="fill:none;" marker-end="url(#flowchart-pointEnd)"></path><path d="M509.4886245727539,395.4545478820801L509.4886245727539,399.62121454874676C509.4886245727539,403.7878812154134,509.4886245727539,412.12121454874676,509.4886245727539,420.4545478820801C509.4886245727539,428.7878812154134,509.4886245727539,437.12121454874676,509.4886245727539,445.4545478820801C509.4886245727539,453.7878812154134,509.4886245727539,462.12121454874676,509.4886245727539,466.2878812154134L509.4886245727539,470.4545478820801" id="L-Commit-VK-0" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-Commit LE-VK" style="fill:none;" marker-end="url(#flowchart-pointEnd)"></path></g><g class="edgeLabels"><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g></g><g class="nodes"><g class="node default artifact" id="flowchart-SRS-274" transform="translate(535.4012670516968, 265.6818199157715)"><rect class="basic label-container" style="" rx="5" ry="5" x="-20.788352012634277" y="-17.95454502105713" width="41.576704025268555" height="35.90909004211426"></rect><g class="label" style="" transform="translate(-13.288352012634277, -10.454545021057129)"><foreignObject width="26.576704025268555" height="20.909090042114258"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">SRS</span></div></foreignObject></g></g><g class="node default process" id="flowchart-Commit-275" transform="translate(509.4886245727539, 377.50000190734863)"><rect class="basic label-container" style="" rx="5" ry="5" x="-52.6136360168457" y="-17.95454502105713" width="105.2272720336914" height="35.90909004211426"></rect><g class="label" style="" transform="translate(-45.1136360168457, -10.454545021057129)"><foreignObject width="90.2272720336914" height="20.909090042114258"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">KZG Commit</span></div></foreignObject></g></g><g class="node default process" id="flowchart-Selectors-268" transform="translate(114.75141906738281, 265.6818199157715)"><rect class="basic label-container" style="" rx="5" ry="5" x="-57.521305084228516" y="-18.863636016845703" width="115.04261016845703" height="37.727272033691406"></rect><g class="label" style="" transform="translate(-50.021305084228516, -11.363636016845703)"><foreignObject width="100.04261016845703" height="22.727272033691406"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">計算 Selectors</span></div></foreignObject></g></g><g class="node default process" id="flowchart-Perms-269" transform="translate(294.57385635375977, 265.6818199157715)"><rect class="basic label-container" style="" rx="5" ry="5" x="-72.30113220214844" y="-18.863636016845703" width="144.60226440429688" height="37.727272033691406"></rect><g class="label" style="" transform="translate(-64.80113220214844, -11.363636016845703)"><foreignObject width="129.60226440429688" height="22.727272033691406"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">計算 Permutations</span></div></foreignObject></g></g><g class="node default code" id="flowchart-R1CS-264" transform="translate(204.6626377105713, 42.954545974731445)"><rect class="basic label-container" style="" rx="5" ry="5" x="-154.50283813476562" y="-17.95454502105713" width="309.00567626953125" height="35.90909004211426"></rect><g class="label" style="" transform="translate(-147.00283813476562, -10.454545021057129)"><foreignObject width="294.00567626953125" height="20.909090042114258"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">Plonk Constraint System / Fan-in-2 Circuit</span></div></foreignObject></g></g><g class="node default artifact" id="flowchart-Constraints-265" transform="translate(204.6626377105713, 128.86363792419434)"><rect class="basic label-container" style="" rx="5" ry="5" x="-69.03408813476562" y="-17.95454502105713" width="138.06817626953125" height="35.90909004211426"></rect><g class="label" style="" transform="translate(-61.534088134765625, -10.454545021057129)"><foreignObject width="123.06817626953125" height="20.909090042114258"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">Gates + Selectors</span></div></foreignObject></g></g><g class="node default artifact" id="flowchart-VK-282" transform="translate(509.4886245727539, 488.4090938568115)"><rect class="basic label-container" style="" rx="5" ry="5" x="-61.718746185302734" y="-17.95454502105713" width="123.43749237060547" height="35.90909004211426"></rect><g class="label" style="" transform="translate(-54.218746185302734, -10.454545021057129)"><foreignObject width="108.43749237060547" height="20.909090042114258"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="nodeLabel">Verification Key</span></div></foreignObject></g></g></g></g></g></svg></div>
        </div>

<!-- 補充內容:第7.2節的詳細定義 -->

<h4>7.2.1 運算域與 Lagrange 基底</h4>
<p>
    在構造多項式承諾之前,我們需要先建立PLONK的核心代數結構:
</p>

<div class="definition-box">
    <p><strong>定義:乘法子群 $H$</strong></p>
    <ul>
        <li>選擇 $n \geq $ (電路中的閘數),使得存在 $n$ 階乘法子群 $H \subset \mathbb{F}$</li>
        <li>設 $\omega \in \mathbb{F}$ 為 $H$ 的生成元(primitive $n$-th root of unity),即:
            $$
            H = \{1, \omega, \omega^2, \ldots, \omega^{n-1}\}
            $$
            且 $\omega^n = 1$, $\omega^k \neq 1$ for $0 < k < n$
        </li>
        <li><strong>零多項式 (Vanishing Polynomial):</strong>
            $$
            Z_H(X) = X^n - 1 = \prod_{h \in H}(X - h)
            $$
            特性:$Z_H(X)$ 在 $H$ 上所有點為 0,在其他點 $\neq 0$
        </li>
    </ul>
</div>

<div class="definition-box">
    <p><strong>定義:Lagrange 基底多項式 $\{L_i(X)\}_{i=0}^{n-1}$</strong></p>
    <p>對每個 $i \in \{0, 1, \ldots, n-1\}$,定義:
    $$
    L_i(X) \in \mathbb{F}[X], \quad \deg(L_i) = n-1, \quad L_i(\omega^j) = \begin{cases}
    1 & \text{if } j = i \\
    0 & \text{if } j \neq i
    \end{cases}
    $$
    </p>
    <p><strong>顯式公式 (Sparse Representation):</strong>
    $$
    L_i(X) = \frac{\omega^{-i}(X^n - 1)}{n(X - \omega^i)} = \frac{\omega^{-i} \cdot Z_H(X)}{n(X - \omega^i)}
    $$
    </p>
    <p><strong>關鍵性質:</strong></p>
    <ul>
        <li>$\{L_i\}$ 形成度數 $< n$ 的多項式空間在 $H$ 上的插值基底</li>
        <li>任何度數 < $n$ 的多項式 $f(X)$ 都可以唯一表示為:
            $$
            f(X) = \sum_{i=0}^{n-1} f(\omega^i) \cdot L_i(X)
            $$
        </li>
        <li>這是PLONK中「從點值形式到多項式」的核心橋樑</li>
    </ul>
</div>

<p><strong>為什麼使用 Lagrange 基底?</strong></p>
<ul>
    <li><strong>簡化 Selector 定義:</strong> 可以直接將每個閘的選擇器值 $(q_L)_i$ 嵌入到多項式 $q_L(X)$ 中</li>
    <li><strong>簡化 Witness 映射:</strong> 將 witness 值直接映射到多項式評估值</li>
    <li><strong>高效 Permutation Argument:</strong> Lagrange 基底與乘法子群的結構使得 permutation check (第5章) 變得簡潔</li>
</ul>

<h4>7.2.2 Selector 多項式的精確定義</h4>
<p>
    對應每個選擇器向量 $q_M, q_L, q_R, q_O, q_C \in \mathbb{F}^n$ (來自第7.1節的約束系統定義),我們定義對應的多項式:
</p>

$$
\begin{aligned}
q_L(X) &= \sum_{i=0}^{n-1} (q_L)_i \cdot L_i(X) \\
q_R(X) &= \sum_{i=0}^{n-1} (q_R)_i \cdot L_i(X) \\
q_O(X) &= \sum_{i=0}^{n-1} (q_O)_i \cdot L_i(X) \\
q_M(X) &= \sum_{i=0}^{n-1} (q_M)_i \cdot L_i(X) \\
q_C(X) &= \sum_{i=0}^{n-1} (q_C)_i \cdot L_i(X)
\end{aligned}
$$

<div class="interpretation-box">
    <p><strong>解讀:</strong> 在 $X = \omega^i$ 時,$q_L(X) = (q_L)_i$ 正好是第 $i$ 個閘的左輸入選擇器值。</p>
    <p>這樣,原本在向量層級的閘約束:
    $$
    (q_L)_i \cdot x_{a_i} + (q_R)_i \cdot x_{b_i} + \cdots = 0
    $$
    可以提升為多項式層級的約束(在 $H$ 上逐點成立)。
    </p>
</div>

<p class="note">
    <strong>實作細節:</strong> 在實際電路編譯時,編譯器會遍歷每個閘,根據閘類型設定 $(q_*)_i$ 的值(參考 7.1.2 的閘類型表),然後用 FFT 將這些點值轉換為多項式係數。
</p>

<h4>7.2.3 Identity / Permutation 多項式的精確定義</h4>
<p>
    為了在 Permutation Argument 中追蹤「哪個 wire 對應到哪個位置」,我們需要對 $(a, b, c)$ 這三欄分別建立索引。
</p>

<h5>7.2.3.1 Coset 分離技術</h5>
<div class="definition-box">
    <p><strong>選擇 coset 偏移量 $k_1, k_2$:</strong></p>
    <ul>
        <li>選擇 $k_1, k_2 \in \mathbb{F}$ 為兩個 <em>二次非剩餘 (quadratic non-residues)</em></li>
        <li>目的:使得 $H, k_1 \cdot H, k_2 \cdot H$ 是三個<strong>不相交</strong>的 cosets</li>
        <li>合起來覆蓋 $3n$ 個不同的點,對應 $(a, b, c)$ 三欄的所有位置</li>
    </ul>
    <p><strong>範例 (當 $\omega$ 是二次剩餘時):</strong></p>
    <ul>
        <li>$k_1$ 可以選為任意二次非剩餘 (例如某個 generator 的奇數次冪)</li>
        <li>$k_2$ 可以選為另一個不在 $k_1 \cdot H$ 中的二次非剩餘</li>
    </ul>
</div>

<h5>7.2.3.2 Identity Permutation 多項式</h5>
<p>
    <strong>$\text{SID}_1(X), \text{SID}_2(X), \text{SID}_3(X)$:</strong> 描述「未經置換」的原始索引
</p>
$$
\begin{aligned}
\text{SID}_1(X) &= X && \text{(對應 $a$ 欄,在 $H$ 上)} \\
\text{SID}_2(X) &= k_1 \cdot X && \text{(對應 $b$ 欄,在 $k_1 H$ 上)} \\
\text{SID}_3(X) &= k_2 \cdot X && \text{(對應 $c$ 欄,在 $k_2 H$ 上)}
\end{aligned}
$$

<div class="interpretation-box">
    <p><strong>在 $X = \omega^i$ 時的值:</strong></p>
    <ul>
        <li>$\text{SID}_1(\omega^i) = \omega^i$: $a$ 欄第 $i$ 個位置的「身份標籤」</li>
        <li>$\text{SID}_2(\omega^i) = k_1 \omega^i$: $b$ 欄第 $i$ 個位置的「身份標籤」</li>
        <li>$\text{SID}_3(\omega^i) = k_2 \omega^i$: $c$ 欄第 $i$ 個位置的「身份標籤」</li>
    </ul>
    <p>這樣,三欄的 $3n$ 個位置都有唯一的標籤,且不會重複。</p>
</div>

<h5>7.2.3.3 Permutation 多項式 $S_{\sigma_1}, S_{\sigma_2}, S_{\sigma_3}$</h5>
<p>
    給定電路的 wiring permutation $\sigma : [3n] \rightarrow [3n]$ (來自 7.1.4 的 $\mathcal{T}_\mathcal{C}$),定義:
</p>
$$
\begin{aligned}
S_{\sigma_1}(X) &= \sum_{i=0}^{n-1} \sigma^*(i) \cdot L_i(X) \\
S_{\sigma_2}(X) &= \sum_{i=0}^{n-1} \sigma^*(n+i) \cdot L_i(X) \\
S_{\sigma_3}(X) &= \sum_{i=0}^{n-1} \sigma^*(2n+i) \cdot L_i(X)
\end{aligned}
$$

<p>其中 $\sigma^* : [3n] \rightarrow H'$ 是將整數索引映射到 coset 標籤的函數:</p>
$$
\sigma^*(i) = \begin{cases}
\omega^i & \text{if } 0 \leq i < n \\
k_1 \omega^{i-n} & \text{if } n \leq i < 2n \\
k_2 \omega^{i-2n} & \text{if } 2n \leq i < 3n
\end{cases}
$$

<div class="interpretation-box">
    <p><strong>在 $X = \omega^i$ 時的含義:</strong></p>
    <ul>
        <li>$S_{\sigma_1}(\omega^i)$ 給出「$a$ 欄第 $i$ 個位置被 permutation 後的新標籤」</li>
        <li>如果這個位置在 wire equivalence class 中的下一個位置是 $b$ 欄的第 $j$ 個,則 $S_{\sigma_1}(\omega^i) = k_1 \omega^j$</li>
    </ul>
</div>

<p class="example-box">
    <strong>Toy 範例:</strong> 考慮一個 2-gate 電路:
    <ul>
        <li>Gate 0: $a_0 = 1, b_0 = 2, c_0 = 3$</li>
        <li>Gate 1: $a_1 = 3, b_1 = 4, c_1 = 5$</li>
    </ul>
    <p>Wire 3 出現在兩個位置:$(c_0, a_1)$,即 $(4, 2)$ (在 3n=6 的索引中)。</p>
    <p>對應的 permutation cycle 將 $(4 \rightarrow 2 \rightarrow 4)$ (或反向),所以:</p>
    <ul>
        <li>$S_{\sigma_3}(\omega^0) = \omega^1$ (因為 $c_0$ 的下一個是 $a_1 = $ 位置 1)</li>
        <li>$S_{\sigma_1}(\omega^1) = k_2 \omega^0$ (因為 $a_1$ 的下一個是 $c_0$)</li>
    </ul>
</p>

<h4>7.2.4 Public Input 多項式 $PI(X)$</h4>
<p>
    假設公開輸入索引為 $\mathcal{I} = \{1, \ldots, \ell\}$,對應的公開輸入值為 $\mathbf{x}_{pub} = (x_1, \ldots, x_\ell)$。
</p>

<div class="definition-box">
    <p><strong>定義 Public Input 多項式:</strong></p>
    $$
    PI(X) = \sum_{i=1}^{\ell} x_i \cdot L_i(X)
    $$
    <p>(注意:這裡假設公開輸入對應到電路的前 $\ell$ 個 gate 的某個 wire 位置,通常是 $a_i$ for $i < \ell$)</p>
</div>

<div class="interpretation-box">
    <p><strong>在 Gate 多項式中的角色:</strong></p>
    <p>在 Round 3 (見第8章),Gate 約束會被寫成:</p>
    $$
    Gate(X) = a(X)b(X)q_M(X) + a(X)q_L(X) + b(X)q_R(X) + c(X)q_O(X) + q_C(X) + PI(X)
    $$
    <p>當 $X = \omega^i$ 且 $i < \ell$ 時,$PI(\omega^i) = x_i$,正好將公開輸入加到閘約束中。</p>
</div>

<p class="note">
    <strong>重要:</strong> $PI(X)$ 是由 Verifier 自行計算的(因為 public input 是公開的),不需要 Prover 承諾。這也是為什麼 VK 中不包含 $PI(X)$ 的承諾。
</p>

<h4>7.2.5 Verification Key (VK) 的完整清單</h4>
<p>
    經過上述步驟,電路預處理產出以下內容作為 <strong>Verification Key (VK)</strong>:
</p>

<div class="vk-checklist">
    <h5>VK 包含的元素:</h5>

    <h6>1. 多項式承諾 (KZG Commitments in $\mathbb{G}_1$):</h6>
    <ul>
        <li>$[q_M]_1 = [q_M(x)]_1$ : 乘法選擇器承諾</li>
        <li>$[q_L]_1 = [q_L(x)]_1$ : 左輸入選擇器承諾</li>
        <li>$[q_R]_1 = [q_R(x)]_1$ : 右輸入選擇器承諾</li>
        <li>$[q_O]_1 = [q_O(x)]_1$ : 輸出選擇器承諾</li>
        <li>$[q_C]_1 = [q_C(x)]_1$ : 常數選擇器承諾</li>
        <li>$[S_{\sigma_1}]_1 = [S_{\sigma_1}(x)]_1$ : Permutation 多項式 (a 欄) 承諾</li>
        <li>$[S_{\sigma_2}]_1 = [S_{\sigma_2}(x)]_1$ : Permutation 多項式 (b 欄) 承諾</li>
        <li>$[S_{\sigma_3}]_1 = [S_{\sigma_3}(x)]_1$ : Permutation 多項式 (c 欄) 承諾</li>
    </ul>
    <p class="note-inline">共 <strong>8 個 $\mathbb{G}_1$ 元素</strong></p>

    <h6>2. 域參數與 Coset 偏移量:</h6>
    <ul>
        <li>$n$ : 子群大小(≥ 電路閘數)</li>
        <li>$\omega$ : $n$-th primitive root of unity(生成元)</li>
        <li>$k_1, k_2$ : Coset 偏移量(二次非剩餘)</li>
    </ul>

    <h6>3. Pairing 所需的 $\mathbb{G}_2$ 元素:</h6>
    <ul>
        <li>$[1]_2$ : $\mathbb{G}_2$ 的生成元</li>
        <li>$[x]_2 = [x]_2$ : 用於 degree bound 檢查的參考點</li>
    </ul>
    <p class="note-inline">(這些通常來自通用 SRS,不是電路特定的)</p>

    <h6>4. 公開輸入相關:</h6>
    <ul>
        <li>$\ell$ : 公開輸入數量</li>
        <li>公開輸入索引集合 $\mathcal{I}$ (通常 $= \{1, \ldots, \ell\}$)</li>
    </ul>
</div>

<div class="summary-box">
    <p><strong>VK 大小總結:</strong></p>
    <ul>
        <li><strong>8 個 $\mathbb{G}_1$ 元素</strong> (約 32 bytes × 8 = 256 bytes for BLS12-381)</li>
        <li><strong>少量域參數</strong> (約 32 bytes × 4 = 128 bytes)</li>
        <li><strong>總計:</strong> VK 大小約 400-500 bytes (取決於曲線與編碼)</li>
    </ul>
    <p class="note-inline">這比 Groth16 的 VK (約 2 $\mathbb{G}_1$ + 1 $\mathbb{G}_2$ ≈ 160 bytes) 稍大,但換來了<strong>通用性</strong>:同一份 SRS 可以用於任何 ≤ $n$ gates 的電路。</p>
</div>

<style>
    .definition-box {
        border-left: 4px solid #3498db;
        padding: 15px;
        margin-bottom: 15px;
        background-color: #f9f9f9;
    }
    .note {
        border-left: 4px solid #e91e63;
        padding: 10px;
        margin-bottom: 10px;
        font-style: italic;
        background-color: #f9f9f9;
    }
</style>

<!-- 補充內容:第7.3節 - 與通用SRS的關係 -->

<h3>7.3 與通用 SRS 的關係:Degree Bound 與電路大小</h3>

<p>
    在前面第3.4節中,我們已經介紹了通用 SRS 的概念。現在我們將明確說明電路預處理階段產生的各多項式與 SRS degree bound 之間的關係。
</p>

<h4>7.3.1 各多項式的度數分析</h4>

<p>
    為了確保所有多項式都能使用通用 SRS 進行承諾,我們需要先明確各多項式的度數上界:
</p>

<div class="degree-analysis-box">
    <h5>預處理多項式 (Preprocessing Polynomials):</h5>
    <ul>
        <li><strong>Selector 多項式:</strong> $\deg(q_L), \deg(q_R), \deg(q_O), \deg(q_M), \deg(q_C) = n-1$
            <ul>
                <li>原因:這些多項式由 Lagrange 基底 $\{L_i(X)\}_{i=0}^{n-1}$ 線性組合而成,每個 $L_i$ 的度數為 $n-1$</li>
            </ul>
        </li>
        <li><strong>Permutation 多項式:</strong> $\deg(S_{\sigma_1}), \deg(S_{\sigma_2}), \deg(S_{\sigma_3}) = n-1$
            <ul>
                <li>原因:同樣由 Lagrange 基底線性組合定義</li>
            </ul>
        </li>
    </ul>

    <h5>Prover 生成的多項式 (Witness Polynomials):</h5>
    <ul>
        <li><strong>Wire 多項式 (含 blinding):</strong> $\deg(a), \deg(b), \deg(c) \leq n+2$
            <ul>
                <li>原因:基本的 wire 多項式度數為 $n-1$,加上零知識 blinding 項 $b_1 X^n + b_2 X^{n+1}$ 後度數變為 $n+1$ 或 $n+2$</li>
                <li>詳見第8.3節</li>
            </ul>
        </li>
        <li><strong>Grand Product 多項式:</strong> $\deg(z) = n+2$
            <ul>
                <li>原因:$z(X)$ 需要滿足遞迴關係並含有 blinding,詳見第8.4節</li>
            </ul>
        </li>
        <li><strong>Quotient 多項式:</strong> $\deg(t) \leq 3n+5$
            <ul>
                <li>原因:$t(X)$ 由多個約束組合除以 $Z_H(X)$ 得到</li>
                <li>分子中最高次項來自 $a(X)b(X)q_M(X)$ 等乘積,度數可達 $(n+2) + (n+2) + (n-1) = 3n+3$</li>
                <li>除以 $\deg(Z_H) = n$ 後,商多項式度數約為 $(3n+3) - n = 2n+3$</li>
                <li>實際上,考慮所有約束項後,$\deg(t) \leq 3n+5$ (詳見第8.5節)</li>
            </ul>
        </li>
    </ul>
</div>

<h4>7.3.2 通用 SRS 的 Degree Bound 選擇</h4>

<div class="srs-bound-box">
    <p><strong>SRS Degree Bound 的最低要求:</strong></p>
    <p>
        給定一個最大支援 $n$ 個閘的電路,通用 SRS 的 degree bound $d$ 必須滿足:
    </p>
    $$
    d \geq n + 6
    $$

    <p><strong>推導:</strong></p>
    <ul>
        <li>雖然 quotient polynomial $t(X)$ 的原始度數約為 $3n+5$,但得益於<strong>第 8.5 節介紹的多項式拆分 (Polynomial Splitting)</strong> 技術,Prover 將 $t(X)$ 拆分為三個片段 $t_{lo}, t_{mid}, t_{hi}$,每個片段的度數(含 blinding)都不超過 $n+5$</li>
        <li>因此,Prover 實際只需要能夠對 $n+5$ 次的多項式進行承諾</li>
        <li>KZG 承諾要求多項式度數 $< d$ (嚴格小於),因此需要 $d > n+5$,取最小整數得 $d \geq n+6$</li>
    </ul>

    <p><strong>重要結論:</strong></p>
    <div class="highlight-box">
        <p>
            <strong>通用性的關鍵:</strong> 一旦選定 degree bound $d$,這份 SRS 就可以用於<strong>任何閘數 $n \leq \lfloor d/3 \rfloor - 2$ 的電路</strong>,而不需要重新生成 trusted setup。
        </p>
        <p>
            這意味著 SRS 的利用率是高效的 <strong>1:1 關係</strong>,而非未優化版本的 1:3。</p><p>這正是 PLONK 的「通用性 (Universality)」核心:不同電路共享同一份 SRS,只需在預處理階段計算各自的 VK。
        </p>
    </div>
</div>

<h4>7.3.3 與 KZG 承諾方案的連接</h4>

<p>
    回顧第3章的 KZG 承諾方案,通用 SRS 的形式為:
</p>
$$
\begin{aligned}
\text{SRS} &= \left( [1]_1, [x]_1, [x^2]_1, \ldots, [x^d]_1; \quad [1]_2, [x]_2 \right) \\
\end{aligned}
$$

<p>
    其中 $x \in \mathbb{F}$ 是 trusted setup 中的秘密值(已被銷毀),$d$ 是 degree bound。
</p>

<div class="kzg-connection-box">
    <p><strong>使用流程:</strong></p>
    <ol>
        <li><strong>Setup 階段 (一次性,通用):</strong>
            <ul>
                <li>執行 trusted setup 生成 SRS(degree bound $d$)</li>
                <li>發布 SRS 供所有電路使用</li>
            </ul>
        </li>
        <li><strong>Preprocessing 階段 (每個電路一次):</strong>
            <ul>
                <li>對於閘數為 $n$ 的電路($n \leq \lfloor d/3 \rfloor - 2$),計算 selector 和 permutation 多項式</li>
                <li>使用 SRS 計算 KZG 承諾,形成 VK</li>
                <li>VK 中的 8 個承諾 $[q_L]_1, [q_R]_1, \ldots, [S_{\sigma_3}]_1$ 都是使用同一份 SRS 計算的</li>
            </ul>
        </li>
        <li><strong>Proving 階段 (每個證明一次):</strong>
            <ul>
                <li>Prover 生成 witness 多項式 $a, b, c, z, t$</li>
                <li>使用同一份 SRS 計算這些多項式的 KZG 承諾</li>
                <li>所有多項式的度數必須 $< d$ 才能正確承諾</li>
            </ul>
        </li>
        <li><strong>Verification 階段:</strong>
            <ul>
                <li>Verifier 使用 VK 中的承諾和 SRS 中的 $[x]_2$ 進行 pairing 檢查</li>
                <li>詳見第9章</li>
            </ul>
        </li>
    </ol>
</div>

<h4>7.3.4 實務考量:SRS 大小與電路靈活性</h4>

<div class="practical-box">
    <p><strong>SRS 大小:</strong></p>
    <ul>
        <li>對於 degree bound $d$ 的 SRS:
            <ul>
                <li>$\mathbb{G}_1$ 部分:$(d+1)$ 個群元素,每個約 32 bytes (BLS12-381 曲線)</li>
                <li>$\mathbb{G}_2$ 部分:2 個群元素,每個約 64 bytes</li>
                <li>總計:約 $32(d+1) + 128$ bytes ≈ $32d$ bytes (當 $d$ 很大時)</li>
            </ul>
        </li>
        <li>例如:$d = 2^{20}$ (約 100 萬) 的 SRS 大小約 32 MB</li>
    </ul>

    <p><strong>電路大小與 SRS 的對應關係:</strong></p>
    <table class="srs-table">
        <thead>
            <tr>
                <th>SRS Degree Bound $d$</th>
                <th>最大電路閘數 $n$</th>
                <th>SRS 大小 (approx.)</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>$2^{16}$ (65,536)</td>
                <td>≈ 65,530</td>
                <td>2 MB</td>
            </tr>
            <tr>
                <td>$2^{18}$ (262,144)</td>
                <td>≈ 262,138</td>
                <td>8 MB</td>
            </tr>
            <tr>
                <td>$2^{20}$ (1,048,576)</td>
                <td>≈ 1,048,570</td>
                <td>32 MB</td>
            </tr>
            <tr>
                <td>$2^{22}$ (4,194,304)</td>
                <td>≈ 4,194,298</td>
                <td>128 MB</td>
            </tr>
        </tbody>
    </table>
    <p class="note-inline">註:最大閘數按 $n \approx \lfloor d/3 \rfloor$ 估算</p>

    <p><strong>靈活性優勢:</strong></p>
    <ul>
        <li>一份 $d = 2^{20}$ 的 SRS 可以支援從 10 個閘到約 104 萬個閘的任意電路</li>
        <li>相比 Groth16 等電路專用方案,PLONK 不需要為每個電路大小重新執行 trusted setup</li>
        <li>這使得 PLONK 在應用開發中更加靈活和實用</li>
    </ul>
</div>

<p class="summary-note">
    <strong>本節總結:</strong> 第7章介紹的電路預處理階段,其產出的所有多項式(selector、permutation、witness、quotient)都必須滿足度數 $< d$ 的約束,才能使用通用 SRS 進行 KZG 承諾。這個度數約束 <strong>$d \geq n+6$</strong> 確保了 PLONK 的通用性:同一份 SRS 可以支援所有 $n \leq d - 6$ 的電路,這是 PLONK 相較於電路專用 SNARK (如 Groth16) 的關鍵優勢。由於 PLONK 將度數 $3n$ 的 quotient 多項式 $t(X)$ 拆分為三個度數 $\leq n+5$ 的多項式,因此 SRS 大小僅需與電路規模 $n$ 成線性關係,而非三倍關係。
</p>

<style>
    .srs-table {
        width: 100%;
        border-collapse: collapse;
        margin-bottom: 20px;
    }
    .srs-table th, .srs-table td {
        border: 1px solid #ccc;
        padding: 10px;
        text-align: left;
    }
    .srs-table th {
        background-color: #f5f5f5;
        font-weight: bold;
    }
    .srs-table tr:nth-child(even) {
        background-color: #fafafa;
    }
    .note {
        border-left: 4px solid #e91e63;
        padding: 10px;
        margin-bottom: 10px;
        font-style: italic;
        background-color: #f9f9f9;
    }
</style>

    </section>

    <!-- NEW SECTION: Prover Flow -->
    <section id="proving">
    <h2>8. Prover 流程 (Proving)</h2>

    <h3>8.1 前處理回顧</h3>
    <p>
        Prover 已持有 8 個預處理承諾（<span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="98" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D45E TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.014em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D43F TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-msub space="2"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D45E TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.014em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D445 TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-msub space="2"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D45E TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.014em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D442 TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-msub space="2"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D45E TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.014em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D440 TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-msub space="2"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D45E TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.014em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D436 TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-msub space="2"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D446 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.032em;"><mjx-texatom size="s" texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D70E TEX-I"></mjx-c></mjx-mi><mjx-mn class="mjx-n"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-texatom></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-msub space="2"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D446 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.032em;"><mjx-texatom size="s" texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D70E TEX-I"></mjx-c></mjx-mi><mjx-mn class="mjx-n"><mjx-c class="mjx-c32"></mjx-c></mjx-mn></mjx-texatom></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-msub space="2"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D446 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.032em;"><mjx-texatom size="s" texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D70E TEX-I"></mjx-c></mjx-mi><mjx-mn class="mjx-n"><mjx-c class="mjx-c33"></mjx-c></mjx-mn></mjx-texatom></mjx-script></mjx-msub></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>q</mi><mi>L</mi></msub><mo>,</mo><msub><mi>q</mi><mi>R</mi></msub><mo>,</mo><msub><mi>q</mi><mi>O</mi></msub><mo>,</mo><msub><mi>q</mi><mi>M</mi></msub><mo>,</mo><msub><mi>q</mi><mi>C</mi></msub><mo>,</mo><msub><mi>S</mi><mrow data-mjx-texclass="ORD"><mi>σ</mi><mn>1</mn></mrow></msub><mo>,</mo><msub><mi>S</mi><mrow data-mjx-texclass="ORD"><mi>σ</mi><mn>2</mn></mrow></msub><mo>,</mo><msub><mi>S</mi><mrow data-mjx-texclass="ORD"><mi>σ</mi><mn>3</mn></mrow></msub></math></mjx-assistive-mml></mjx-container></span>）、通用 SRS，以及公開輸入 <span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="99" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D465 TEX-I"></mjx-c></mjx-mi></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>x</mi></math></mjx-assistive-mml></mjx-container></span>。接下來將 witness 映射為 wire 多項式並執行 5 輪 IOP。
    </p>

<!-- 8.1.1: Prover 掌握的多項式資源 -->
        <h4>8.1.1 Prover 掌握的多項式資源</h4>
        <p>
            在進入各個 Round 之前，我們先從 <strong>Prover 的視角</strong>整理一下在證明生成過程中需要使用的所有多項式資源。
            這些多項式可以按照來源分為三類：
        </p>

        <div class="resource-table-container">
            <table class="resource-table">
                <thead>
                    <tr>
                        <th>來源</th>
                        <th>多項式名稱</th>
                        <th>度數</th>
                        <th>用途</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Preprocessed Resources -->
                    <tr>
                        <td rowspan="8"><strong>Preprocessed<br>(VK 提供)</strong></td>
                        <td>$q_M(X), q_L(X), q_R(X), q_O(X), q_C(X)$</td>
                        <td>$&lt; n$</td>
                        <td>Selector 多項式，定義電路結構</td>
                    </tr>
                    <tr>
                        <td>$S_{\sigma_1}(X), S_{\sigma_2}(X), S_{\sigma_3}(X)$</td>
                        <td>$&lt; n$</td>
                        <td>Permutation 多項式，編碼 copy constraints</td>
                    </tr>
                    <tr>
                        <td>$\text{SID}_1(X) = X$</td>
                        <td>$1$</td>
                        <td>Identity permutation（第一組 wire）</td>
                    </tr>
                    <tr>
                        <td>$\text{SID}_2(X) = k_1 X$</td>
                        <td>$1$</td>
                        <td>Identity permutation（第二組 wire）</td>
                    </tr>
                    <tr>
                        <td>$\text{SID}_3(X) = k_2 X$</td>
                        <td>$1$</td>
                        <td>Identity permutation（第三組 wire）</td>
                    </tr>
                    <tr>
                        <td>$Z_H(X) = X^n - 1$</td>
                        <td>$n$</td>
                        <td>Domain 多項式，用於整除檢查和 ZK blinding</td>
                    </tr>
                    <tr>
                        <td>$L_i(X)$</td>
                        <td>$n-1$</td>
                        <td>Lagrange 基底，用於邊界條件和 PI</td>
                    </tr>
                    <tr>
                        <td>$\omega, k_1, k_2$</td>
                        <td>-</td>
                        <td>常數：子群生成元與 coset 係數</td>
                    </tr>

                    <!-- Per-Proof: Witness-derived -->
                    <tr>
                        <td rowspan="2"><strong>Witness<br>(輸入)</strong></td>
                        <td>$\mathbf{a}, \mathbf{b}, \mathbf{c} \in \mathbb{F}^n$</td>
                        <td>-</td>
                        <td>Gate-wise witness 向量</td>
                    </tr>
                    <tr>
                        <td>$a(X), b(X), c(X)$</td>
                        <td>$&lt; n$</td>
                        <td>透過 FFT 從 witness 向量插值得到</td>
                    </tr>

                    <!-- Per-Proof: Prover-computed -->
                    <tr>
                        <td rowspan="7"><strong>Per-Proof<br>(Prover 計算)</strong></td>
                        <td>$a'(X), b'(X), c'(X)$</td>
                        <td>$&lt; n+3$</td>
                        <td>Wire 多項式 + ZK blinding (Round 1)</td>
                    </tr>
                    <tr>
                        <td>$z(X)$</td>
                        <td>$&lt; n+3$</td>
                        <td>Permutation accumulator + ZK blinding (Round 2)</td>
                    </tr>
                    <tr>
                        <td>$t(X)$</td>
                        <td>$&lt; 3n+6$</td>
                        <td>Quotient polynomial (Round 3，拆分為 $t_{\text{lo}}, t_{\text{mid}}, t_{\text{hi}}$)</td>
                    </tr>
                    <tr>
                        <td>$r(X)$</td>
                        <td>$&lt; n+6$</td>
                        <td>Linearisation polynomial (Round 5，Verifier 也可計算)</td>
                    </tr>
                    <tr>
                        <td>$W_\zeta(X), W_{\zeta\omega}(X)$</td>
                        <td>$&lt; n+6$</td>
                        <td>Opening proof 多項式 (Round 5)</td>
                    </tr>
                    <tr>
                        <td>Blinding scalars: $b_1, \ldots, b_{11}$</td>
                        <td>-</td>
                        <td>隨機數，用於構造 ZK blinding 多項式</td>
                    </tr>
                    <tr>
                        <td>Challenges: $\beta, \gamma, \alpha, \zeta, v, u$</td>
                        <td>-</td>
                        <td>從 transcript 獲得的挑戰值（Fiat-Shamir）</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <p><strong>模組化設計建議：</strong></p>
        <ul>
            <li><strong>Preprocessing 模組</strong>：負責載入 VK 中的所有 preprocessed 多項式和常數</li>
            <li><strong>Witness 處理模組</strong>：將 witness 向量透過 FFT 轉換為多項式 $a(X), b(X), c(X)$</li>
            <li><strong>Proof 構造模組</strong>：依序執行 Round 1-5，計算 $z(X), t(X), r(X)$ 等多項式</li>
            <li><strong>KZG 承諾模組</strong>：對所有需要承諾的多項式執行 MSM 運算</li>
            <li><strong>Transcript 模組</strong>：管理 Fiat-Shamir 轉換，生成所有挑戰值</li>
        </ul>

    <h3>8.2 協議概觀：五個 Round</h3>
    <ul>
        <li><strong>Round 1</strong>：承諾 wires <span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="100" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44E TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="2"><mjx-c class="mjx-c1D44F TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="2"><mjx-c class="mjx-c1D450 TEX-I"></mjx-c></mjx-mi></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>a</mi><mo>,</mo><mi>b</mi><mo>,</mo><mi>c</mi></math></mjx-assistive-mml></mjx-container></span>（含 blinding）。</li>
        <li><strong>Round 2</strong>：用 <span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="101" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D6FD TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="2"><mjx-c class="mjx-c1D6FE TEX-I"></mjx-c></mjx-mi></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>β</mi><mo>,</mo><mi>γ</mi></math></mjx-assistive-mml></mjx-container></span> 構造 Grand Product <span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="102" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D467 TEX-I"></mjx-c></mjx-mi></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>z</mi></math></mjx-assistive-mml></mjx-container></span> 並承諾。</li>
        <li><strong>Round 3</strong>：組合約束得到商多項式 <span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="103" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D461 TEX-I"></mjx-c></mjx-mi></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>t</mi></math></mjx-assistive-mml></mjx-container></span>，切成 <span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="104" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D461 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em;"><mjx-texatom size="s" texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D459 TEX-I"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D45C TEX-I"></mjx-c></mjx-mi></mjx-texatom></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-msub space="2"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D461 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em;"><mjx-texatom size="s" texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D45A TEX-I"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D456 TEX-I"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D451 TEX-I"></mjx-c></mjx-mi></mjx-texatom></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-msub space="2"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D461 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em;"><mjx-texatom size="s" texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c210E TEX-I"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D456 TEX-I"></mjx-c></mjx-mi></mjx-texatom></mjx-script></mjx-msub></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>t</mi><mrow data-mjx-texclass="ORD"><mi>l</mi><mi>o</mi></mrow></msub><mo>,</mo><msub><mi>t</mi><mrow data-mjx-texclass="ORD"><mi>m</mi><mi>i</mi><mi>d</mi></mrow></msub><mo>,</mo><msub><mi>t</mi><mrow data-mjx-texclass="ORD"><mi>h</mi><mi>i</mi></mrow></msub></math></mjx-assistive-mml></mjx-container></span> 承諾。</li>
        <li><strong>Round 4</strong>：在隨機點 <span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="105" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D701 TEX-I"></mjx-c></mjx-mi></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>ζ</mi></math></mjx-assistive-mml></mjx-container></span> 評估，送出純數值（不含 <span class="math">t</span>）。</li>
        <li><strong>Round 5</strong>：構造線性化多項式 <span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="106" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D45F TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44B TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>r</mi><mo stretchy="false">(</mo><mi>X</mi><mo stretchy="false">)</mo></math></mjx-assistive-mml></mjx-container></span>，產生開放證明 <span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="107" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44A TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.104em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D701 TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-msub space="2"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44A TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.104em;"><mjx-texatom size="s" texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D701 TEX-I"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D714 TEX-I"></mjx-c></mjx-mi></mjx-texatom></mjx-script></mjx-msub></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>W</mi><mi>ζ</mi></msub><mo>,</mo><msub><mi>W</mi><mrow data-mjx-texclass="ORD"><mi>ζ</mi><mi>ω</mi></mrow></msub></math></mjx-assistive-mml></mjx-container></span>。</li>
    </ul>
<!-- 補充內容:第8.2節 - Round總覽表 -->

<h4>8.2.1 Protocol Round Summary</h4>

<p>
    下表總結 PLONK 五個回合的多項式、約束、度數與訊息流:
</p>

<table class="round-table">
    <thead>
        <tr>
            <th>Round</th>
            <th>新建多項式</th>
            <th>強制執行的約束</th>
            <th>度數</th>
            <th>Prover → Verifier</th>
            <th>Verifier → Prover</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><strong>1</strong></td>
            <td>$a(X), b(X), c(X)$</td>
            <td>—</td>
            <td>$\leq n+2$</td>
            <td>$[a]_1, [b]_1, [c]_1$</td>
            <td>$\beta, \gamma$</td>
        </tr>
        <tr>
            <td><strong>2</strong></td>
            <td>$z(X)$</td>
            <td>Permutation (copy constraints)</td>
            <td>$n+2$</td>
            <td>$[z]_1$</td>
            <td>$\alpha$</td>
        </tr>
        <tr>
            <td><strong>3</strong></td>
            <td>$t(X)$ (切為 $t_{lo}, t_{mid}, t_{hi}$)</td>
            <td>Gate + Perm + Boundary, 整除 $Z_H(X)$</td>
            <td>$\leq 3n+5$</td>
            <td>$[t_{lo}]_1, [t_{mid}]_1, [t_{hi}]_1$</td>
            <td>$\zeta$</td>
        </tr>
        <tr>
            <td><strong>4</strong></td>
            <td>—</td>
            <td>壓縮到單點 $\zeta$</td>
            <td>—</td>
            <td>$\bar{a}, \bar{b}, \bar{c}, \bar{S}_{\sigma_1}, \bar{S}_{\sigma_2}, \bar{z}_\omega$</td>
            <td>$v$</td>
        </tr>
        <tr>
            <td><strong>5</strong></td>
            <td>$r(X)$, $W_\zeta(X)$, $W_{\zeta\omega}(X)$</td>
            <td>Batch opening</td>
            <td>$< n$</td>
            <td>$[W_\zeta]_1, [W_{\zeta\omega}]_1$</td>
            <td>—</td>
        </tr>
    </tbody>
</table>

<p><strong>說明:</strong></p>
<ul>
    <li><strong>度數遞增:</strong> Wire 多項式度數 $\approx n$,quotient $t(X)$ 度數達 $3n$。但由於 PLONK 將 $t(X)$ 拆分為三個度數 $\leq n+5$ 的多項式 ($t_{lo}, t_{mid}, t_{hi}$),因此 SRS degree bound 僅需 <strong>$d \geq n+6$</strong>。</li>
    <li><strong>隨機線性組合:</strong> Challenge $\alpha, \beta, \gamma$ 將多個約束折疊成單一檢查,防止 Prover 分散錯誤。</li>
    <li><strong>Round 4 不發送 $t(\zeta)$:</strong> Verifier 透過 linearisation 在 Round 5 隱式驗證 $t(X)$。</li>
    <li><strong>證明大小:</strong> $7 \times 32$ bytes (承諾) + $6 \times 32$ bytes (標量) + $2 \times 32$ bytes (opening) = <strong>480 bytes</strong>。</li>
</ul>

<style>
    .round-table {
        width: 100%;
        border-collapse: collapse;
        margin-bottom: 20px;
    }
    .round-table th, .round-table td {
        border: 1px solid #ccc;
        padding: 10px;
        text-align: left;
    }
    .round-table th {
        background-color: #f5f5f5;
        font-weight: bold;
    }
    .round-table tr:nth-child(even) {
        background-color: #fafafa;
    }
</style>

    <h3>8.3 Round 1：Wire 多項式承諾</h3>
    <p>
        將 witness 映射成 <span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="108" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44E TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44B TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="2"><mjx-c class="mjx-c1D44F TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44B TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="2"><mjx-c class="mjx-c1D450 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44B TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>a</mi><mo stretchy="false">(</mo><mi>X</mi><mo stretchy="false">)</mo><mo>,</mo><mi>b</mi><mo stretchy="false">(</mo><mi>X</mi><mo stretchy="false">)</mo><mo>,</mo><mi>c</mi><mo stretchy="false">(</mo><mi>X</mi><mo stretchy="false">)</mo></math></mjx-assistive-mml></mjx-container></span>（在乘法子群 <span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="109" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D43B TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c7B"></mjx-c></mjx-mo><mjx-msup><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D714 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: 0.363em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D456 TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msup><mjx-mo class="mjx-n"><mjx-c class="mjx-c7D"></mjx-c></mjx-mo></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>H</mi><mo>=</mo><mo fence="false" stretchy="false">{</mo><msup><mi>ω</mi><mi>i</mi></msup><mo fence="false" stretchy="false">}</mo></math></mjx-assistive-mml></mjx-container></span> 的點值形式）。為零知識，每個多項式加入 blinding：
    </p>
    <div class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" display="true" tabindex="0" ctxtmenu_counter="110" style="font-size: 113.1%; position: relative;"><mjx-math display="true" class="MJX-TEX" aria-hidden="true" style="margin-left: 0px; margin-right: 0px;"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44E TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44B TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-msub space="4"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44E TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em;"><mjx-texatom size="s" texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D459 TEX-I"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D45C TEX-I"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D454 TEX-I"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D456 TEX-I"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D450 TEX-I"></mjx-c></mjx-mi></mjx-texatom></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44B TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c2B"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44F TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em;"><mjx-mn class="mjx-n" size="s"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-script></mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44B TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c2B"></mjx-c></mjx-mo><mjx-msub space="3"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44F TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em;"><mjx-mn class="mjx-n" size="s"><mjx-c class="mjx-c32"></mjx-c></mjx-mn></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44D TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.04em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D43B TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44B TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-mstyle><mjx-mspace style="width: 1em;"></mjx-mspace></mjx-mstyle><mjx-mi class="mjx-i" space="2"><mjx-c class="mjx-c1D44F TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44B TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c2026"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="2"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-mstyle><mjx-mspace style="width: 1em;"></mjx-mspace></mjx-mstyle><mjx-mi class="mjx-i" space="2"><mjx-c class="mjx-c1D450 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44B TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c2026"></mjx-c></mjx-mo></mjx-math><mjx-assistive-mml unselectable="on" display="block"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>a</mi><mo stretchy="false">(</mo><mi>X</mi><mo stretchy="false">)</mo><mo>=</mo><msub><mi>a</mi><mrow data-mjx-texclass="ORD"><mi>l</mi><mi>o</mi><mi>g</mi><mi>i</mi><mi>c</mi></mrow></msub><mo stretchy="false">(</mo><mi>X</mi><mo stretchy="false">)</mo><mo>+</mo><mo stretchy="false">(</mo><msub><mi>b</mi><mn>1</mn></msub><mi>X</mi><mo>+</mo><msub><mi>b</mi><mn>2</mn></msub><mo stretchy="false">)</mo><msub><mi>Z</mi><mi>H</mi></msub><mo stretchy="false">(</mo><mi>X</mi><mo stretchy="false">)</mo><mo>,</mo><mstyle scriptlevel="0"><mspace width="1em"></mspace></mstyle><mi>b</mi><mo stretchy="false">(</mo><mi>X</mi><mo stretchy="false">)</mo><mo>=</mo><mo>…</mo><mo>,</mo><mstyle scriptlevel="0"><mspace width="1em"></mspace></mstyle><mi>c</mi><mo stretchy="false">(</mo><mi>X</mi><mo stretchy="false">)</mo><mo>=</mo><mo>…</mo></math></mjx-assistive-mml></mjx-container></div>
    <p>Prover 承諾 <span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="111" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mo class="mjx-n"><mjx-c class="mjx-c5B"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44E TEX-I"></mjx-c></mjx-mi><mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c5D"></mjx-c></mjx-mo><mjx-script style="vertical-align: -0.15em;"><mjx-mn class="mjx-n" size="s"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="2"><mjx-c class="mjx-c5B"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44F TEX-I"></mjx-c></mjx-mi><mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c5D"></mjx-c></mjx-mo><mjx-script style="vertical-align: -0.15em;"><mjx-mn class="mjx-n" size="s"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="2"><mjx-c class="mjx-c5B"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D450 TEX-I"></mjx-c></mjx-mi><mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c5D"></mjx-c></mjx-mo><mjx-script style="vertical-align: -0.15em;"><mjx-mn class="mjx-n" size="s"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-script></mjx-msub></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">[</mo><mi>a</mi><msub><mo stretchy="false">]</mo><mn>1</mn></msub><mo>,</mo><mo stretchy="false">[</mo><mi>b</mi><msub><mo stretchy="false">]</mo><mn>1</mn></msub><mo>,</mo><mo stretchy="false">[</mo><mi>c</mi><msub><mo stretchy="false">]</mo><mn>1</mn></msub></math></mjx-assistive-mml></mjx-container></span>。</p>

<!-- Round 1 補強內容 -->
<h4>8.3.1 Zero-Knowledge Blinding 的詳細構造</h4>
<p>
    為了確保證明不洩漏 witness 資訊（zero-knowledge 性質），Prover 在 Round 1 需要對 wire 多項式加入隨機化項。
    具體而言，定義 <strong>blinded wire polynomials</strong>：
</p>
$$
\begin{aligned}
a'(X) &= a(X) + (b_1 X + b_2) \cdot Z_H(X) \\
b'(X) &= b(X) + (b_3 X + b_4) \cdot Z_H(X) \\
c'(X) &= c(X) + (b_5 X + b_6) \cdot Z_H(X)
\end{aligned}
$$
<p>其中 $b_1, b_2, b_3, b_4, b_5, b_6 \in \mathbb{F}$ 是隨機選擇的 blinding 係數。</p>

<div class="insight-box">
    <p><strong>為什麼這樣做可以實現 Zero-Knowledge？</strong></p>
    <ul>
        <li><strong>在 $H$ 上保持一致</strong>：由於 $Z_H(X) = X^n - 1$ 在乘法子群 $H$ 上恆為 0，
            因此對所有 $X \in H$，有 $a'(X) = a(X)$。這保證了約束檢查不受影響。
        </li>
        <li><strong>在 $H$ 外隨機化</strong>：在隨機挑戰點 $\zeta \notin H$ 處，
            $a'(\zeta) = a(\zeta) + (b_1 \zeta + b_2) \cdot Z_H(\zeta)$。
            由於 $b_1, b_2$ 是隨機的，$a'(\zeta)$ 的分佈幾乎均勻，不洩漏 $a(\zeta)$ 的資訊。
        </li>
        <li><strong>Degree 分析</strong>：$\deg(a) < n$，$\deg(Z_H) = n$，因此：
            $$\deg(a'(X)) = \deg(a(X) + (b_1 X + b_2) \cdot Z_H(X)) < n + 2$$
            這與 SRS 的 degree 要求 $d \geq n + 6$ 相符。
        </li>
    </ul>
</div>

<p><strong>連結到 SRS Degree 要求：</strong></p>
<p>
    在 Round 1，wire 多項式的 degree 上界為 $n+2$。
    在 Round 2，permutation accumulator $z(X)$ 也會加上類似的 blinding（使用 $b_7, b_8, b_9$），degree 同樣 $< n+3$。
    在 Round 3，quotient polynomial $t(X)$ 的 degree 最高可達 $3n+5$（見 8.5.1），但 <strong>PLONK 將其拆分為三個度數 $\leq n+5$ 的多項式</strong>：$t_{lo}(X), t_{mid}(X), t_{hi}(X)$。
    因此，SRS 需要支援的最大 degree 為 $\max(n+2, n+2, n+5) = n+5$，
    加上保險的餘裕，總共需要 <strong>$d \geq n+6$</strong>。這是 PLONK 相較於其他系統的關鍵優勢：SRS 大小與電路規模 $n$ 成線性關係，而非三倍關係。
</p>

    <h3>8.4 Round 2：Permutation Accumulator <span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="112" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D467 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44B TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>z</mi><mo stretchy="false">(</mo><mi>X</mi><mo stretchy="false">)</mo></math></mjx-assistive-mml></mjx-container></span></h3>
    <p>Verifier 給 <span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="113" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D6FD TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="2"><mjx-c class="mjx-c1D6FE TEX-I"></mjx-c></mjx-mi></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>β</mi><mo>,</mo><mi>γ</mi></math></mjx-assistive-mml></mjx-container></span>，Prover 構造 Grand Product（<span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="114" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D467 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D454 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-mn class="mjx-n" space="4"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>z</mi><mo stretchy="false">(</mo><mi>g</mi><mo stretchy="false">)</mo><mo>=</mo><mn>1</mn></math></mjx-assistive-mml></mjx-container></span> 起始，末端回到 1）：</p>
    <div class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" display="true" tabindex="0" ctxtmenu_counter="115" style="font-size: 113.1%; position: relative;"><mjx-math display="true" class="MJX-TEX" aria-hidden="true" style="margin-left: 0px; margin-right: 0px;"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D467 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D714 TEX-I"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D465 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="4"><mjx-c class="mjx-c1D467 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D465 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c22C5"></mjx-c></mjx-mo><mjx-mfrac space="3"><mjx-frac type="d"><mjx-num><mjx-nstrut type="d"></mjx-nstrut><mjx-mrow><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44E TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D465 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c2B"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="3"><mjx-c class="mjx-c1D6FD TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c22C5"></mjx-c></mjx-mo><mjx-msub space="3"><mjx-mtext class="mjx-n"><mjx-c class="mjx-c49"></mjx-c><mjx-c class="mjx-c44"></mjx-c></mjx-mtext><mjx-script style="vertical-align: -0.15em;"><mjx-mn class="mjx-n" size="s"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D465 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c2B"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="3"><mjx-c class="mjx-c1D6FE TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44F TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D465 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c2B"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="3"><mjx-c class="mjx-c1D6FD TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c22C5"></mjx-c></mjx-mo><mjx-msub space="3"><mjx-mtext class="mjx-n"><mjx-c class="mjx-c49"></mjx-c><mjx-c class="mjx-c44"></mjx-c></mjx-mtext><mjx-script style="vertical-align: -0.15em;"><mjx-mn class="mjx-n" size="s"><mjx-c class="mjx-c32"></mjx-c></mjx-mn></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D465 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c2B"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="3"><mjx-c class="mjx-c1D6FE TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D450 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D465 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c2B"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="3"><mjx-c class="mjx-c1D6FD TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c22C5"></mjx-c></mjx-mo><mjx-msub space="3"><mjx-mtext class="mjx-n"><mjx-c class="mjx-c49"></mjx-c><mjx-c class="mjx-c44"></mjx-c></mjx-mtext><mjx-script style="vertical-align: -0.15em;"><mjx-mn class="mjx-n" size="s"><mjx-c class="mjx-c33"></mjx-c></mjx-mn></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D465 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c2B"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="3"><mjx-c class="mjx-c1D6FE TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo></mjx-mrow></mjx-num><mjx-dbox><mjx-dtable><mjx-line type="d"></mjx-line><mjx-row><mjx-den><mjx-dstrut type="d"></mjx-dstrut><mjx-mrow><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44E TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D465 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c2B"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="3"><mjx-c class="mjx-c1D6FD TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c22C5"></mjx-c></mjx-mo><mjx-msub space="3"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D446 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.032em;"><mjx-texatom size="s" texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D70E TEX-I"></mjx-c></mjx-mi><mjx-mn class="mjx-n"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-texatom></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D465 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c2B"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="3"><mjx-c class="mjx-c1D6FE TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44F TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D465 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c2B"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="3"><mjx-c class="mjx-c1D6FD TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c22C5"></mjx-c></mjx-mo><mjx-msub space="3"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D446 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.032em;"><mjx-texatom size="s" texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D70E TEX-I"></mjx-c></mjx-mi><mjx-mn class="mjx-n"><mjx-c class="mjx-c32"></mjx-c></mjx-mn></mjx-texatom></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D465 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c2B"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="3"><mjx-c class="mjx-c1D6FE TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D450 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D465 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c2B"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="3"><mjx-c class="mjx-c1D6FD TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c22C5"></mjx-c></mjx-mo><mjx-msub space="3"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D446 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.032em;"><mjx-texatom size="s" texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D70E TEX-I"></mjx-c></mjx-mi><mjx-mn class="mjx-n"><mjx-c class="mjx-c33"></mjx-c></mjx-mn></mjx-texatom></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D465 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c2B"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="3"><mjx-c class="mjx-c1D6FE TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo></mjx-mrow></mjx-den></mjx-row></mjx-dtable></mjx-dbox></mjx-frac></mjx-mfrac></mjx-math><mjx-assistive-mml unselectable="on" display="block"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>z</mi><mo stretchy="false">(</mo><mi>ω</mi><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><mi>z</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>⋅</mo><mfrac><mrow><mo stretchy="false">(</mo><mi>a</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>+</mo><mi>β</mi><mo>⋅</mo><msub><mtext>ID</mtext><mn>1</mn></msub><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>+</mo><mi>γ</mi><mo stretchy="false">)</mo><mo stretchy="false">(</mo><mi>b</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>+</mo><mi>β</mi><mo>⋅</mo><msub><mtext>ID</mtext><mn>2</mn></msub><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>+</mo><mi>γ</mi><mo stretchy="false">)</mo><mo stretchy="false">(</mo><mi>c</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>+</mo><mi>β</mi><mo>⋅</mo><msub><mtext>ID</mtext><mn>3</mn></msub><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>+</mo><mi>γ</mi><mo stretchy="false">)</mo></mrow><mrow><mo stretchy="false">(</mo><mi>a</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>+</mo><mi>β</mi><mo>⋅</mo><msub><mi>S</mi><mrow data-mjx-texclass="ORD"><mi>σ</mi><mn>1</mn></mrow></msub><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>+</mo><mi>γ</mi><mo stretchy="false">)</mo><mo stretchy="false">(</mo><mi>b</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>+</mo><mi>β</mi><mo>⋅</mo><msub><mi>S</mi><mrow data-mjx-texclass="ORD"><mi>σ</mi><mn>2</mn></mrow></msub><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>+</mo><mi>γ</mi><mo stretchy="false">)</mo><mo stretchy="false">(</mo><mi>c</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>+</mo><mi>β</mi><mo>⋅</mo><msub><mi>S</mi><mrow data-mjx-texclass="ORD"><mi>σ</mi><mn>3</mn></mrow></msub><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>+</mo><mi>γ</mi><mo stretchy="false">)</mo></mrow></mfrac></math></mjx-assistive-mml></mjx-container>
    </div>
    <p>
        為零知識，採樣 <span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="116" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44F TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em;"><mjx-mn class="mjx-n" size="s"><mjx-c class="mjx-c37"></mjx-c></mjx-mn></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-msub space="2"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44F TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em;"><mjx-mn class="mjx-n" size="s"><mjx-c class="mjx-c38"></mjx-c></mjx-mn></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-msub space="2"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44F TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em;"><mjx-mn class="mjx-n" size="s"><mjx-c class="mjx-c39"></mjx-c></mjx-mn></mjx-script></mjx-msub></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>b</mi><mn>7</mn></msub><mo>,</mo><msub><mi>b</mi><mn>8</mn></msub><mo>,</mo><msub><mi>b</mi><mn>9</mn></msub></math></mjx-assistive-mml></mjx-container></span>，設 <span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="117" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D467 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44B TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44F TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em;"><mjx-mn class="mjx-n" size="s"><mjx-c class="mjx-c37"></mjx-c></mjx-mn></mjx-script></mjx-msub><mjx-msup><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44B TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: 0.363em; margin-left: 0.051em;"><mjx-mn class="mjx-n" size="s"><mjx-c class="mjx-c32"></mjx-c></mjx-mn></mjx-script></mjx-msup><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c2B"></mjx-c></mjx-mo><mjx-msub space="3"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44F TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em;"><mjx-mn class="mjx-n" size="s"><mjx-c class="mjx-c38"></mjx-c></mjx-mn></mjx-script></mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44B TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c2B"></mjx-c></mjx-mo><mjx-msub space="3"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44F TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em;"><mjx-mn class="mjx-n" size="s"><mjx-c class="mjx-c39"></mjx-c></mjx-mn></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44D TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.04em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D43B TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44B TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c2B"></mjx-c></mjx-mo><mjx-msub space="3"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D467 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em;"><mjx-texatom size="s" texclass="ORD"><mjx-mtext class="mjx-n"><mjx-c class="mjx-c72"></mjx-c><mjx-c class="mjx-c61"></mjx-c><mjx-c class="mjx-c77"></mjx-c></mjx-mtext></mjx-texatom></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44B TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>z</mi><mo stretchy="false">(</mo><mi>X</mi><mo stretchy="false">)</mo><mo>=</mo><mo stretchy="false">(</mo><msub><mi>b</mi><mn>7</mn></msub><msup><mi>X</mi><mn>2</mn></msup><mo>+</mo><msub><mi>b</mi><mn>8</mn></msub><mi>X</mi><mo>+</mo><msub><mi>b</mi><mn>9</mn></msub><mo stretchy="false">)</mo><msub><mi>Z</mi><mi>H</mi></msub><mo stretchy="false">(</mo><mi>X</mi><mo stretchy="false">)</mo><mo>+</mo><msub><mi>z</mi><mrow data-mjx-texclass="ORD"><mtext>raw</mtext></mrow></msub><mo stretchy="false">(</mo><mi>X</mi><mo stretchy="false">)</mo></math></mjx-assistive-mml></mjx-container></span>；<span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="118" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D467 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em;"><mjx-texatom size="s" texclass="ORD"><mjx-mtext class="mjx-n"><mjx-c class="mjx-c72"></mjx-c><mjx-c class="mjx-c61"></mjx-c><mjx-c class="mjx-c77"></mjx-c></mjx-mtext></mjx-texatom></mjx-script></mjx-msub></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>z</mi><mrow data-mjx-texclass="ORD"><mtext>raw</mtext></mrow></msub></math></mjx-assistive-mml></mjx-container></span> 滿足初始與遞迴，乘上 <span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="119" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44D TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.04em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D43B TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>Z</mi><mi>H</mi></msub></math></mjx-assistive-mml></mjx-container></span> 的二次多項式在 <span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="120" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D43B TEX-I"></mjx-c></mjx-mi></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>H</mi></math></mjx-assistive-mml></mjx-container></span> 上為 0、不影響檢查，但在 <span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="121" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D701 TEX-I"></mjx-c></mjx-mi></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>ζ</mi></math></mjx-assistive-mml></mjx-container></span> 等點掩蔽真值，使 <span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="122" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-n"><mjx-c class="mjx-c64"></mjx-c><mjx-c class="mjx-c65"></mjx-c><mjx-c class="mjx-c67"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c2061"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="2"><mjx-c class="mjx-c1D467 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="4"><mjx-c class="mjx-c1D45B TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c2B"></mjx-c></mjx-mo><mjx-mn class="mjx-n" space="3"><mjx-c class="mjx-c32"></mjx-c></mjx-mn></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>deg</mi><mo data-mjx-texclass="NONE">⁡</mo><mi>z</mi><mo>=</mo><mi>n</mi><mo>+</mo><mn>2</mn></math></mjx-assistive-mml></mjx-container></span> 並維持零知識。發布承諾 <span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="123" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mo class="mjx-n"><mjx-c class="mjx-c5B"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D467 TEX-I"></mjx-c></mjx-mi><mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c5D"></mjx-c></mjx-mo><mjx-script style="vertical-align: -0.15em;"><mjx-mn class="mjx-n" size="s"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-script></mjx-msub></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">[</mo><mi>z</mi><msub><mo stretchy="false">]</mo><mn>1</mn></msub></math></mjx-assistive-mml></mjx-container></span>。
    </p>

<!-- Round 2 補強內容 -->
<h4>8.4.1 Permutation Accumulator 的精確定義</h4>
<p>
    在 Round 2，Prover 構造 permutation accumulator $z(X)$，它必須滿足兩個條件：
</p>

<div class="formula-box">
    <p><strong>1. 邊界條件（Boundary Condition）：</strong></p>
    <p>
        $$
        \forall X \in H: \quad L_1(X) \cdot (z(X) - 1) = 0
        $$
    </p>
    <p>
        等價於 $z(\omega) = 1$。
        <br>（註：PLONK 論文使用 1-based indexing，故第一個點為 $\omega^1$）
    </p>
</div>

<div class="formula-box">
    <p><strong>2. 遞迴條件（Recursive Relation）：</strong></p>
    <p>
        定義輔助多項式：
        $$
        \begin{aligned}
        f'(X) &:= (a(X) + \beta \cdot X + \gamma)(b(X) + \beta \cdot k_1 X + \gamma)(c(X) + \beta \cdot k_2 X + \gamma) \\
        g'(X) &:= (a(X) + \beta \cdot S_{\sigma_1}(X) + \gamma)(b(X) + \beta \cdot S_{\sigma_2}(X) + \gamma)(c(X) + \beta \cdot S_{\sigma_3}(X) + \gamma)
        \end{aligned}
        $$
    </p>
    <p>
        則要求：
        $$
        \forall X \in H: \quad z(X) \cdot f'(X) = z(\omega X) \cdot g'(X)
        $$
    </p>
</div>

<p><strong>直覺解釋：</strong></p>
<p>
    $z(X)$ 是一個「累積器」，它追蹤 identity permutation 與 actual permutation 的比率乘積。
    如果 copy constraints 成立，這個累積器在循環一圈後會回到 1（即 $z(\omega^n) = z(1) = 1$）。
</p>

<p><strong>與第 5、7 章的連結：</strong></p>
<ul>
    <li><strong>第 5 章</strong>：詳細推導了這個 Grand Product 的數學原理（見 5.1, 5.2）</li>
    <li><strong>第 7 章</strong>：定義了 partition $\mathcal{T}_\mathcal{C}$，這正是 $z(X)$ 所檢查的結構（見 7.1.4）</li>
    <li>$z(X)$ 同時扮演「Grand Product 累積器」與「把 copy constraints 導入單一多項式約束的橋樑」</li>
</ul>

        <h3>8.5 Round 3：商多項式 <span class="math">\(t(X)\)</span> 與切割</h3>
    <p>
        Verifier 給 <span class="math">\(\alpha\)</span>。Prover 計算 <span class="math">\(t(X) = \frac{1}{Z_H}(\text{Gate} + \alpha\text{Perm} + \alpha^2\text{L1})\)</span>。
        <br>
        由於 <span class="math">\(\deg(t) \approx 3n\)</span>，將其切分為三段。
        <br>
        <span class="note">學術細節：由於包含 Blinding 因子，切分後的片段度數最高為 <span class="math">\(n+5\)</span>，因此需要大小為 <span class="math">\(n+6\)</span> 的 SRS。</span>
    </p>
    <div class="math">\[
    \begin{aligned}
    t_{lo}(X) &:= t'_{lo}(X) + b_{10}X^n \\
    t_{mid}(X) &:= t'_{mid}(X) - b_{10} + b_{11}X^n \\
    t_{hi}(X) &:= t'_{hi}(X) - b_{11}
    \end{aligned}
    \]</div>
    <p>發布承諾 <span class="math">\([t_{lo}]_1,[t_{mid}]_1,[t_{hi}]_1\)</span>。</p>

<!-- Round 3 補強內容 -->
<h4>8.5.1 Quotient Polynomial 的精確公式與 Degree 分析</h4>
<p>
    在 Round 3，Prover 計算 <strong>quotient polynomial</strong> $t(X)$，它是整個 PLONK 協定的核心：
</p>

<div class="main-formula-box">
    <p style="text-align: center; font-size: 1.1em;">
        $$
        t(X) := \frac{\text{Gate}(X) + \alpha \cdot \text{Perm}(X) + \alpha^2 L_1(X)(z(X) - 1)}{Z_H(X)}
        $$
    </p>
</div>

<p>其中三個約束項的定義為：</p>

<p><strong>Gate Constraint:</strong></p>
$$
\text{Gate}(X) := q_L(X) a(X) + q_R(X) b(X) + q_O(X) c(X) + q_M(X) a(X) b(X) + q_C(X) + \text{PI}(X)
$$

<p><strong>Permutation Constraint:</strong></p>
$$
\begin{aligned}
\text{Perm}(X) := &\; (a(X) + \beta X + \gamma)(b(X) + \beta k_1 X + \gamma)(c(X) + \beta k_2 X + \gamma) \cdot z(\omega X) \\
&- (a(X) + \beta S_{\sigma_1}(X) + \gamma)(b(X) + \beta S_{\sigma_2}(X) + \gamma)(c(X) + \beta S_{\sigma_3}(X) + \gamma) \cdot z(X)
\end{aligned}
$$

<p><strong>Boundary Constraint:</strong></p>
$$
L_1(X)(z(X) - 1)
$$

<h5>Degree 上界推導</h5>
<p>讓我們仔細分析 $t(X)$ 的 degree：</p>
<ul>
    <li>$\deg(\text{Gate}(X))$:
        <ul>
            <li>$\deg(q_M(X) \cdot a(X) \cdot b(X)) \leq (n-1) + (n-1) + (n-1) = 3n - 3$</li>
            <li>其他項 degree $\leq 2n-2$</li>
            <li>因此 $\deg(\text{Gate}) \leq 3n - 3$</li>
        </ul>
    </li>
    <li>$\deg(\text{Perm}(X))$:
        <ul>
            <li>$z(\omega X)$ 可視為 $z(X)$ 的位移，degree 不變：$\deg(z) < n+3$（含 blinding）</li>
            <li>三個括號各 degree $< n+1$，乘積 $\leq 3(n+1) - 3 = 3n$</li>
            <li>$\deg(\text{Perm}) \leq \max(3n + (n+3), 3n + (n+3)) = 4n + 3$</li>
        </ul>
    </li>
    <li>$\deg(L_1(X)(z(X) - 1))$:
        <ul>
            <li>$\deg(L_1) = n-1$，$\deg(z) < n+3$</li>
            <li>$\deg(L_1(X)(z(X) - 1)) < 2n + 2$</li>
        </ul>
    </li>
</ul>

<p>因此，分子的 degree 上界為：</p>
$$
\deg(\text{Gate} + \alpha \cdot \text{Perm} + \alpha^2 L_1(z-1)) \leq 4n + 3
$$

<p>除以 $Z_H(X)$（degree $n$）後：</p>
$$
\deg(t(X)) \leq (4n + 3) - n = 3n + 3
$$

<p>
    加上 Round 3 的 boundary blinding（使用 $b_{10}, b_{11}$），最終 $\deg(t) < 3n + 6$。
    <strong>這正是 SRS degree 要求 $d \geq n + 6$ 的來源。</strong>
</p>

<h5>為什麼要拆分成 $t_{\text{lo}}, t_{\text{mid}}, t_{\text{hi}}$？</h5>
<div class="insight-box">
    <p><strong>技術原因：</strong></p>
    <ul>
        <li>KZG commitment 的 degree 上界受 SRS 長度限制。如果直接承諾 $t(X)$（degree $\sim 3n$），
            需要一個長度 $3n$ 的 SRS，這會增加 VK 和 proof 的大小。
        </li>
        <li>PLONK 的技巧是將 $t(X)$ 拆分為三個度數 $\leq n+5$ 的多項式：
            $$
            t(X) = t_{\text{lo}}(X) + X^{n} t_{\text{mid}}(X) + X^{2n} t_{\text{hi}}(X)
            $$
        </li>
        <li>在驗證時，Verifier 僅需在單點 $\zeta$ 評估 $t(X)$：
            $$
            t(\zeta) = t_{\text{lo}}(\zeta) + \zeta^{n} t_{\text{mid}}(\zeta) + \zeta^{2n} t_{\text{hi}}(\zeta)
            $$
            這樣可以用三個小的承諾 $[t_{\text{lo}}], [t_{\text{mid}}], [t_{\text{hi}}]$ 代替一個大的承諾 $[t]$。
        </li>
    </ul>
</div>

    <h3>8.6 Round 4：隨機點評估</h3>
    <p>
        Verifier 給 <span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="132" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D701 TEX-I"></mjx-c></mjx-mi></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>ζ</mi></math></mjx-assistive-mml></mjx-container></span>。Prover 回傳純數值（不含商多項式評估）：
    </p>
    <ul>
        <li><span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="133" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-texatom texclass="ORD"><mjx-mover><mjx-over style="padding-bottom: 0.105em; padding-left: 0.265em; margin-bottom: -0.544em;"><mjx-mo class="mjx-n" style="width: 0px; margin-left: -0.25em;"><mjx-c class="mjx-cAF"></mjx-c></mjx-mo></mjx-over><mjx-base style="padding-top: 0.001em;"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44E TEX-I"></mjx-c></mjx-mi></mjx-base></mjx-mover></mjx-texatom><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="4"><mjx-c class="mjx-c1D44E TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D701 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-mtext class="mjx-n" space="2"><mjx-c class="mjx-cA0"></mjx-c></mjx-mtext><mjx-texatom texclass="ORD"><mjx-mover><mjx-over style="padding-bottom: 0.105em; padding-left: 0.214em; margin-bottom: -0.544em;"><mjx-mo class="mjx-n" style="width: 0px; margin-left: -0.25em;"><mjx-c class="mjx-cAF"></mjx-c></mjx-mo></mjx-over><mjx-base><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44F TEX-I"></mjx-c></mjx-mi></mjx-base></mjx-mover></mjx-texatom><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-mtext class="mjx-n" space="2"><mjx-c class="mjx-cA0"></mjx-c></mjx-mtext><mjx-texatom texclass="ORD"><mjx-mover><mjx-over style="padding-bottom: 0.105em; padding-left: 0.272em; margin-bottom: -0.544em;"><mjx-mo class="mjx-n" style="width: 0px; margin-left: -0.25em;"><mjx-c class="mjx-cAF"></mjx-c></mjx-mo></mjx-over><mjx-base><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D450 TEX-I"></mjx-c></mjx-mi></mjx-base></mjx-mover></mjx-texatom></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow data-mjx-texclass="ORD"><mover><mi>a</mi><mo stretchy="false">¯</mo></mover></mrow><mo>=</mo><mi>a</mi><mo stretchy="false">(</mo><mi>ζ</mi><mo stretchy="false">)</mo><mo>,</mo><mtext>&nbsp;</mtext><mrow data-mjx-texclass="ORD"><mover><mi>b</mi><mo stretchy="false">¯</mo></mover></mrow><mo>,</mo><mtext>&nbsp;</mtext><mrow data-mjx-texclass="ORD"><mover><mi>c</mi><mo stretchy="false">¯</mo></mover></mrow></math></mjx-assistive-mml></mjx-container></span></li>
        <li><span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="134" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-msub><mjx-texatom texclass="ORD"><mjx-mover><mjx-over style="padding-bottom: 0.105em; padding-left: 0.414em; margin-bottom: -0.544em;"><mjx-mo class="mjx-n" style="width: 0px; margin-left: -0.25em;"><mjx-c class="mjx-cAF"></mjx-c></mjx-mo></mjx-over><mjx-base><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D446 TEX-I"></mjx-c></mjx-mi></mjx-base></mjx-mover></mjx-texatom><mjx-script style="vertical-align: -0.15em; margin-left: -0.032em;"><mjx-texatom size="s" texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D70E TEX-I"></mjx-c></mjx-mi><mjx-mn class="mjx-n"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-texatom></mjx-script></mjx-msub><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-msub space="4"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D446 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.032em;"><mjx-texatom size="s" texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D70E TEX-I"></mjx-c></mjx-mi><mjx-mn class="mjx-n"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-texatom></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D701 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-mtext class="mjx-n" space="2"><mjx-c class="mjx-cA0"></mjx-c></mjx-mtext><mjx-msub><mjx-texatom texclass="ORD"><mjx-mover><mjx-over style="padding-bottom: 0.105em; padding-left: 0.414em; margin-bottom: -0.544em;"><mjx-mo class="mjx-n" style="width: 0px; margin-left: -0.25em;"><mjx-c class="mjx-cAF"></mjx-c></mjx-mo></mjx-over><mjx-base><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D446 TEX-I"></mjx-c></mjx-mi></mjx-base></mjx-mover></mjx-texatom><mjx-script style="vertical-align: -0.15em; margin-left: -0.032em;"><mjx-texatom size="s" texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D70E TEX-I"></mjx-c></mjx-mi><mjx-mn class="mjx-n"><mjx-c class="mjx-c32"></mjx-c></mjx-mn></mjx-texatom></mjx-script></mjx-msub><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-msub space="4"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D446 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.032em;"><mjx-texatom size="s" texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D70E TEX-I"></mjx-c></mjx-mi><mjx-mn class="mjx-n"><mjx-c class="mjx-c32"></mjx-c></mjx-mn></mjx-texatom></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D701 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mrow data-mjx-texclass="ORD"><mover><mi>S</mi><mo stretchy="false">¯</mo></mover></mrow><mrow data-mjx-texclass="ORD"><mi>σ</mi><mn>1</mn></mrow></msub><mo>=</mo><msub><mi>S</mi><mrow data-mjx-texclass="ORD"><mi>σ</mi><mn>1</mn></mrow></msub><mo stretchy="false">(</mo><mi>ζ</mi><mo stretchy="false">)</mo><mo>,</mo><mtext>&nbsp;</mtext><msub><mrow data-mjx-texclass="ORD"><mover><mi>S</mi><mo stretchy="false">¯</mo></mover></mrow><mrow data-mjx-texclass="ORD"><mi>σ</mi><mn>2</mn></mrow></msub><mo>=</mo><msub><mi>S</mi><mrow data-mjx-texclass="ORD"><mi>σ</mi><mn>2</mn></mrow></msub><mo stretchy="false">(</mo><mi>ζ</mi><mo stretchy="false">)</mo></math></mjx-assistive-mml></mjx-container></span>（<span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="135" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D446 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.032em;"><mjx-texatom size="s" texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D70E TEX-I"></mjx-c></mjx-mi><mjx-mn class="mjx-n"><mjx-c class="mjx-c33"></mjx-c></mjx-mn></mjx-texatom></mjx-script></mjx-msub></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>S</mi><mrow data-mjx-texclass="ORD"><mi>σ</mi><mn>3</mn></mrow></msub></math></mjx-assistive-mml></mjx-container></span> 可由結構推出）。</li>
        <li><span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="136" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-texatom texclass="ORD"><mjx-mover><mjx-over style="padding-bottom: 0.105em; padding-left: 0.288em; margin-bottom: -0.544em;"><mjx-mo class="mjx-n" style="width: 0px; margin-left: -0.25em;"><mjx-c class="mjx-cAF"></mjx-c></mjx-mo></mjx-over><mjx-base><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D467 TEX-I"></mjx-c></mjx-mi></mjx-base></mjx-mover></mjx-texatom><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="4"><mjx-c class="mjx-c1D467 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D701 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-mtext class="mjx-n" space="2"><mjx-c class="mjx-cA0"></mjx-c></mjx-mtext><mjx-msub><mjx-texatom texclass="ORD"><mjx-mover><mjx-over style="padding-bottom: 0.105em; padding-left: 0.288em; margin-bottom: -0.544em;"><mjx-mo class="mjx-n" style="width: 0px; margin-left: -0.25em;"><mjx-c class="mjx-cAF"></mjx-c></mjx-mo></mjx-over><mjx-base><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D467 TEX-I"></mjx-c></mjx-mi></mjx-base></mjx-mover></mjx-texatom><mjx-script style="vertical-align: -0.15em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D714 TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="4"><mjx-c class="mjx-c1D467 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D701 TEX-I"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D714 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow data-mjx-texclass="ORD"><mover><mi>z</mi><mo stretchy="false">¯</mo></mover></mrow><mo>=</mo><mi>z</mi><mo stretchy="false">(</mo><mi>ζ</mi><mo stretchy="false">)</mo><mo>,</mo><mtext>&nbsp;</mtext><msub><mrow data-mjx-texclass="ORD"><mover><mi>z</mi><mo stretchy="false">¯</mo></mover></mrow><mi>ω</mi></msub><mo>=</mo><mi>z</mi><mo stretchy="false">(</mo><mi>ζ</mi><mi>ω</mi><mo stretchy="false">)</mo></math></mjx-assistive-mml></mjx-container></span></li>
    </ul>
    <p>這些評估值用於線性化，Verifier 不需收到 <span class="math">t</span> 的評估。</p>

        <h3>8.7 Round 5：線性化多項式 <span class="math">\(r(X)\)</span> 與開放證明</h3>
    <p>
        Verifier 給 <span class="math">\(v\)</span>。Prover 構造 <strong>線性化多項式 <span class="math">\(r(X)\)</span></strong>。
        <br>技巧：將 Verifier 無法直接計算的高次項，替換為「<strong>評估值 (純量) <span class="math">\(\times\)</span> 多項式</strong>」：
    </p>
    <div class="math">\[
    \begin{aligned}
    r(X) =&\; \underbrace{\bar{a}\bar{b} \cdot q_M(X) + \bar{a} \cdot q_L(X) + \bar{b} \cdot q_R(X) + \bar{c} \cdot q_O(X) + q_C(X) + PI(\zeta)}_{\text{Gate 部分 (含 Public Input)}} \\
    &+ \alpha \cdot \underbrace{(\bar{a} + \beta\zeta + \gamma)(\bar{b} + \beta k_1\zeta + \gamma)(\bar{c} + \beta k_2\zeta + \gamma) \cdot z(X)}_{\text{Permutation 遞迴左式 (係數化後，保留 } z(X))} \\
    &- \alpha \cdot \underbrace{(\bar{a} + \beta \bar{S}_{\sigma 1} + \gamma)(\bar{b} + \beta \bar{S}_{\sigma 2} + \gamma)(\bar{c} + \beta S_{\sigma 3}(X) + \gamma) \cdot \bar{z}_\omega}_{\text{Permutation 遞迴右式 (係數化後，保留 } S_{\sigma 3}(X))} \\
    &+ \alpha^2 \cdot \underbrace{(z(X) - 1)L_1(\zeta)}_{\text{初始條件}} \\
    &- \underbrace{Z_H(\zeta) \cdot (t_{lo}(X) + \zeta^n t_{mid}(X) + \zeta^{2n} t_{hi}(X))}_{\text{商多項式抵銷項}}
    \end{aligned}
    \]</div>
    <p>
        最終產生兩個開放證明 (<strong>群元素 <span class="math">\(\mathbb{G}_1\)</span></strong>)：
        <br>1. <span class="math">\([W_{\zeta}]_1\)</span>：證明 <span class="math">\(r(\zeta)=0\)</span> 及各多項式評估正確。
        <br>2. <span class="math">\([W_{\zeta\omega}]_1\)</span>：證明 <span class="math">\(z(\zeta\omega) = \bar{z}_\omega\)</span>。
    </p>

<!-- 8.7: Opening Proofs 計算公式 -->
<h4>8.7 Opening Proofs 的計算公式</h4>

<p>經過兩層 batching 後，最終 Prover 需要構造<strong>兩個開放證明</strong>：</p>

<div class="formula-box">
    <p><strong>1. Opening proof at $\zeta$：</strong></p>
    $$W_\zeta(X) = \frac{r(X) + v \cdot (F(X) - E)}{X - \zeta}$$
    <ul>
        <li>$r(X)$：線性化多項式（Round 5 構造，滿足 $r(\zeta) = 0$）</li>
        <li>$F(X)$：batched polynomial（第一層 batching 的線性組合）</li>
        <li>$E$：batched evaluation（對應 $F(\zeta)$ 的聲稱值）</li>
        <li>$v$：Round 4 的 batching challenge</li>
    </ul>
</div>

<div class="formula-box">
    <p><strong>2. Opening proof at $\zeta\omega$：</strong></p>
    $$W_{\zeta\omega}(X) = \frac{z(X) - \bar{z}_\omega}{X - \zeta\omega}$$
    <ul>
        <li>$z(X)$：permutation accumulator</li>
        <li>$\bar{z}_\omega = z(\zeta\omega)$：Round 4 發送的評估值</li>
    </ul>
</div>

<p><strong>關鍵性質：</strong></p>
<ul>
    <li>若 $r(\zeta) = 0$ 且 $F(\zeta) = E$，則 $W_\zeta(X)$ 是多項式（無餘數）</li>
    <li>若 $z(\zeta\omega) = \bar{z}_\omega$，則 $W_{\zeta\omega}(X)$ 是多項式（無餘數）</li>
    <li>Verifier 通過檢查 pairing equation 來驗證這兩個商式的正確性</li>
</ul>

<style>
    .formula-box {
        background-color: #f8f9fa;
        border-left: 4px solid #007bff;
        padding: 15px;
        margin: 15px 0;
    }
    .formula-box p {
        margin: 10px 0 5px 0;
        font-weight: 600;
        color: #2c3e50;
    }
    .formula-box ul {
        margin: 10px 0 5px 20px;
        font-size: 0.95em;
    }
    .formula-box li {
        margin: 5px 0;
    }
</style>

<!-- 8.8: Prover-Verifier 完整交互流程圖 -->
<h3>8.8 Prover-Verifier 完整交互流程</h3>

<p>
    以下流程圖總結了 PLONK 協定中 Prover 與 Verifier 之間的完整交互過程，
    展示了五輪（Round 1-5）的資料流動與密碼學操作。
</p>

<div class="mermaid">
sequenceDiagram
    participant P as Prover
    participant FS as Fiat-Shamir<br/>(Transcript)
    participant V as Verifier

    Note over P,V: 預處理階段（共享資料）
    rect rgb(240, 248, 255)
        Note right of V: Verification Key (VK):<br/>[q_L], [q_R], [q_O], [q_M], [q_C]<br/>[S_σ1], [S_σ2], [S_σ3]
        Note left of P: Universal SRS:<br/>[1]₁, [x]₁, ..., [x^(n+5)]₁<br/>[1]₂, [x]₂
    end

    Note over P,V: === Round 1: Wire Commitments ===
    rect rgb(255, 250, 240)
        P->>P: 構造 wire polynomials:<br/>a(X), b(X), c(X)
        P->>P: 計算承諾:<br/>[a]₁, [b]₁, [c]₁
        P->>FS: [a]₁, [b]₁, [c]₁
        FS->>P: 挑戰 β, γ
    end

    Note over P,V: === Round 2: Permutation Accumulator ===
    rect rgb(240, 255, 240)
        P->>P: 構造 z(X) 滿足:<br/>z(ω) = 1<br/>z(ωX) = z(X)·f'(X)/g'(X)
        P->>P: 計算承諾 [z]₁
        P->>FS: [z]₁
        FS->>P: 挑戰 α
    end

    Note over P,V: === Round 3: Quotient Polynomial ===
    rect rgb(255, 245, 245)
        P->>P: 計算 t(X) = (Gate + αPerm + α²Boundary)/Z_H(X)
        P->>P: 拆分 t(X) = t_lo + X^n·t_mid + X^(2n)·t_hi
        P->>P: 計算承諾:<br/>[t_lo]₁, [t_mid]₁, [t_hi]₁
        P->>FS: [t_lo]₁, [t_mid]₁, [t_hi]₁
        FS->>P: 挑戰 ζ (evaluation point)
    end

    Note over P,V: === Round 4: Evaluations ===
    rect rgb(250, 240, 255)
        P->>P: 計算評估值:<br/>ā = a(ζ), b̄ = b(ζ), c̄ = c(ζ)<br/>S̄_σ1 = S_σ1(ζ), S̄_σ2 = S_σ2(ζ)<br/>z̄_ω = z(ζω)
        P->>FS: ā, b̄, c̄, S̄_σ1, S̄_σ2, z̄_ω
        FS->>P: 挑戰 v (batching challenge)
    end

    Note over P,V: === Round 5: Opening Proofs ===
    rect rgb(255, 255, 240)
        P->>P: 構造線性化多項式 r(X)
        P->>P: Batched polynomial:<br/>F(X) = a(X) + v·b(X) + v²·c(X) + ...
        P->>P: 計算 opening proofs:<br/>[W_ζ]₁ (證明 r(ζ)=0, F(ζ)=E)<br/>[W_ζω]₁ (證明 z(ζω)=z̄_ω)
        P->>V: [W_ζ]₁, [W_ζω]₁
        V->>FS: [W_ζ]₁, [W_ζω]₁
        FS->>V: 挑戰 u (final batching)
    end

    Note over P,V: === Verification ===
    rect rgb(240, 255, 255)
        V->>V: 重建 transcript (β, γ, α, ζ, v, u)
        V->>V: 計算 PI(ζ) (public input)
        V->>V: 計算 r₀, E (線性化驗證值)
        V->>V: 執行 batched pairing check:<br/>e([W_ζ]+u[W_ζω], [x]₂) ?= e([...], [1]₂)
        V->>V: Accept / Reject
    end
</div>

<div class="protocol-summary">
    <h4>協定特性總結</h4>
    <table class="protocol-table">
        <tr>
            <th>階段</th>
            <th>Prover 發送</th>
            <th>資料大小</th>
            <th>Verifier 回應</th>
        </tr>
        <tr>
            <td>Round 1</td>
            <td>3 個 $\mathbb{G}_1$ 承諾</td>
            <td>96 bytes</td>
            <td>挑戰 $\beta, \gamma$</td>
        </tr>
        <tr>
            <td>Round 2</td>
            <td>1 個 $\mathbb{G}_1$ 承諾</td>
            <td>32 bytes</td>
            <td>挑戰 $\alpha$</td>
        </tr>
        <tr>
            <td>Round 3</td>
            <td>3 個 $\mathbb{G}_1$ 承諾</td>
            <td>96 bytes</td>
            <td>挑戰 $\zeta$</td>
        </tr>
        <tr>
            <td>Round 4</td>
            <td>6 個純量值</td>
            <td>192 bytes</td>
            <td>挑戰 $v$</td>
        </tr>
        <tr>
            <td>Round 5</td>
            <td>2 個 $\mathbb{G}_1$ opening proofs</td>
            <td>64 bytes</td>
            <td>挑戰 $u$</td>
        </tr>
        <tr>
            <td><strong>總計</strong></td>
            <td><strong>9 個群元素 + 6 個純量</strong></td>
            <td><strong>480 bytes</strong></td>
            <td>Fiat-Shamir (非互動)</td>
        </tr>
    </table>
</div>

<div class="highlight-box">
    <p><strong>Fiat-Shamir 變換：</strong></p>
    <p>
        實際實現中，Verifier 的挑戰不是即時生成，而是通過 <strong>Fiat-Shamir 變換</strong>從 transcript
        （即先前所有消息的雜湊值）確定性地導出。這將互動式協定轉換為非互動式證明系統。
    </p>
    <p>
        <strong>Transcript = Hash(VK || Public Input || [a]₁ || [b]₁ || [c]₁ || [z]₁ || ...)</strong>
    </p>
</div>

<style>
    .protocol-table {
        width: 100%;
        border-collapse: collapse;
        margin: 20px 0;
        font-size: 0.95em;
    }
    .protocol-table th,
    .protocol-table td {
        border: 1px solid #ddd;
        padding: 12px;
        text-align: left;
    }
    .protocol-table th {
        background-color: #e3f2fd;
        color: #2c3e50;
        font-weight: 600;
    }
    .protocol-table tr:nth-child(even) {
        background-color: #f9f9f9;
    }
    .protocol-table tr:last-child {
        background-color: #e8f5e9;
        font-weight: 600;
    }
    .protocol-summary {
        margin: 30px 0;
    }
    .protocol-summary h4 {
        color: #2c3e50;
        margin-bottom: 15px;
    }
</style>

</section>

    <section id="verification">

    <h2>9. Verifier 流程 (Verification)</h2>

        <h3>9.1 驗證輸入與公開參數</h3>
        <p>
            Verifier 持有 SRS、電路預處理承諾（Verification Key）、以及 Public Input <span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="152" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D465 TEX-I"></mjx-c></mjx-mi></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>x</mi></math></mjx-assistive-mml></mjx-container></span>；Proof 含多項式承諾、評估值與開放證明。
        </p>

        <h3>9.2 挑戰值重建與 Public Input</h3>
        <p>
            Verifier 先由 Transcript 重建所有隨機挑戰。公開輸入位於多項式 <span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="153" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D443 TEX-I"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D43C TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44B TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-munder space="4" limits="false"><mjx-mo class="mjx-sop"><mjx-c class="mjx-c2211 TEX-S1"></mjx-c></mjx-mo><mjx-script style="vertical-align: -0.285em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D456 TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-munder><mjx-msub space="2"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D465 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D456 TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D43F TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D456 TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44B TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>P</mi><mi>I</mi><mo stretchy="false">(</mo><mi>X</mi><mo stretchy="false">)</mo><mo>=</mo><munder><mo data-mjx-texclass="OP">∑</mo><mi>i</mi></munder><msub><mi>x</mi><mi>i</mi></msub><msub><mi>L</mi><mi>i</mi></msub><mo stretchy="false">(</mo><mi>X</mi><mo stretchy="false">)</mo></math></mjx-assistive-mml></mjx-container></span>，計算 <span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="154" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D443 TEX-I"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D43C TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D701 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>P</mi><mi>I</mi><mo stretchy="false">(</mo><mi>ζ</mi><mo stretchy="false">)</mo></math></mjx-assistive-mml></mjx-container></span> 以確認使用的公開輸入正確。因公開輸入量很小（<span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="155" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c2113"></mjx-c></mjx-mi><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c226A"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="4"><mjx-c class="mjx-c1D45B TEX-I"></mjx-c></mjx-mi></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>ℓ</mi><mo>≪</mo><mi>n</mi></math></mjx-assistive-mml></mjx-container></span>），可用 <span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="156" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D442 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c2113"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>O</mi><mo stretchy="false">(</mo><mi>ℓ</mi><mo stretchy="false">)</mo></math></mjx-assistive-mml></mjx-container></span> 的拉格朗日插值直接計算，無需 FFT。
        </p>
<!-- 補充內容:第9章 - Verifier流程詳細說明 -->

<h4>9.2.1 Verifier 演算法：Step-by-Step 流程</h4>

<div class="verifier-flow">
    <p><strong>輸入：</strong></p>
    <ul>
        <li>通用 SRS：$[1]_1, [x]_1, \ldots, [x^d]_1, [1]_2, [x]_2$</li>
        <li>Verification Key (VK)：$[q_M]_1, [q_L]_1, [q_R]_1, [q_O]_1, [q_C]_1, [S_{\sigma_1}]_1, [S_{\sigma_2}]_1, [S_{\sigma_3}]_1$，以及域參數 $n, \omega, k_1, k_2$</li>
        <li>Public Input：$\mathbf{x}_{pub} = (x_1, \ldots, x_\ell)$</li>
        <li>Proof $\pi$：$[a]_1, [b]_1, [c]_1, [z]_1, [t_{lo}]_1, [t_{mid}]_1, [t_{hi}]_1, [W_\zeta]_1, [W_{\zeta\omega}]_1$ 以及評估值 $\bar{a}, \bar{b}, \bar{c}, \bar{S}_{\sigma_1}, \bar{S}_{\sigma_2}, \bar{z}_\omega$</li>
    </ul>
</div>

<div class="verifier-steps">
    <p><strong>驗證步驟：</strong></p>

    <p><strong>Step 1: 重建 Fiat-Shamir Transcript</strong></p>
    <p>依序從 proof 元素重建所有隨機挑戰：</p>
    <ul>
        <li>$\beta, \gamma \leftarrow \mathcal{H}([a]_1, [b]_1, [c]_1)$</li>
        <li>$\alpha \leftarrow \mathcal{H}([z]_1, \beta, \gamma)$</li>
        <li>$\zeta \leftarrow \mathcal{H}([t_{lo}]_1, [t_{mid}]_1, [t_{hi}]_1, \alpha)$</li>
        <li>$v \leftarrow \mathcal{H}(\bar{a}, \bar{b}, \bar{c}, \bar{S}_{\sigma_1}, \bar{S}_{\sigma_2}, \bar{z}_\omega, \zeta)$</li>
        <li>$u \leftarrow \mathcal{H}([W_\zeta]_1, [W_{\zeta\omega}]_1, v)$</li>
    </ul>

    <p><strong>Step 2: 計算 Public Input 多項式在 $\zeta$ 的評估</strong></p>
    <p>計算 $PI(\zeta)$，其中 $PI(X) = \sum_{i=1}^{\ell} x_i \cdot L_i(X)$：</p>
    $$PI(\zeta) = \sum_{i=1}^{\ell} x_i \cdot L_i(\zeta)$$
    <p>由於 $\ell \ll n$，可以用 $O(\ell)$ 的拉格朗日插值直接計算，無需 FFT。</p>

    <p><strong>Step 3: 計算關鍵多項式在 $\zeta$ 的評估 (常數時間優化)</strong></p>
    <p>Verifier 不需展開多項式，直接利用數學性質計算：</p>
    <ul>
        <li>消失多項式：$Z_H(\zeta) = \zeta^n - 1$</li>
        <li>Lagrange 基底 $L_1$：$L_1(\zeta) = \frac{\omega(\zeta^n - 1)}{n(\zeta - \omega)}$</li>
    </ul>

    <p><strong>Step 4: 計算線性化多項式常數項 $r_0$</strong></p>
    <p>根據 Round 5 的線性化公式（見8.7節），計算常數項：</p>
    $$
    \begin{aligned}
    r_0 &= PI(\zeta) - L_1(\zeta) \alpha^2 \\
    &\quad - \alpha \cdot \bar{z}_\omega \cdot (\bar{a} + \beta \bar{S}_{\sigma_1} + \gamma)(\bar{b} + \beta \bar{S}_{\sigma_2} + \gamma)(\bar{c} + \gamma)
    \end{aligned}
    $$
    <p class="note">
        <strong>說明：</strong>
        $r_0$ 僅包含線性化後「不含任何多項式變數」的常數部分。
        <br>• Permutation argument 的左式（包含 $z(X)$ 的項）保留在 ${[D]}_1$ 中，不進入 $r_0$。
        <br>• Permutation 右式在 $r(X)$ 中保留 $S_{\sigma_3}(X)$ 為多項式，因此其展開式為：
        $$(\bar{a} + \beta \bar{S}_{\sigma_1} + \gamma)(\bar{b} + \beta \bar{S}_{\sigma_2} + \gamma)[(\bar{c} + \gamma) + \beta S_{\sigma_3}(X)]\bar{z}_\omega$$
        <br>• 僅取常數項進入 $r_0$，多項式項 $\beta S_{\sigma_3}(X)$ 保留在 ${[D]}_1$ 中。
        <br>• 這就是為什麼第三個括號是 $(\bar{c} + \gamma)$ 而非 $(\bar{c} + \beta \bar{S}_{\sigma_3} + \gamma)$。
    </p>

        <p><strong>Step 5: 建構線性化多項式承諾 ${[D]}_1$</strong></p>
    <p>
        Verifier 利用手上的 VK 承諾與收到的評估值，透過 Multi-Scalar Multiplication (MSM) 重組出 $r(X)$ 的多項式部分。
        <br>注意：這裡必須包含商多項式 $t(X)$ 的抵銷項，以確保 $r(\zeta)=0$ 的約束力。
    </p>
    <div class="math">\[
    \begin{aligned}
    {[D]}_1 &= \bar{a}\bar{b}[q_M]_1 + \bar{a}[q_L]_1 + \bar{b}[q_R]_1 + \bar{c}[q_O]_1 + [q_C]_1 \\
    &\quad + \left( \alpha (\bar{a} + \beta\zeta + \gamma)(\bar{b} + \beta k_1\zeta + \gamma)(\bar{c} + \beta k_2\zeta + \gamma) \right) \cdot [z]_1 \\
    &\quad - \left( \alpha \beta \bar{z}_\omega (\bar{a} + \beta \bar{S}_{\sigma 1} + \gamma)(\bar{b} + \beta \bar{S}_{\sigma 2} + \gamma) \right) \cdot [S_{\sigma 3}]_1 \\
    &\quad - Z_H(\zeta) \cdot \left( [t_{lo}]_1 + \zeta^n [t_{mid}]_1 + \zeta^{2n} [t_{hi}]_1 \right)
    \end{aligned}
    \]</div>

    <p><strong>Step 6: 建構 Batched Commitment ${[F]}_1$ 與 Evaluation $E$</strong></p>
    <p>
        使用挑戰 $v$ 將「線性化檢查 (${[D]}_1$)」與「多項式值檢查 ($[a]_1, [b]_1 \dots$)」合併：
    </p>
    <div class="math">\[
    \begin{aligned}
    {[F]}_1 &= {[D]}_1 + v[a]_1 + v^2[b]_1 + v^3[c]_1 + v^4[S_{\sigma_1}]_1 + v^5[S_{\sigma_2}]_1 \\
    E &= -r_0 + v\bar{a} + v^2\bar{b} + v^3\bar{c} + v^4\bar{S}_{\sigma_1} + v^5\bar{S}_{\sigma_2}
    \end{aligned}
    \]</div>
    <p class="note">
        <strong>關鍵邏輯：</strong> 我們預期 $r(\zeta) = 0$。因為 $r(X)$ 被拆解為「承諾部分 ${[D]}_1$」與「常數部分 $r_0$」，
        所以若 Prover 誠實，應滿足 $D(\zeta) + r_0 = 0 \Rightarrow D(\zeta) = -r_0$。
        這就是為什麼 $E$ 的第一項是 $-r_0$。
    </p>

    <p><strong>Step 7: 建構 $\zeta\omega$ 點的承諾與評估</strong></p>
    <p>唯一需要在 $\zeta\omega$ 檢查的是 $z(X)$：</p>
    <div class="math">\[{[G]}_1 = [z]_1, \quad \text{Eval} = \bar{z}_\omega\]</div>

    <p><strong>Step 8: 最終 Batched Pairing Check</strong></p>
    <p>驗證所有多項式是否通過 KZG 開放檢查：</p>
    <div class="math">\[
    e([W_\zeta]_1 + u \cdot [W_{\zeta\omega}]_1, [x]_2) \stackrel{?}{=} e(\zeta [W_\zeta]_1 + u \zeta\omega [W_{\zeta\omega}]_1 + {[F]}_1 - E [1]_1 + u({[G]}_1 - \bar{z}_\omega [1]_1), [1]_2)
    \]</div>
    <p><strong>輸出：</strong>若 pairing 檢查通過，則 <strong>接受</strong> proof；否則 <strong>拒絕</strong>。</p>
</div>

<h4>9.3.1 Pairing Check 的雙重意義：KZG 開放 + $r(\zeta)=0$</h4>

<div class="pairing-decomposition">
    <p><strong>1. KZG Polynomial Commitment Opening 的核心原理</strong></p>

    <p>回顧 KZG 承諾的開放協議（見4.3節）：若 Prover 聲稱多項式 $f(X)$ 在點 $z$ 的評估為 $f(z) = y$，則存在商多項式：</p>
    $$W_z(X) = \frac{f(X) - y}{X - z}$$

    <p>驗證者通過以下 pairing 檢查來驗證：</p>
    $$e([W_z]_1, [x - z]_2) = e([f]_1 - y[1]_1, [1]_2)$$

    <p>由於 $[x - z]_2 = [x]_2 - z[1]_2$，上式等價於：</p>
    $$e([W_z]_1, [x]_2) = e(z[W_z]_1 + [f]_1 - y[1]_1, [1]_2)$$

    <p class="highlight-box">
        <strong>核心直覺：</strong>Pairing 的雙線性性質確保，左邊 $e([W_z], [x])$ 對應到 $W_z(X) \cdot X$，右邊對應到 $W_z(X) \cdot z + (f(X) - y)$。兩者相等當且僅當 $f(X) - y = (X - z) W_z(X)$，即 $f(z) = y$。
    </p>
</div>

<div class="batched-opening">
    <p><strong>2. Batched Opening：合併多個多項式、多個開放點</strong></p>

    <p>PLONK Verifier 需要驗證：</p>
    <ul>
        <li>在點 $\zeta$：多項式 $t(X), r'(X), a(X), b(X), c(X), S_{\sigma_1}(X), S_{\sigma_2}(X)$ 的評估值</li>
        <li>在點 $\zeta\omega$：多項式 $z(X)$ 的評估值</li>
    </ul>

    <p>為了避免多次 pairing，使用兩層隨機線性組合：</p>
    <ol>
        <li><strong>層一：同一點的多項式合併（挑戰 $v$）</strong>
            $$F(X) = t(X) + v \cdot r'(X) + v^2 a(X) + v^3 b(X) + \cdots$$
            $$E = t(\zeta) + v \cdot r_0 + v^2 \bar{a} + v^3 \bar{b} + \cdots$$
        </li>
        <li><strong>層二：不同點的開放合併（挑戰 $u$）</strong>
            $$W_{batched}(X) = W_\zeta(X) + u \cdot W_{\zeta\omega}(X)$$
            $$\text{對應的商多項式滿足：}$$
            $$W_{batched}(X) = \frac{F(X) - E}{X - \zeta} + u \cdot \frac{z(X) - \bar{z}_\omega}{X - \zeta\omega}$$
        </li>
    </ol>

    <p>最終 pairing 檢查形式（Step 8）正是驗證此 batched 商多項式的正確性。</p>
</div>

<div class="polynomial-to-pairing">
    <p><strong>3. 從 Polynomial Protocol 到 Pairing：完整鏈條</strong></p>

    <table class="reduction-table">
        <thead>
            <tr>
                <th>層級</th>
                <th>檢查對象</th>
                <th>關鍵轉換</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><strong>原始 NP Statement</strong></td>
                <td>電路 $\mathcal{C}$ 與見證 $\mathbf{w}$</td>
                <td>算術化 → 約束系統 $(Q, \mathcal{V})$</td>
            </tr>
            <tr>
                <td><strong>Polynomial Identity (on $H$)</strong></td>
                <td>$Gate(X) + \alpha \cdot Perm(X) + \alpha^2 \cdot L_1(X)(z(X)-1) \equiv 0 \pmod{Z_H(X)}$</td>
                <td>商多項式 $t(X)$</td>
            </tr>
            <tr>
                <td><strong>Random Point Check</strong></td>
                <td>檢查 $r(\zeta) = 0$，其中 $r(X)$ 是線性化後的 identity</td>
                <td>Fiat-Shamir 挑戰 $\zeta$<br>（Schwartz-Zippel lemma）</td>
            </tr>
            <tr>
                <td><strong>Commitment Opening</strong></td>
                <td>驗證 Prover 提供的 $\bar{a}, \bar{b}, \ldots$ 確實來自承諾的多項式</td>
                <td>KZG opening proof $W_\zeta, W_{\zeta\omega}$</td>
            </tr>
            <tr>
                <td><strong>Pairing Equation</strong></td>
                <td>$e([W_\zeta] + u[W_{\zeta\omega}], [x]_2) = e(\cdots, [1]_2)$</td>
                <td>雙線性性質 + SRS binding</td>
            </tr>
        </tbody>
    </table>

    <p class="note">
        <strong>關鍵洞察：</strong>每一層轉換都保持了「完備性」與「可靠性」：
        <ul>
            <li><strong>完備性：</strong>若 witness 確實滿足電路，則所有轉換後的 identity 都成立，pairing check 必然通過。</li>
            <li><strong>可靠性：</strong>若 witness 不滿足，則至少有一層 identity 不成立；由於挑戰是隨機的（Fiat-Shamir），作弊者無法構造出能通過所有檢查的假證明（除非以可忽略的機率）。</li>
        </ul>
    </p>
</div>

<h4>9.4 Verifier 複雜度分析</h4>

<div class="complexity-analysis">
    <p><strong>Verifier 的計算成本主要分為三類：</strong></p>

    <table class="complexity-table">
        <thead>
            <tr>
                <th>操作類型</th>
                <th>數量</th>
                <th>成本</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><strong>域運算</strong><br>（加法、乘法、逆元）</td>
                <td>$O(\ell)$（public input）<br>+ $O(1)$（固定數量的挑戰、評估）</td>
                <td>極低（通常 $\ell < 100$）</td>
            </tr>
            <tr>
                <td><strong>$\mathbb{G}_1$ 群運算</strong><br>（MSM / 線性組合）</td>
                <td>約 $\ell + 15$ 次標量乘法<br>（構造 ${[F]}_1$ 時需要對 VK 承諾線性組合）</td>
                <td>中等（每次約 0.1-1ms，取決於曲線）</td>
            </tr>
            <tr>
                <td><strong>Pairing 計算</strong></td>
                <td>2 次 pairing<br>（left side + right side）</td>
                <td>高（每次約 1-5ms）</td>
            </tr>
        </tbody>
    </table>

    <p><strong>總體估計（基於 BN254 曲線）：</strong></p>
    <ul>
        <li><strong>Verifier 時間：</strong>約 5-10ms（主要由 2 次 pairing 決定）</li>
        <li><strong>Proof 大小：</strong>9 個 $\mathbb{G}_1$ 元素（承諾 + opening） + 6 個域元素（評估值） = $9 \times 32 + 6 \times 32 = 480$ bytes</li>
        <li><strong>對比 Groth16：</strong>Proof 大小相同（均為約 200 bytes），但 PLONK 具備通用 SRS，無需每個電路重新 trusted setup</li>
    </ul>

    <p class="highlight-box">
        <strong>關鍵優勢：</strong>Verifier 複雜度僅依賴於 proof 元素數量（$O(1)$）和 public input 大小（$O(\ell)$），<strong>與電路大小 $n$ 無關</strong>。這使得 PLONK 適用於鏈上驗證等資源受限環境。
    </p>
</div>

<h4>9.5 與 Polynomial Protocol 的對應關係與安全性直覺</h4>

<div class="security-intuition">
    <p><strong>1. 完備性（Completeness）</strong></p>

    <p>若 Prover 確實持有滿足電路 $\mathcal{C}$ 的見證 $\mathbf{w}$，則：</p>
    <ol>
        <li><strong>Gate 約束成立：</strong>對所有 $i \in [n]$，$(q_L)_i x_{a_i} + (q_R)_i x_{b_i} + (q_O)_i x_{c_i} + (q_M)_i (x_{a_i} x_{b_i}) + (q_C)_i + PI_i = 0$
            <br>→ 多項式化後，$Gate(X) \equiv 0 \pmod{Z_H(X)}$
        </li>
        <li><strong>Copy 約束成立：</strong>同一 wire 在不同位置的值相等
            <br>→ Permutation argument 中，$z(\omega^{i+1})$ 的遞迴正確，$z(\omega^n) = 1$
            <br>→ $Perm(X) \equiv 0 \pmod{Z_H(X)}$
        </li>
        <li><strong>Boundary 條件成立：</strong>$z(1) = 1$
            <br>→ $L_1(X)(z(X) - 1) \equiv 0 \pmod{Z_H(X)}$
        </li>
    </ol>

    <p>將三者用隨機挑戰 $\alpha$ 組合後，$t(X) = \frac{Gate(X) + \alpha Perm(X) + \alpha^2 L_1(X)(z(X)-1)}{Z_H(X)}$ 是良定義的多項式，度數 $\le 3n+5$。</p>

    <p>經過線性化和隨機點 $\zeta$ 評估後，$r(\zeta) = 0$ 必然成立（由 identity 在 $H$ 上為 0 推出）。KZG opening proof 正確構造，pairing check 必然通過。</p>

    <p class="note">
        <strong>結論：</strong>誠實 Prover 總是能夠使 Verifier 接受 proof。
    </p>
</div>

<div class="soundness-intuition">
    <p><strong>2. 知識可靠性（Knowledge Soundness）</strong></p>

    <p>關鍵問題：為什麼作弊的 Prover 無法構造假證明？分三個層次分析：</p>

    <p><strong>層級 1：Polynomial Commitment Binding</strong></p>
    <ul>
        <li>KZG 承諾在 $q$-SDH 假設下具備計算 binding 性質：給定承諾 $[f]_1$，Prover 無法找到兩個不同的 $(z, y) \neq (z', y')$ 使得兩組開放證明都能通過 pairing check（除非以可忽略機率）。</li>
        <li><strong>直覺：</strong>一旦 Prover 承諾了 $[a]_1, [b]_1, [c]_1, [z]_1, [t_{lo/mid/hi}]_1$，這些承諾就「綁定」了特定的多項式；之後無法更改其在任意點的評估值。</li>
    </ul>

    <p><strong>層級 2：Schwartz-Zippel + Random Point $\zeta$</strong></p>
    <ul>
        <li>若 $Gate(X) + \alpha Perm(X) + \alpha^2 L_1(X)(z(X)-1) \not\equiv 0 \pmod{Z_H(X)}$（即存在某個 $\omega^i \in H$ 使得約束不成立），則這個多項式在域中大部分點都不為 0。</li>
        <li>Fiat-Shamir 挑戰 $\zeta$ 是「在 Prover 承諾後」隨機選取的；由 Schwartz-Zippel lemma，非零多項式在隨機點為 0 的機率至多為 $\frac{deg}{|\mathbb{F}|}$，可忽略。</li>
        <li><strong>直覺：</strong>即使 Prover 能夠在某些特定點「作弊」，也無法同時在隨機挑戰點 $\zeta$ 上讓所有約束都看起來滿足。</li>
    </ul>

    <p><strong>層級 3：Knowledge Extractor（AGM 模型）</strong></p>
    <ul>
        <li>在 Algebraic Group Model (AGM) 假設下，若 Prover 能夠輸出 pairing check 通過的 proof，則存在一個 extractor 能夠從 Prover 的內部狀態中提取出完整的多項式 $a(X), b(X), c(X), z(X)$。</li>
        <li>由於這些多項式必須滿足 $r(\zeta) = 0$（否則 pairing 不通過），再結合隨機點檢查的健全性，可以推出這些多項式在 $H$ 上的評估值確實滿足電路約束。</li>
        <li><strong>直覺：</strong>AGM 確保 Prover 無法「憑空」構造承諾和開放證明；其輸出必須對應於某個實際的多項式，而隨機挑戰則強制該多項式滿足 identity。</li>
    </ul>

    <p class="highlight-box">
        <strong>安全性鏈條總結：</strong>
        <br>電路約束 $\xrightarrow{\text{算術化}}$ Polynomial identity on $H$ $\xrightarrow{\text{隨機點}}$ $r(\zeta) = 0$ $\xrightarrow{\text{KZG binding}}$ Pairing check
        <br><br>
        每一步轉換都保持了「只有知道合法 witness 的 Prover 才能通過」這一性質。結合 Fiat-Shamir heuristic（Random Oracle Model），整個協議在標準密碼學假設下是 knowledge sound 的。
    </p>
</div>

<div class="zero-knowledge-note">
    <p><strong>3. 零知識性（Zero-Knowledge）補充</strong></p>

    <p>PLONK 通過以下機制實現零知識性：</p>
    <ul>
        <li><strong>Blinding factors：</strong>在 $a(X), b(X), c(X), z(X)$ 中加入隨機多項式 $(b_1 X + b_2) Z_H(X)$（或更高次項），確保即使 Verifier 獲得了在隨機點 $\zeta$ 的評估值，也無法反推出 wire 的實際值 $w_i$。</li>
        <li><strong>隨機挑戰：</strong>$\beta, \gamma, \alpha, \zeta$ 的隨機性進一步混淆了評估值與原始 witness 的關係。</li>
        <li><strong>Simulator 存在性：</strong>在 Random Oracle Model 下，存在 simulator 能夠在不知道 witness 的情況下生成與真實 proof 分布無法區分的「模擬 proof」（通過編程 random oracle）。</li>
    </ul>

    <p class="note">
        <strong>直覺：</strong>Verifier 從 proof 中獲得的信息僅限於「Prover 知道滿足電路的 witness」，而無法學到任何關於 witness 具體值的額外信息。
    </p>
</div>

<style>
    .verifier-flow, .verifier-steps, .pairing-decomposition, .batched-opening,
    .polynomial-to-pairing, .complexity-analysis, .security-intuition,
    .soundness-intuition, .zero-knowledge-note {
        border-left: 4px solid #3498db;
        padding: 15px;
        margin-bottom: 15px;
        background-color: #f9f9f9;
    }

    .highlight-box {
        background-color: #e8f5e9;
        border-left: 4px solid #4caf50;
        padding: 15px;
        margin: 15px 0;
    }

    .note {
        border-left: 4px solid #e91e63;
        padding: 10px;
        margin-bottom: 10px;
        font-style: italic;
        background-color: #f9f9f9;
    }

    .reduction-table, .complexity-table {
        width: 100%;
        border-collapse: collapse;
        margin-bottom: 20px;
    }

    .reduction-table th, .reduction-table td,
    .complexity-table th, .complexity-table td {
        border: 1px solid #ccc;
        padding: 10px;
        text-align: left;
    }

    .reduction-table th, .complexity-table th {
        background-color: #f5f5f5;
        font-weight: bold;
    }

    .reduction-table tr:nth-child(even),
    .complexity-table tr:nth-child(even) {
        background-color: #fafafa;
    }
</style>

        <h3>9.3 Batched Pairing 檢查</h3>
        <p>合併 <span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="157" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D701 TEX-I"></mjx-c></mjx-mi></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>ζ</mi></math></mjx-assistive-mml></mjx-container></span> 與 <span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="158" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D701 TEX-I"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D714 TEX-I"></mjx-c></mjx-mi></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>ζ</mi><mi>ω</mi></math></mjx-assistive-mml></mjx-container></span> 兩個開放點，轉成單一 batched pairing：</p>
        <ol>
            <li><strong>計算線性化常數項 <span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="159" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D45F TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em;"><mjx-mn class="mjx-n" size="s"><mjx-c class="mjx-c30"></mjx-c></mjx-mn></mjx-script></mjx-msub></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>r</mi><mn>0</mn></msub></math></mjx-assistive-mml></mjx-container></span></strong>：<span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="160" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D45F TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em;"><mjx-mn class="mjx-n" size="s"><mjx-c class="mjx-c30"></mjx-c></mjx-mn></mjx-script></mjx-msub><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="4"><mjx-c class="mjx-c1D443 TEX-I"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D43C TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D701 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c2212"></mjx-c></mjx-mo><mjx-msub space="3"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D43F TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em;"><mjx-mn class="mjx-n" size="s"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D701 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-msup><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D6FC TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: 0.363em;"><mjx-mn class="mjx-n" size="s"><mjx-c class="mjx-c32"></mjx-c></mjx-mn></mjx-script></mjx-msup><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c2212"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="3"><mjx-c class="mjx-c1D6FC TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-texatom texclass="ORD"><mjx-mover><mjx-over style="padding-bottom: 0.105em; padding-left: 0.265em; margin-bottom: -0.544em;"><mjx-mo class="mjx-n" style="width: 0px; margin-left: -0.25em;"><mjx-c class="mjx-cAF"></mjx-c></mjx-mo></mjx-over><mjx-base style="padding-top: 0.001em;"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44E TEX-I"></mjx-c></mjx-mi></mjx-base></mjx-mover></mjx-texatom><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c2B"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="3"><mjx-c class="mjx-c1D6FD TEX-I"></mjx-c></mjx-mi><mjx-msub><mjx-texatom texclass="ORD"><mjx-mover><mjx-over style="padding-bottom: 0.105em; padding-left: 0.414em; margin-bottom: -0.544em;"><mjx-mo class="mjx-n" style="width: 0px; margin-left: -0.25em;"><mjx-c class="mjx-cAF"></mjx-c></mjx-mo></mjx-over><mjx-base><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D446 TEX-I"></mjx-c></mjx-mi></mjx-base></mjx-mover></mjx-texatom><mjx-script style="vertical-align: -0.15em; margin-left: -0.032em;"><mjx-texatom size="s" texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D70E TEX-I"></mjx-c></mjx-mi><mjx-mn class="mjx-n"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-texatom></mjx-script></mjx-msub><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c2B"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="3"><mjx-c class="mjx-c1D6FE TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-texatom texclass="ORD"><mjx-mover><mjx-over style="padding-bottom: 0.105em; padding-left: 0.214em; margin-bottom: -0.544em;"><mjx-mo class="mjx-n" style="width: 0px; margin-left: -0.25em;"><mjx-c class="mjx-cAF"></mjx-c></mjx-mo></mjx-over><mjx-base><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44F TEX-I"></mjx-c></mjx-mi></mjx-base></mjx-mover></mjx-texatom><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c2B"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="3"><mjx-c class="mjx-c1D6FD TEX-I"></mjx-c></mjx-mi><mjx-msub><mjx-texatom texclass="ORD"><mjx-mover><mjx-over style="padding-bottom: 0.105em; padding-left: 0.414em; margin-bottom: -0.544em;"><mjx-mo class="mjx-n" style="width: 0px; margin-left: -0.25em;"><mjx-c class="mjx-cAF"></mjx-c></mjx-mo></mjx-over><mjx-base><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D446 TEX-I"></mjx-c></mjx-mi></mjx-base></mjx-mover></mjx-texatom><mjx-script style="vertical-align: -0.15em; margin-left: -0.032em;"><mjx-texatom size="s" texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D70E TEX-I"></mjx-c></mjx-mi><mjx-mn class="mjx-n"><mjx-c class="mjx-c32"></mjx-c></mjx-mn></mjx-texatom></mjx-script></mjx-msub><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c2B"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="3"><mjx-c class="mjx-c1D6FE TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-texatom texclass="ORD"><mjx-mover><mjx-over style="padding-bottom: 0.105em; padding-left: 0.272em; margin-bottom: -0.544em;"><mjx-mo class="mjx-n" style="width: 0px; margin-left: -0.25em;"><mjx-c class="mjx-cAF"></mjx-c></mjx-mo></mjx-over><mjx-base><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D450 TEX-I"></mjx-c></mjx-mi></mjx-base></mjx-mover></mjx-texatom><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c2B"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="3"><mjx-c class="mjx-c1D6FE TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-msub><mjx-texatom texclass="ORD"><mjx-mover><mjx-over style="padding-bottom: 0.105em; padding-left: 0.288em; margin-bottom: -0.544em;"><mjx-mo class="mjx-n" style="width: 0px; margin-left: -0.25em;"><mjx-c class="mjx-cAF"></mjx-c></mjx-mo></mjx-over><mjx-base><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D467 TEX-I"></mjx-c></mjx-mi></mjx-base></mjx-mover></mjx-texatom><mjx-script style="vertical-align: -0.15em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D714 TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>r</mi><mn>0</mn></msub><mo>=</mo><mi>P</mi><mi>I</mi><mo stretchy="false">(</mo><mi>ζ</mi><mo stretchy="false">)</mo><mo>−</mo><msub><mi>L</mi><mn>1</mn></msub><mo stretchy="false">(</mo><mi>ζ</mi><mo stretchy="false">)</mo><msup><mi>α</mi><mn>2</mn></msup><mo>−</mo><mi>α</mi><mo stretchy="false">(</mo><mrow data-mjx-texclass="ORD"><mover><mi>a</mi><mo stretchy="false">¯</mo></mover></mrow><mo>+</mo><mi>β</mi><msub><mrow data-mjx-texclass="ORD"><mover><mi>S</mi><mo stretchy="false">¯</mo></mover></mrow><mrow data-mjx-texclass="ORD"><mi>σ</mi><mn>1</mn></mrow></msub><mo>+</mo><mi>γ</mi><mo stretchy="false">)</mo><mo stretchy="false">(</mo><mrow data-mjx-texclass="ORD"><mover><mi>b</mi><mo stretchy="false">¯</mo></mover></mrow><mo>+</mo><mi>β</mi><msub><mrow data-mjx-texclass="ORD"><mover><mi>S</mi><mo stretchy="false">¯</mo></mover></mrow><mrow data-mjx-texclass="ORD"><mi>σ</mi><mn>2</mn></mrow></msub><mo>+</mo><mi>γ</mi><mo stretchy="false">)</mo><mo stretchy="false">(</mo><mrow data-mjx-texclass="ORD"><mover><mi>c</mi><mo stretchy="false">¯</mo></mover></mrow><mo>+</mo><mi>γ</mi><mo stretchy="false">)</mo><msub><mrow data-mjx-texclass="ORD"><mover><mi>z</mi><mo stretchy="false">¯</mo></mover></mrow><mi>ω</mi></msub></math></mjx-assistive-mml></mjx-container></span>，Verifier 直接計算並併入線性化。</li>
            <li><strong>建立 <span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="161" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mo class="mjx-n"><mjx-c class="mjx-c5B"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D437 TEX-I"></mjx-c></mjx-mi><mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c5D"></mjx-c></mjx-mo><mjx-script style="vertical-align: -0.15em;"><mjx-mn class="mjx-n" size="s"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-script></mjx-msub></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">[</mo><mi>D</mi><msub><mo stretchy="false">]</mo><mn>1</mn></msub></math></mjx-assistive-mml></mjx-container></span></strong>：將 <span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="162" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D45F TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44B TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>r</mi><mo stretchy="false">(</mo><mi>X</mi><mo stretchy="false">)</mo></math></mjx-assistive-mml></mjx-container></span> 拆成 <span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="163" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D45F TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em;"><mjx-mn class="mjx-n" size="s"><mjx-c class="mjx-c30"></mjx-c></mjx-mn></mjx-script></mjx-msub><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c2B"></mjx-c></mjx-mo><mjx-msup space="3"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D45F TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: 0.363em;"><mjx-mo class="mjx-var" size="s"><mjx-c class="mjx-c2032"></mjx-c></mjx-mo></mjx-script></mjx-msup><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44B TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>r</mi><mn>0</mn></msub><mo>+</mo><msup><mi>r</mi><mo data-mjx-alternate="1">′</mo></msup><mo stretchy="false">(</mo><mi>X</mi><mo stretchy="false">)</mo></math></mjx-assistive-mml></mjx-container></span>，<span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="164" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mo class="mjx-n"><mjx-c class="mjx-c5B"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D437 TEX-I"></mjx-c></mjx-mi><mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c5D"></mjx-c></mjx-mo><mjx-script style="vertical-align: -0.15em;"><mjx-mn class="mjx-n" size="s"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-script></mjx-msub></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">[</mo><mi>D</mi><msub><mo stretchy="false">]</mo><mn>1</mn></msub></math></mjx-assistive-mml></mjx-container></span> 即為 <span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="165" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-msup><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D45F TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: 0.363em;"><mjx-mo class="mjx-var" size="s"><mjx-c class="mjx-c2032"></mjx-c></mjx-mo></mjx-script></mjx-msup><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44B TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><msup><mi>r</mi><mo data-mjx-alternate="1">′</mo></msup><mo stretchy="false">(</mo><mi>X</mi><mo stretchy="false">)</mo></math></mjx-assistive-mml></mjx-container></span> 的承諾（含 <span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="166" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D467 TEX-I"></mjx-c></mjx-mi></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>z</mi></math></mjx-assistive-mml></mjx-container></span> 相關項）。</li>
            <li><strong>建立 Batched Commitment <span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="167" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mo class="mjx-n"><mjx-c class="mjx-c5B"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D439 TEX-I"></mjx-c></mjx-mi><mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c5D"></mjx-c></mjx-mo><mjx-script style="vertical-align: -0.15em;"><mjx-mn class="mjx-n" size="s"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-script></mjx-msub></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">[</mo><mi>F</mi><msub><mo stretchy="false">]</mo><mn>1</mn></msub></math></mjx-assistive-mml></mjx-container></span></strong>：用挑戰 <span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="168" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D463 TEX-I"></mjx-c></mjx-mi></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>v</mi></math></mjx-assistive-mml></mjx-container></span> 對 <span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="169" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mo class="mjx-n"><mjx-c class="mjx-c5B"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D437 TEX-I"></mjx-c></mjx-mi><mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c5D"></mjx-c></mjx-mo><mjx-script style="vertical-align: -0.15em;"><mjx-mn class="mjx-n" size="s"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-script></mjx-msub></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">[</mo><mi>D</mi><msub><mo stretchy="false">]</mo><mn>1</mn></msub></math></mjx-assistive-mml></mjx-container></span>、wire 承諾、selector 承諾等做線性組合，壓縮所有約束。</li>
            <li><strong>建立 Batched Evaluation <span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="170" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mo class="mjx-n"><mjx-c class="mjx-c5B"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D438 TEX-I"></mjx-c></mjx-mi><mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c5D"></mjx-c></mjx-mo><mjx-script style="vertical-align: -0.15em;"><mjx-mn class="mjx-n" size="s"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-script></mjx-msub></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">[</mo><mi>E</mi><msub><mo stretchy="false">]</mo><mn>1</mn></msub></math></mjx-assistive-mml></mjx-container></span></strong>：計算對應於 <span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="171" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mo class="mjx-n"><mjx-c class="mjx-c5B"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D439 TEX-I"></mjx-c></mjx-mi><mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c5D"></mjx-c></mjx-mo><mjx-script style="vertical-align: -0.15em;"><mjx-mn class="mjx-n" size="s"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-script></mjx-msub></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">[</mo><mi>F</mi><msub><mo stretchy="false">]</mo><mn>1</mn></msub></math></mjx-assistive-mml></mjx-container></span> 的期望評估值群元素。</li>
        </ol>
        <p>
            最終檢查：
            </p><div class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" display="true" tabindex="0" ctxtmenu_counter="172" style="font-size: 113.1%; position: relative;"><mjx-math display="true" class="MJX-TEX" aria-hidden="true" style="margin-left: 0px; margin-right: 0px;"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D452 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mo class="mjx-n"><mjx-c class="mjx-c5B"></mjx-c></mjx-mo><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44A TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.104em;"><mjx-texatom size="s" texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D701 TEX-I"></mjx-c></mjx-mi></mjx-texatom></mjx-script></mjx-msub><mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c5D"></mjx-c></mjx-mo><mjx-script style="vertical-align: -0.15em;"><mjx-mn class="mjx-n" size="s"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-script></mjx-msub><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c2B"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="3"><mjx-c class="mjx-c1D462 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c22C5"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c5B"></mjx-c></mjx-mo><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44A TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.104em;"><mjx-texatom size="s" texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D701 TEX-I"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D714 TEX-I"></mjx-c></mjx-mi></mjx-texatom></mjx-script></mjx-msub><mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c5D"></mjx-c></mjx-mo><mjx-script style="vertical-align: -0.15em;"><mjx-mn class="mjx-n" size="s"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="2"><mjx-c class="mjx-c5B"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D465 TEX-I"></mjx-c></mjx-mi><mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c5D"></mjx-c></mjx-mo><mjx-script style="vertical-align: -0.15em;"><mjx-mn class="mjx-n" size="s"><mjx-c class="mjx-c32"></mjx-c></mjx-mn></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-texatom space="4" texclass="REL"><mjx-mover><mjx-over style="padding-bottom: 0.2em; padding-left: 0.222em;"><mjx-texatom size="s" texclass="ORD"><mjx-mo class="mjx-n"><mjx-c class="mjx-c3F"></mjx-c></mjx-mo></mjx-texatom></mjx-over><mjx-base><mjx-texatom texclass="OP"><mjx-mo class="mjx-n"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo></mjx-texatom></mjx-base></mjx-mover></mjx-texatom><mjx-mi class="mjx-i" space="4"><mjx-c class="mjx-c1D452 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D701 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c22C5"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c5B"></mjx-c></mjx-mo><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44A TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.104em;"><mjx-texatom size="s" texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D701 TEX-I"></mjx-c></mjx-mi></mjx-texatom></mjx-script></mjx-msub><mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c5D"></mjx-c></mjx-mo><mjx-script style="vertical-align: -0.15em;"><mjx-mn class="mjx-n" size="s"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-script></mjx-msub><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c2B"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="3"><mjx-c class="mjx-c1D462 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c22C5"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="3"><mjx-c class="mjx-c1D701 TEX-I"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D714 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c22C5"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c5B"></mjx-c></mjx-mo><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44A TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.104em;"><mjx-texatom size="s" texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D701 TEX-I"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D714 TEX-I"></mjx-c></mjx-mi></mjx-texatom></mjx-script></mjx-msub><mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c5D"></mjx-c></mjx-mo><mjx-script style="vertical-align: -0.15em;"><mjx-mn class="mjx-n" size="s"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-script></mjx-msub><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c2B"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c5B"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D439 TEX-I"></mjx-c></mjx-mi><mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c5D"></mjx-c></mjx-mo><mjx-script style="vertical-align: -0.15em;"><mjx-mn class="mjx-n" size="s"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-script></mjx-msub><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c2212"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c5B"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D438 TEX-I"></mjx-c></mjx-mi><mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c5D"></mjx-c></mjx-mo><mjx-script style="vertical-align: -0.15em;"><mjx-mn class="mjx-n" size="s"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="2"><mjx-c class="mjx-c5B"></mjx-c></mjx-mo><mjx-mn class="mjx-n"><mjx-c class="mjx-c31"></mjx-c></mjx-mn><mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c5D"></mjx-c></mjx-mo><mjx-script style="vertical-align: -0.15em;"><mjx-mn class="mjx-n" size="s"><mjx-c class="mjx-c32"></mjx-c></mjx-mn></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo></mjx-math><mjx-assistive-mml unselectable="on" display="block"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>e</mi><mo stretchy="false">(</mo><mo stretchy="false">[</mo><msub><mi>W</mi><mrow data-mjx-texclass="ORD"><mi>ζ</mi></mrow></msub><msub><mo stretchy="false">]</mo><mn>1</mn></msub><mo>+</mo><mi>u</mi><mo>⋅</mo><mo stretchy="false">[</mo><msub><mi>W</mi><mrow data-mjx-texclass="ORD"><mi>ζ</mi><mi>ω</mi></mrow></msub><msub><mo stretchy="false">]</mo><mn>1</mn></msub><mo>,</mo><mo stretchy="false">[</mo><mi>x</mi><msub><mo stretchy="false">]</mo><mn>2</mn></msub><mo stretchy="false">)</mo><mrow data-mjx-texclass="REL"><mover><mrow data-mjx-texclass="OP"><mo>=</mo></mrow><mrow data-mjx-texclass="ORD"><mo>?</mo></mrow></mover></mrow><mi>e</mi><mo stretchy="false">(</mo><mi>ζ</mi><mo>⋅</mo><mo stretchy="false">[</mo><msub><mi>W</mi><mrow data-mjx-texclass="ORD"><mi>ζ</mi></mrow></msub><msub><mo stretchy="false">]</mo><mn>1</mn></msub><mo>+</mo><mi>u</mi><mo>⋅</mo><mi>ζ</mi><mi>ω</mi><mo>⋅</mo><mo stretchy="false">[</mo><msub><mi>W</mi><mrow data-mjx-texclass="ORD"><mi>ζ</mi><mi>ω</mi></mrow></msub><msub><mo stretchy="false">]</mo><mn>1</mn></msub><mo>+</mo><mo stretchy="false">[</mo><mi>F</mi><msub><mo stretchy="false">]</mo><mn>1</mn></msub><mo>−</mo><mo stretchy="false">[</mo><mi>E</mi><msub><mo stretchy="false">]</mo><mn>1</mn></msub><mo>,</mo><mo stretchy="false">[</mo><mn>1</mn><msub><mo stretchy="false">]</mo><mn>2</mn></msub><mo stretchy="false">)</mo></math></mjx-assistive-mml></mjx-container></div>
        <p></p>

                                                <!-- Batched Pairing Check Flowchart -->
        <div class="chart-container">
            <div class="mermaid">
            graph TD
            classDef input fill:#fff9c4,stroke:#fbc02d,stroke-width:2px;
            classDef process fill:#e1f5fe,stroke:#01579b,stroke-width:2px;
            classDef check fill:#e8f5e9,stroke:#2e7d32,stroke-width:2px;

            Inputs("Inputs: Proof, VK, PublicInput"):::input
            
            subgraph Reconstruct ["1. 參數重建"]
                Transcript("Transcript Hash"):::process
                Challenges("挑戰值"):::process
                Transcript --> Challenges
            end
            
            subgraph PI_Calc ["2. 公開輸入處理"]
                PI_Eval("計算 PI z"):::process
                Lagrange("計算 L1 z, Zh z"):::process
            end

            subgraph Linearization ["3. 線性化"]
                Combine("組合 Commitment"):::process
                CombineE("組合 Evaluation"):::process
                
                Challenges --> Combine
                Challenges --> CombineE
            end
            
            subgraph FinalCheck ["4. Pairing Check"]
                Pairing{"Pairing Check 驗證"}:::check
                Valid(["Valid Proof"])
                Invalid(["Reject"])
                
                Pairing -->|Yes| Valid
                Pairing -->|No| Invalid
            end

            Inputs --> Transcript
            Inputs --> PI_Eval
            Challenges --> PI_Eval
            PI_Eval --> CombineE
            Combine --> Pairing
            CombineE --> Pairing
            </div>
        </div>
        </div>
    </section>
<section id="performance">
        <h2>10. 效能與實作 (Performance)</h2>

        <h3>10.1 Prover / Verifier 複雜度</h3>
        <p>
            根據論文分析與實作數據，PLONK 的效能表現如下：
        </p>
        <ul>
            <li><strong>Prover</strong>: 複雜度約為 <span class="math">9(n+a)</span> 次 <span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="173" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-msub><mjx-texatom texclass="ORD"><mjx-mi class="mjx-ds mjx-b"><mjx-c class="mjx-c1D53E TEX-A"></mjx-c></mjx-mi></mjx-texatom><mjx-script style="vertical-align: -0.15em;"><mjx-mn class="mjx-n" size="s"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-script></mjx-msub></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mrow data-mjx-texclass="ORD"><mi mathvariant="double-struck">G</mi></mrow><mn>1</mn></msub></math></mjx-assistive-mml></mjx-container></span> 指數運算。其中 <span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="174" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D45B TEX-I"></mjx-c></mjx-mi></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>n</mi></math></mjx-assistive-mml></mjx-container></span> 是乘法子群大小，<span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="175" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44E TEX-I"></mjx-c></mjx-mi></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>a</mi></math></mjx-assistive-mml></mjx-container></span> 是 wire 數量。與 Sonic 相比，PLONK 移除了大量的昂貴計算，顯著提升速度。</li>
            <li><strong>Verifier</strong>: 複雜度固定為 <strong>2 次配對運算</strong>，這與 Groth16（3 次配對）相當甚至更優，屬於常數等級驗證。</li>
        </ul>

        <h3>10.2 與 Groth16 / Sonic / Marlin 的比較</h3>
        <table>
            <tbody><tr>
                <th>特性</th>
                <th>Groth16</th>
                <th>Sonic (Helped)</th>
                <th>PLONK</th>
                <th>Marlin</th>
            </tr>
            <tr>
                <td>SRS 類型</td>
                <td>電路專用</td>
                <td>通用、可更新</td>
                <td>通用、可更新</td>
                <td>通用、可更新</td>
            </tr>
            <tr>
                <td>Proof 大小</td>
                <td>極小 (3 group elements)</td>
                <td>中等</td>
                <td>小 (~400-600 bytes)</td>
                <td>較大</td>
            </tr>
            <tr>
                <td>Verifier 時間</td>
                <td>極快</td>
                <td>快</td>
                <td>極快</td>
                <td>快</td>
            </tr>
        </tbody></table>
        <p>
            PLONK 在通用 SRS 的前提下，達到了最接近 Groth16 的效能。雖然 Proof 大小略大於 Groth16，但在靈活性與 setup 安全性上的優勢使其成為現代 SNARK 應用的首選之一。
        </p>

        <h3>10.3 實作與 Benchmark 結果</h3>
        <p>
            在標準硬體上的基準測試顯示，對於百萬閘（<span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="176" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-msup><mjx-mn class="mjx-n"><mjx-c class="mjx-c32"></mjx-c></mjx-mn><mjx-script style="vertical-align: 0.363em;"><mjx-texatom size="s" texclass="ORD"><mjx-mn class="mjx-n"><mjx-c class="mjx-c32"></mjx-c><mjx-c class="mjx-c30"></mjx-c></mjx-mn></mjx-texatom></mjx-script></mjx-msup></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><msup><mn>2</mn><mrow data-mjx-texclass="ORD"><mn>20</mn></mrow></msup></math></mjx-assistive-mml></mjx-container></span> constraints）級別的電路，PLONK 產生證明的時間可控制在 23 秒以內（參考論文圖 1 數據）。這使得它在實際應用（如 Rollup、隱私交易）中具備高度可行性。
        </p>
        <div style="display: flex; justify-content: center; margin: 2rem 0;">
            <a href="demo.html" class="btn" style="background-color: var(--primary-color); color: white; padding: 1rem 2rem; text-decoration: none; border-radius: 4px;">前往 Live Demo</a>
        </div>
    </section>

    <section id="security">
        <h2>11. 安全性與擴充 (Security)</h2>

        <h3>11.1 Compiler 觀點：從 IOP 到 SNARK</h3>
        <p>
            PLONK 的安全性架構可以視為一個編譯過程。我們首先建構一個 <strong>Polynomial IOP (Interactive Oracle Proof)</strong>，確保只要 Verifier 能正確查詢多項式，Prover 就無法作弊。接著，使用 <strong>KZG Polynomial Commitment Scheme</strong> 將協議「編譯」成簡潔 SNARK。Lemma 4.7 指出：若 IOP 具備 Knowledge Soundness 且 PCS 具備 Binding 性質，則編譯後的 SNARK 也具備 Knowledge Soundness。
        </p>

        <h3>11.2 零知識性與 Blinding 技巧</h3>
        <p>
            為了達成零知識性 (Zero-Knowledge)，Prover 在關鍵多項式（wire <span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="177" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44E TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="2"><mjx-c class="mjx-c1D44F TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="2"><mjx-c class="mjx-c1D450 TEX-I"></mjx-c></mjx-mi></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>a</mi><mo>,</mo><mi>b</mi><mo>,</mo><mi>c</mi></math></mjx-assistive-mml></mjx-container></span>, 排列 <span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="178" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D467 TEX-I"></mjx-c></mjx-mi></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>z</mi></math></mjx-assistive-mml></mjx-container></span>, 商 <span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="179" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D461 TEX-I"></mjx-c></mjx-mi></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>t</mi></math></mjx-assistive-mml></mjx-container></span>）中都加入了 <span class="math">Z_H(X)</span> 的隨機倍數。這些隨機項在 <span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="180" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D43B TEX-I"></mjx-c></mjx-mi></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>H</mi></math></mjx-assistive-mml></mjx-container></span> 上的評估值為零，不影響約束檢查，但在查詢點 <span class="math"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="181" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-texatom texclass="ORD"><mjx-mi class="mjx-fr"><mjx-c class="mjx-c1D537 TEX-FR"></mjx-c></mjx-mi></mjx-texatom></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow data-mjx-texclass="ORD"><mi mathvariant="fraktur">z</mi></mrow></math></mjx-assistive-mml></mjx-container></span> 提供了隨機掩蓋，確保 Verifier 無法推導出 witness 資訊。
        </p>

        <h3>11.3 通用 / 可更新 SRS 的安全性</h3>
        <p>
            PLONK 使用的 Monomial SRS 儀式基於 Bowe-Gabizon-Miers 方案，支援無限次數的更新。只要任一更新者銷毀隨機數，SRS 即為安全。
        </p>

        <h3>11.4 與其他系統的關係</h3>
        <p>
            PLONK 與 Fractal 或 Marlin 的主要區別在於算術化選擇。PLONK 使用基於加法閘與乘法閘的約束系統，並透過 Permutation Argument 處理線路連接，這在特定類型的電路（如扇入為 2）中更為高效。
        </p>
    </section>

    <section id="conclusion">
        <h2>12. 結論 (Conclusion)</h2>

        <h3>12.1 工作總結</h3>
        <p>
            PLONK 成功地在「通用 SRS」、「高效 Prover」與「簡潔 Verifier」三者之間取得了極佳的平衡。透過引入 Lagrange 基底的算術化與高效的 Permutation Argument，它克服了 Sonic 的效能缺陷。
        </p>

        <h3>12.2 對 zk-SNARK 生態系的意義</h3>
        <p>
            PLONK 的出現標誌著通用 SNARK 進入實用化階段，降低了隱私應用的部署門檻，並促進了 zk-Rollup 等技術的發展。其標準化的約束系統也為工具鏈整合奠定了基礎。
        </p>

        <h3>12.3 未來可能的延伸方向</h3>
        <p>
            未來的研究包括：(1) 替換底層的多項式承諾方案（如使用 Halo 的 IPA 或 FRI）；(2) 設計自定義閘 (Custom Gates) 與查找表 (Lookup Tables)；(3) 深化與遞迴 SNARK 的整合。
        </p>
    </section>

</main>



<div class="mermaidTooltip" style="opacity: 0;"></div></body></html>
